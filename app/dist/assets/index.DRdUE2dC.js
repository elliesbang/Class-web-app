function Cm(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ui(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Am={exports:{}},fa={},Rm={exports:{}},B={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ci=Symbol.for("react.element"),hw=Symbol.for("react.portal"),fw=Symbol.for("react.fragment"),pw=Symbol.for("react.strict_mode"),mw=Symbol.for("react.profiler"),gw=Symbol.for("react.provider"),yw=Symbol.for("react.context"),vw=Symbol.for("react.forward_ref"),xw=Symbol.for("react.suspense"),ww=Symbol.for("react.memo"),bw=Symbol.for("react.lazy"),ph=Symbol.iterator;function _w(t){return t===null||typeof t!="object"?null:(t=ph&&t[ph]||t["@@iterator"],typeof t=="function"?t:null)}var Om={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Im=Object.assign,Dm={};function Jr(t,e,n){this.props=t,this.context=e,this.refs=Dm,this.updater=n||Om}Jr.prototype.isReactComponent={};Jr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Lm(){}Lm.prototype=Jr.prototype;function Ec(t,e,n){this.props=t,this.context=e,this.refs=Dm,this.updater=n||Om}var Nc=Ec.prototype=new Lm;Nc.constructor=Ec;Im(Nc,Jr.prototype);Nc.isPureReactComponent=!0;var mh=Array.isArray,$m=Object.prototype.hasOwnProperty,kc={current:null},Mm={key:!0,ref:!0,__self:!0,__source:!0};function Um(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)$m.call(e,r)&&!Mm.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ci,type:t,key:i,ref:o,props:s,_owner:kc.current}}function Sw(t,e){return{$$typeof:ci,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tc(t){return typeof t=="object"&&t!==null&&t.$$typeof===ci}function jw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gh=/\/+/g;function Ja(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jw(""+t.key):e.toString(36)}function ro(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ci:case hw:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Ja(o,0):r,mh(s)?(n="",t!=null&&(n=t.replace(gh,"$&/")+"/"),ro(s,e,n,"",function(c){return c})):s!=null&&(Tc(s)&&(s=Sw(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(gh,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",mh(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Ja(i,a);o+=ro(i,e,n,l,s)}else if(l=_w(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Ja(i,a++),o+=ro(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Si(t,e,n){if(t==null)return t;var r=[],s=0;return ro(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Ew(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $e={current:null},so={transition:null},Nw={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:so,ReactCurrentOwner:kc};function Vm(){throw Error("act(...) is not supported in production builds of React.")}B.Children={map:Si,forEach:function(t,e,n){Si(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Si(t,function(){e++}),e},toArray:function(t){return Si(t,function(e){return e})||[]},only:function(t){if(!Tc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};B.Component=Jr;B.Fragment=fw;B.Profiler=mw;B.PureComponent=Ec;B.StrictMode=pw;B.Suspense=xw;B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nw;B.act=Vm;B.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Im({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=kc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)$m.call(e,l)&&!Mm.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ci,type:t.type,key:s,ref:i,props:r,_owner:o}};B.createContext=function(t){return t={$$typeof:yw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gw,_context:t},t.Consumer=t};B.createElement=Um;B.createFactory=function(t){var e=Um.bind(null,t);return e.type=t,e};B.createRef=function(){return{current:null}};B.forwardRef=function(t){return{$$typeof:vw,render:t}};B.isValidElement=Tc;B.lazy=function(t){return{$$typeof:bw,_payload:{_status:-1,_result:t},_init:Ew}};B.memo=function(t,e){return{$$typeof:ww,type:t,compare:e===void 0?null:e}};B.startTransition=function(t){var e=so.transition;so.transition={};try{t()}finally{so.transition=e}};B.unstable_act=Vm;B.useCallback=function(t,e){return $e.current.useCallback(t,e)};B.useContext=function(t){return $e.current.useContext(t)};B.useDebugValue=function(){};B.useDeferredValue=function(t){return $e.current.useDeferredValue(t)};B.useEffect=function(t,e){return $e.current.useEffect(t,e)};B.useId=function(){return $e.current.useId()};B.useImperativeHandle=function(t,e,n){return $e.current.useImperativeHandle(t,e,n)};B.useInsertionEffect=function(t,e){return $e.current.useInsertionEffect(t,e)};B.useLayoutEffect=function(t,e){return $e.current.useLayoutEffect(t,e)};B.useMemo=function(t,e){return $e.current.useMemo(t,e)};B.useReducer=function(t,e,n){return $e.current.useReducer(t,e,n)};B.useRef=function(t){return $e.current.useRef(t)};B.useState=function(t){return $e.current.useState(t)};B.useSyncExternalStore=function(t,e,n){return $e.current.useSyncExternalStore(t,e,n)};B.useTransition=function(){return $e.current.useTransition()};B.version="18.3.1";Rm.exports=B;var y=Rm.exports;const So=Pm(y),kw=Cm({__proto__:null,default:So},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw=y,Cw=Symbol.for("react.element"),Pw=Symbol.for("react.fragment"),Aw=Object.prototype.hasOwnProperty,Rw=Tw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ow={key:!0,ref:!0,__self:!0,__source:!0};function Fm(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Aw.call(e,r)&&!Ow.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Cw,type:t,key:i,ref:o,props:s,_owner:Rw.current}}fa.Fragment=Pw;fa.jsx=Fm;fa.jsxs=Fm;Am.exports=fa;var u=Am.exports,Hl={},Bm={exports:{}},et={},Gm={exports:{}},zm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,U){var V=P.length;P.push(U);e:for(;0<V;){var te=V-1>>>1,ve=P[te];if(0<s(ve,U))P[te]=U,P[V]=ve,V=te;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var U=P[0],V=P.pop();if(V!==U){P[0]=V;e:for(var te=0,ve=P.length,bi=ve>>>1;te<bi;){var jn=2*(te+1)-1,qa=P[jn],En=jn+1,_i=P[En];if(0>s(qa,V))En<ve&&0>s(_i,qa)?(P[te]=_i,P[En]=V,te=En):(P[te]=qa,P[jn]=V,te=jn);else if(En<ve&&0>s(_i,V))P[te]=_i,P[En]=V,te=En;else break e}}return U}function s(P,U){var V=P.sortIndex-U.sortIndex;return V!==0?V:P.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,g=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(P){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=P)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function _(P){if(v=!1,w(P),!g)if(n(l)!==null)g=!0,z(j);else{var U=n(c);U!==null&&K(_,U.startTime-P)}}function j(P,U){g=!1,v&&(v=!1,m(E),E=-1),p=!0;var V=f;try{for(w(U),h=n(l);h!==null&&(!(h.expirationTime>U)||P&&!I());){var te=h.callback;if(typeof te=="function"){h.callback=null,f=h.priorityLevel;var ve=te(h.expirationTime<=U);U=t.unstable_now(),typeof ve=="function"?h.callback=ve:h===n(l)&&r(l),w(U)}else r(l);h=n(l)}if(h!==null)var bi=!0;else{var jn=n(c);jn!==null&&K(_,jn.startTime-U),bi=!1}return bi}finally{h=null,f=V,p=!1}}var S=!1,N=null,E=-1,C=5,k=-1;function I(){return!(t.unstable_now()-k<C)}function ee(){if(N!==null){var P=t.unstable_now();k=P;var U=!0;try{U=N(!0,P)}finally{U?D():(S=!1,N=null)}}else S=!1}var D;if(typeof x=="function")D=function(){x(ee)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,L=G.port2;G.port1.onmessage=ee,D=function(){L.postMessage(null)}}else D=function(){b(ee,0)};function z(P){N=P,S||(S=!0,D())}function K(P,U){E=b(function(){P(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,z(j))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var V=f;f=U;try{return P()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,U){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var V=f;f=P;try{return U()}finally{f=V}},t.unstable_scheduleCallback=function(P,U,V){var te=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?te+V:te):V=te,P){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=V+ve,P={id:d++,callback:U,priorityLevel:P,startTime:V,expirationTime:ve,sortIndex:-1},V>te?(P.sortIndex=V,e(c,P),n(l)===null&&P===n(c)&&(v?(m(E),E=-1):v=!0,K(_,V-te))):(P.sortIndex=ve,e(l,P),g||p||(g=!0,z(j))),P},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(P){var U=f;return function(){var V=f;f=U;try{return P.apply(this,arguments)}finally{f=V}}}})(zm);Gm.exports=zm;var Iw=Gm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dw=y,Xe=Iw;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wm=new Set,$s={};function Qn(t,e){Lr(t,e),Lr(t+"Capture",e)}function Lr(t,e){for($s[t]=e,t=0;t<e.length;t++)Wm.add(e[t])}var $t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ql=Object.prototype.hasOwnProperty,Lw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yh={},vh={};function $w(t){return ql.call(vh,t)?!0:ql.call(yh,t)?!1:Lw.test(t)?vh[t]=!0:(yh[t]=!0,!1)}function Mw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Uw(t,e,n,r){if(e===null||typeof e>"u"||Mw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Me(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ne[t]=new Me(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ne[e]=new Me(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ne[t]=new Me(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ne[t]=new Me(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ne[t]=new Me(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ne[t]=new Me(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ne[t]=new Me(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ne[t]=new Me(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ne[t]=new Me(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cc=/[\-:]([a-z])/g;function Pc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cc,Pc);Ne[e]=new Me(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cc,Pc);Ne[e]=new Me(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cc,Pc);Ne[e]=new Me(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ne[t]=new Me(t,1,!1,t.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new Me("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ne[t]=new Me(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ac(t,e,n,r){var s=Ne.hasOwnProperty(e)?Ne[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Uw(e,n,s,r)&&(n=null),r||s===null?$w(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bt=Dw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ji=Symbol.for("react.element"),cr=Symbol.for("react.portal"),dr=Symbol.for("react.fragment"),Rc=Symbol.for("react.strict_mode"),Jl=Symbol.for("react.profiler"),Km=Symbol.for("react.provider"),Hm=Symbol.for("react.context"),Oc=Symbol.for("react.forward_ref"),Yl=Symbol.for("react.suspense"),Ql=Symbol.for("react.suspense_list"),Ic=Symbol.for("react.memo"),qt=Symbol.for("react.lazy"),qm=Symbol.for("react.offscreen"),xh=Symbol.iterator;function is(t){return t===null||typeof t!="object"?null:(t=xh&&t[xh]||t["@@iterator"],typeof t=="function"?t:null)}var le=Object.assign,Ya;function ps(t){if(Ya===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ya=e&&e[1]||""}return`
`+Ya+t}var Qa=!1;function Xa(t,e){if(!t||Qa)return"";Qa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Qa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ps(t):""}function Vw(t){switch(t.tag){case 5:return ps(t.type);case 16:return ps("Lazy");case 13:return ps("Suspense");case 19:return ps("SuspenseList");case 0:case 2:case 15:return t=Xa(t.type,!1),t;case 11:return t=Xa(t.type.render,!1),t;case 1:return t=Xa(t.type,!0),t;default:return""}}function Xl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case dr:return"Fragment";case cr:return"Portal";case Jl:return"Profiler";case Rc:return"StrictMode";case Yl:return"Suspense";case Ql:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hm:return(t.displayName||"Context")+".Consumer";case Km:return(t._context.displayName||"Context")+".Provider";case Oc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ic:return e=t.displayName||null,e!==null?e:Xl(t.type)||"Memo";case qt:e=t._payload,t=t._init;try{return Xl(t(e))}catch{}}return null}function Fw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xl(e);case 8:return e===Rc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Bw(t){var e=Jm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ei(t){t._valueTracker||(t._valueTracker=Bw(t))}function Ym(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Jm(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function jo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zl(t,e){var n=e.checked;return le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wh(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qm(t,e){e=e.checked,e!=null&&Ac(t,"checked",e,!1)}function eu(t,e){Qm(t,e);var n=fn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?tu(t,e.type,n):e.hasOwnProperty("defaultValue")&&tu(t,e.type,fn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function tu(t,e,n){(e!=="number"||jo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ms=Array.isArray;function kr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function nu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _h(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(T(92));if(ms(n)){if(1<n.length)throw Error(T(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fn(n)}}function Xm(t,e){var n=fn(e.value),r=fn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ru(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ni,eg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ni=Ni||document.createElement("div"),Ni.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ni.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ms(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gw=["Webkit","ms","Moz","O"];Object.keys(Ss).forEach(function(t){Gw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ss[e]=Ss[t]})});function tg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ss.hasOwnProperty(t)&&Ss[t]?(""+e).trim():e+"px"}function ng(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=tg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var zw=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function su(t,e){if(e){if(zw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function iu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ou=null;function Dc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var au=null,Tr=null,Cr=null;function jh(t){if(t=fi(t)){if(typeof au!="function")throw Error(T(280));var e=t.stateNode;e&&(e=va(e),au(t.stateNode,t.type,e))}}function rg(t){Tr?Cr?Cr.push(t):Cr=[t]:Tr=t}function sg(){if(Tr){var t=Tr,e=Cr;if(Cr=Tr=null,jh(t),e)for(t=0;t<e.length;t++)jh(e[t])}}function ig(t,e){return t(e)}function og(){}var Za=!1;function ag(t,e,n){if(Za)return t(e,n);Za=!0;try{return ig(t,e,n)}finally{Za=!1,(Tr!==null||Cr!==null)&&(og(),sg())}}function Us(t,e){var n=t.stateNode;if(n===null)return null;var r=va(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(T(231,e,typeof n));return n}var lu=!1;if($t)try{var os={};Object.defineProperty(os,"passive",{get:function(){lu=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{lu=!1}function Ww(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var js=!1,Eo=null,No=!1,uu=null,Kw={onError:function(t){js=!0,Eo=t}};function Hw(t,e,n,r,s,i,o,a,l){js=!1,Eo=null,Ww.apply(Kw,arguments)}function qw(t,e,n,r,s,i,o,a,l){if(Hw.apply(this,arguments),js){if(js){var c=Eo;js=!1,Eo=null}else throw Error(T(198));No||(No=!0,uu=c)}}function Xn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Eh(t){if(Xn(t)!==t)throw Error(T(188))}function Jw(t){var e=t.alternate;if(!e){if(e=Xn(t),e===null)throw Error(T(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Eh(s),t;if(i===r)return Eh(s),e;i=i.sibling}throw Error(T(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(T(189))}}if(n.alternate!==r)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?t:e}function ug(t){return t=Jw(t),t!==null?cg(t):null}function cg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cg(t);if(e!==null)return e;t=t.sibling}return null}var dg=Xe.unstable_scheduleCallback,Nh=Xe.unstable_cancelCallback,Yw=Xe.unstable_shouldYield,Qw=Xe.unstable_requestPaint,he=Xe.unstable_now,Xw=Xe.unstable_getCurrentPriorityLevel,Lc=Xe.unstable_ImmediatePriority,hg=Xe.unstable_UserBlockingPriority,ko=Xe.unstable_NormalPriority,Zw=Xe.unstable_LowPriority,fg=Xe.unstable_IdlePriority,pa=null,Et=null;function eb(t){if(Et&&typeof Et.onCommitFiberRoot=="function")try{Et.onCommitFiberRoot(pa,t,void 0,(t.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:rb,tb=Math.log,nb=Math.LN2;function rb(t){return t>>>=0,t===0?32:31-(tb(t)/nb|0)|0}var ki=64,Ti=4194304;function gs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function To(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=gs(a):(i&=o,i!==0&&(r=gs(i)))}else o=n&~s,o!==0?r=gs(o):i!==0&&(r=gs(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vt(e),s=1<<n,r|=t[n],e&=~s;return r}function sb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ib(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vt(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=sb(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function cu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function pg(){var t=ki;return ki<<=1,!(ki&4194240)&&(ki=64),t}function el(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function di(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vt(e),t[e]=n}function ob(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $c(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var q=0;function mg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gg,Mc,yg,vg,xg,du=!1,Ci=[],rn=null,sn=null,on=null,Vs=new Map,Fs=new Map,Yt=[],ab="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kh(t,e){switch(t){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":sn=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":Vs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fs.delete(e.pointerId)}}function as(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fi(e),e!==null&&Mc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function lb(t,e,n,r,s){switch(e){case"focusin":return rn=as(rn,t,e,n,r,s),!0;case"dragenter":return sn=as(sn,t,e,n,r,s),!0;case"mouseover":return on=as(on,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Vs.set(i,as(Vs.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Fs.set(i,as(Fs.get(i)||null,t,e,n,r,s)),!0}return!1}function wg(t){var e=Mn(t.target);if(e!==null){var n=Xn(e);if(n!==null){if(e=n.tag,e===13){if(e=lg(n),e!==null){t.blockedOn=e,xg(t.priority,function(){yg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function io(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ou=r,n.target.dispatchEvent(r),ou=null}else return e=fi(n),e!==null&&Mc(e),t.blockedOn=n,!1;e.shift()}return!0}function Th(t,e,n){io(t)&&n.delete(e)}function ub(){du=!1,rn!==null&&io(rn)&&(rn=null),sn!==null&&io(sn)&&(sn=null),on!==null&&io(on)&&(on=null),Vs.forEach(Th),Fs.forEach(Th)}function ls(t,e){t.blockedOn===e&&(t.blockedOn=null,du||(du=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,ub)))}function Bs(t){function e(s){return ls(s,t)}if(0<Ci.length){ls(Ci[0],t);for(var n=1;n<Ci.length;n++){var r=Ci[n];r.blockedOn===t&&(r.blockedOn=null)}}for(rn!==null&&ls(rn,t),sn!==null&&ls(sn,t),on!==null&&ls(on,t),Vs.forEach(e),Fs.forEach(e),n=0;n<Yt.length;n++)r=Yt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yt.length&&(n=Yt[0],n.blockedOn===null);)wg(n),n.blockedOn===null&&Yt.shift()}var Pr=Bt.ReactCurrentBatchConfig,Co=!0;function cb(t,e,n,r){var s=q,i=Pr.transition;Pr.transition=null;try{q=1,Uc(t,e,n,r)}finally{q=s,Pr.transition=i}}function db(t,e,n,r){var s=q,i=Pr.transition;Pr.transition=null;try{q=4,Uc(t,e,n,r)}finally{q=s,Pr.transition=i}}function Uc(t,e,n,r){if(Co){var s=hu(t,e,n,r);if(s===null)cl(t,e,r,Po,n),kh(t,r);else if(lb(s,t,e,n,r))r.stopPropagation();else if(kh(t,r),e&4&&-1<ab.indexOf(t)){for(;s!==null;){var i=fi(s);if(i!==null&&gg(i),i=hu(t,e,n,r),i===null&&cl(t,e,r,Po,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else cl(t,e,r,null,n)}}var Po=null;function hu(t,e,n,r){if(Po=null,t=Dc(r),t=Mn(t),t!==null)if(e=Xn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=lg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Po=t,null}function bg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xw()){case Lc:return 1;case hg:return 4;case ko:case Zw:return 16;case fg:return 536870912;default:return 16}default:return 16}}var en=null,Vc=null,oo=null;function _g(){if(oo)return oo;var t,e=Vc,n=e.length,r,s="value"in en?en.value:en.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return oo=s.slice(t,1<r?1-r:void 0)}function ao(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pi(){return!0}function Ch(){return!1}function tt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pi:Ch,this.isPropagationStopped=Ch,this}return le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),e}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fc=tt(Yr),hi=le({},Yr,{view:0,detail:0}),hb=tt(hi),tl,nl,us,ma=le({},hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==us&&(us&&t.type==="mousemove"?(tl=t.screenX-us.screenX,nl=t.screenY-us.screenY):nl=tl=0,us=t),tl)},movementY:function(t){return"movementY"in t?t.movementY:nl}}),Ph=tt(ma),fb=le({},ma,{dataTransfer:0}),pb=tt(fb),mb=le({},hi,{relatedTarget:0}),rl=tt(mb),gb=le({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),yb=tt(gb),vb=le({},Yr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xb=tt(vb),wb=le({},Yr,{data:0}),Ah=tt(wb),bb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_b={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sb[t])?!!e[t]:!1}function Bc(){return jb}var Eb=le({},hi,{key:function(t){if(t.key){var e=bb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ao(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_b[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bc,charCode:function(t){return t.type==="keypress"?ao(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ao(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Nb=tt(Eb),kb=le({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rh=tt(kb),Tb=le({},hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bc}),Cb=tt(Tb),Pb=le({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ab=tt(Pb),Rb=le({},ma,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ob=tt(Rb),Ib=[9,13,27,32],Gc=$t&&"CompositionEvent"in window,Es=null;$t&&"documentMode"in document&&(Es=document.documentMode);var Db=$t&&"TextEvent"in window&&!Es,Sg=$t&&(!Gc||Es&&8<Es&&11>=Es),Oh=" ",Ih=!1;function jg(t,e){switch(t){case"keyup":return Ib.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hr=!1;function Lb(t,e){switch(t){case"compositionend":return Eg(e);case"keypress":return e.which!==32?null:(Ih=!0,Oh);case"textInput":return t=e.data,t===Oh&&Ih?null:t;default:return null}}function $b(t,e){if(hr)return t==="compositionend"||!Gc&&jg(t,e)?(t=_g(),oo=Vc=en=null,hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Sg&&e.locale!=="ko"?null:e.data;default:return null}}var Mb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Mb[t.type]:e==="textarea"}function Ng(t,e,n,r){rg(r),e=Ao(e,"onChange"),0<e.length&&(n=new Fc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ns=null,Gs=null;function Ub(t){$g(t,0)}function ga(t){var e=mr(t);if(Ym(e))return t}function Vb(t,e){if(t==="change")return e}var kg=!1;if($t){var sl;if($t){var il="oninput"in document;if(!il){var Lh=document.createElement("div");Lh.setAttribute("oninput","return;"),il=typeof Lh.oninput=="function"}sl=il}else sl=!1;kg=sl&&(!document.documentMode||9<document.documentMode)}function $h(){Ns&&(Ns.detachEvent("onpropertychange",Tg),Gs=Ns=null)}function Tg(t){if(t.propertyName==="value"&&ga(Gs)){var e=[];Ng(e,Gs,t,Dc(t)),ag(Ub,e)}}function Fb(t,e,n){t==="focusin"?($h(),Ns=e,Gs=n,Ns.attachEvent("onpropertychange",Tg)):t==="focusout"&&$h()}function Bb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ga(Gs)}function Gb(t,e){if(t==="click")return ga(e)}function zb(t,e){if(t==="input"||t==="change")return ga(e)}function Wb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wt=typeof Object.is=="function"?Object.is:Wb;function zs(t,e){if(wt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ql.call(e,s)||!wt(t[s],e[s]))return!1}return!0}function Mh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uh(t,e){var n=Mh(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Mh(n)}}function Cg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Pg(){for(var t=window,e=jo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=jo(t.document)}return e}function zc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Kb(t){var e=Pg(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Cg(n.ownerDocument.documentElement,n)){if(r!==null&&zc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Uh(n,i);var o=Uh(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Hb=$t&&"documentMode"in document&&11>=document.documentMode,fr=null,fu=null,ks=null,pu=!1;function Vh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pu||fr==null||fr!==jo(r)||(r=fr,"selectionStart"in r&&zc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ks&&zs(ks,r)||(ks=r,r=Ao(fu,"onSelect"),0<r.length&&(e=new Fc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fr)))}function Ai(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pr={animationend:Ai("Animation","AnimationEnd"),animationiteration:Ai("Animation","AnimationIteration"),animationstart:Ai("Animation","AnimationStart"),transitionend:Ai("Transition","TransitionEnd")},ol={},Ag={};$t&&(Ag=document.createElement("div").style,"AnimationEvent"in window||(delete pr.animationend.animation,delete pr.animationiteration.animation,delete pr.animationstart.animation),"TransitionEvent"in window||delete pr.transitionend.transition);function ya(t){if(ol[t])return ol[t];if(!pr[t])return t;var e=pr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ag)return ol[t]=e[n];return t}var Rg=ya("animationend"),Og=ya("animationiteration"),Ig=ya("animationstart"),Dg=ya("transitionend"),Lg=new Map,Fh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yn(t,e){Lg.set(t,e),Qn(e,[t])}for(var al=0;al<Fh.length;al++){var ll=Fh[al],qb=ll.toLowerCase(),Jb=ll[0].toUpperCase()+ll.slice(1);yn(qb,"on"+Jb)}yn(Rg,"onAnimationEnd");yn(Og,"onAnimationIteration");yn(Ig,"onAnimationStart");yn("dblclick","onDoubleClick");yn("focusin","onFocus");yn("focusout","onBlur");yn(Dg,"onTransitionEnd");Lr("onMouseEnter",["mouseout","mouseover"]);Lr("onMouseLeave",["mouseout","mouseover"]);Lr("onPointerEnter",["pointerout","pointerover"]);Lr("onPointerLeave",["pointerout","pointerover"]);Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yb=new Set("cancel close invalid load scroll toggle".split(" ").concat(ys));function Bh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qw(r,e,void 0,t),t.currentTarget=null}function $g(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Bh(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Bh(s,a,c),i=l}}}if(No)throw t=uu,No=!1,uu=null,t}function Q(t,e){var n=e[xu];n===void 0&&(n=e[xu]=new Set);var r=t+"__bubble";n.has(r)||(Mg(e,t,2,!1),n.add(r))}function ul(t,e,n){var r=0;e&&(r|=4),Mg(n,t,r,e)}var Ri="_reactListening"+Math.random().toString(36).slice(2);function Ws(t){if(!t[Ri]){t[Ri]=!0,Wm.forEach(function(n){n!=="selectionchange"&&(Yb.has(n)||ul(n,!1,t),ul(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ri]||(e[Ri]=!0,ul("selectionchange",!1,e))}}function Mg(t,e,n,r){switch(bg(e)){case 1:var s=cb;break;case 4:s=db;break;default:s=Uc}n=s.bind(null,e,n,t),s=void 0,!lu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function cl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Mn(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}ag(function(){var c=i,d=Dc(n),h=[];e:{var f=Lg.get(t);if(f!==void 0){var p=Fc,g=t;switch(t){case"keypress":if(ao(n)===0)break e;case"keydown":case"keyup":p=Nb;break;case"focusin":g="focus",p=rl;break;case"focusout":g="blur",p=rl;break;case"beforeblur":case"afterblur":p=rl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ph;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=pb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Cb;break;case Rg:case Og:case Ig:p=yb;break;case Dg:p=Ab;break;case"scroll":p=hb;break;case"wheel":p=Ob;break;case"copy":case"cut":case"paste":p=xb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Rh}var v=(e&4)!==0,b=!v&&t==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var x=c,w;x!==null;){w=x;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,m!==null&&(_=Us(x,m),_!=null&&v.push(Ks(x,_,w)))),b)break;x=x.return}0<v.length&&(f=new p(f,g,null,n,d),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==ou&&(g=n.relatedTarget||n.fromElement)&&(Mn(g)||g[Mt]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Mn(g):null,g!==null&&(b=Xn(g),g!==b||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(v=Ph,_="onMouseLeave",m="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=Rh,_="onPointerLeave",m="onPointerEnter",x="pointer"),b=p==null?f:mr(p),w=g==null?f:mr(g),f=new v(_,x+"leave",p,n,d),f.target=b,f.relatedTarget=w,_=null,Mn(d)===c&&(v=new v(m,x+"enter",g,n,d),v.target=w,v.relatedTarget=b,_=v),b=_,p&&g)t:{for(v=p,m=g,x=0,w=v;w;w=nr(w))x++;for(w=0,_=m;_;_=nr(_))w++;for(;0<x-w;)v=nr(v),x--;for(;0<w-x;)m=nr(m),w--;for(;x--;){if(v===m||m!==null&&v===m.alternate)break t;v=nr(v),m=nr(m)}v=null}else v=null;p!==null&&Gh(h,f,p,v,!1),g!==null&&b!==null&&Gh(h,b,g,v,!0)}}e:{if(f=c?mr(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var j=Vb;else if(Dh(f))if(kg)j=zb;else{j=Bb;var S=Fb}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=Gb);if(j&&(j=j(t,c))){Ng(h,j,n,d);break e}S&&S(t,f,c),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&tu(f,"number",f.value)}switch(S=c?mr(c):window,t){case"focusin":(Dh(S)||S.contentEditable==="true")&&(fr=S,fu=c,ks=null);break;case"focusout":ks=fu=fr=null;break;case"mousedown":pu=!0;break;case"contextmenu":case"mouseup":case"dragend":pu=!1,Vh(h,n,d);break;case"selectionchange":if(Hb)break;case"keydown":case"keyup":Vh(h,n,d)}var N;if(Gc)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else hr?jg(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Sg&&n.locale!=="ko"&&(hr||E!=="onCompositionStart"?E==="onCompositionEnd"&&hr&&(N=_g()):(en=d,Vc="value"in en?en.value:en.textContent,hr=!0)),S=Ao(c,E),0<S.length&&(E=new Ah(E,t,null,n,d),h.push({event:E,listeners:S}),N?E.data=N:(N=Eg(n),N!==null&&(E.data=N)))),(N=Db?Lb(t,n):$b(t,n))&&(c=Ao(c,"onBeforeInput"),0<c.length&&(d=new Ah("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:c}),d.data=N))}$g(h,e)})}function Ks(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ao(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Us(t,n),i!=null&&r.unshift(Ks(t,i,s)),i=Us(t,e),i!=null&&r.push(Ks(t,i,s))),t=t.return}return r}function nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gh(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Us(n,i),l!=null&&o.unshift(Ks(n,l,a))):s||(l=Us(n,i),l!=null&&o.push(Ks(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Qb=/\r\n?/g,Xb=/\u0000|\uFFFD/g;function zh(t){return(typeof t=="string"?t:""+t).replace(Qb,`
`).replace(Xb,"")}function Oi(t,e,n){if(e=zh(e),zh(t)!==e&&n)throw Error(T(425))}function Ro(){}var mu=null,gu=null;function yu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vu=typeof setTimeout=="function"?setTimeout:void 0,Zb=typeof clearTimeout=="function"?clearTimeout:void 0,Wh=typeof Promise=="function"?Promise:void 0,e_=typeof queueMicrotask=="function"?queueMicrotask:typeof Wh<"u"?function(t){return Wh.resolve(null).then(t).catch(t_)}:vu;function t_(t){setTimeout(function(){throw t})}function dl(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Bs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Bs(e)}function an(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qr=Math.random().toString(36).slice(2),jt="__reactFiber$"+Qr,Hs="__reactProps$"+Qr,Mt="__reactContainer$"+Qr,xu="__reactEvents$"+Qr,n_="__reactListeners$"+Qr,r_="__reactHandles$"+Qr;function Mn(t){var e=t[jt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mt]||n[jt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kh(t);t!==null;){if(n=t[jt])return n;t=Kh(t)}return e}t=n,n=t.parentNode}return null}function fi(t){return t=t[jt]||t[Mt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function va(t){return t[Hs]||null}var wu=[],gr=-1;function vn(t){return{current:t}}function X(t){0>gr||(t.current=wu[gr],wu[gr]=null,gr--)}function Y(t,e){gr++,wu[gr]=t.current,t.current=e}var pn={},Oe=vn(pn),ze=vn(!1),Kn=pn;function $r(t,e){var n=t.type.contextTypes;if(!n)return pn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function We(t){return t=t.childContextTypes,t!=null}function Oo(){X(ze),X(Oe)}function Hh(t,e,n){if(Oe.current!==pn)throw Error(T(168));Y(Oe,e),Y(ze,n)}function Ug(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(T(108,Fw(t)||"Unknown",s));return le({},n,r)}function Io(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pn,Kn=Oe.current,Y(Oe,t),Y(ze,ze.current),!0}function qh(t,e,n){var r=t.stateNode;if(!r)throw Error(T(169));n?(t=Ug(t,e,Kn),r.__reactInternalMemoizedMergedChildContext=t,X(ze),X(Oe),Y(Oe,t)):X(ze),Y(ze,n)}var At=null,xa=!1,hl=!1;function Vg(t){At===null?At=[t]:At.push(t)}function s_(t){xa=!0,Vg(t)}function xn(){if(!hl&&At!==null){hl=!0;var t=0,e=q;try{var n=At;for(q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}At=null,xa=!1}catch(s){throw At!==null&&(At=At.slice(t+1)),dg(Lc,xn),s}finally{q=e,hl=!1}}return null}var yr=[],vr=0,Do=null,Lo=0,st=[],it=0,Hn=null,Rt=1,Ot="";function Cn(t,e){yr[vr++]=Lo,yr[vr++]=Do,Do=t,Lo=e}function Fg(t,e,n){st[it++]=Rt,st[it++]=Ot,st[it++]=Hn,Hn=t;var r=Rt;t=Ot;var s=32-vt(r)-1;r&=~(1<<s),n+=1;var i=32-vt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Rt=1<<32-vt(e)+s|n<<s|r,Ot=i+t}else Rt=1<<i|n<<s|r,Ot=t}function Wc(t){t.return!==null&&(Cn(t,1),Fg(t,1,0))}function Kc(t){for(;t===Do;)Do=yr[--vr],yr[vr]=null,Lo=yr[--vr],yr[vr]=null;for(;t===Hn;)Hn=st[--it],st[it]=null,Ot=st[--it],st[it]=null,Rt=st[--it],st[it]=null}var Ye=null,Je=null,re=!1,yt=null;function Bg(t,e){var n=ot(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ye=t,Je=an(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ye=t,Je=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hn!==null?{id:Rt,overflow:Ot}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ot(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ye=t,Je=null,!0):!1;default:return!1}}function bu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _u(t){if(re){var e=Je;if(e){var n=e;if(!Jh(t,e)){if(bu(t))throw Error(T(418));e=an(n.nextSibling);var r=Ye;e&&Jh(t,e)?Bg(r,n):(t.flags=t.flags&-4097|2,re=!1,Ye=t)}}else{if(bu(t))throw Error(T(418));t.flags=t.flags&-4097|2,re=!1,Ye=t}}}function Yh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ye=t}function Ii(t){if(t!==Ye)return!1;if(!re)return Yh(t),re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yu(t.type,t.memoizedProps)),e&&(e=Je)){if(bu(t))throw Gg(),Error(T(418));for(;e;)Bg(t,e),e=an(e.nextSibling)}if(Yh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Je=an(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Je=null}}else Je=Ye?an(t.stateNode.nextSibling):null;return!0}function Gg(){for(var t=Je;t;)t=an(t.nextSibling)}function Mr(){Je=Ye=null,re=!1}function Hc(t){yt===null?yt=[t]:yt.push(t)}var i_=Bt.ReactCurrentBatchConfig;function cs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var r=n.stateNode}if(!r)throw Error(T(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,t))}return t}function Di(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qh(t){var e=t._init;return e(t._payload)}function zg(t){function e(m,x){if(t){var w=m.deletions;w===null?(m.deletions=[x],m.flags|=16):w.push(x)}}function n(m,x){if(!t)return null;for(;x!==null;)e(m,x),x=x.sibling;return null}function r(m,x){for(m=new Map;x!==null;)x.key!==null?m.set(x.key,x):m.set(x.index,x),x=x.sibling;return m}function s(m,x){return m=dn(m,x),m.index=0,m.sibling=null,m}function i(m,x,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<x?(m.flags|=2,x):w):(m.flags|=2,x)):(m.flags|=1048576,x)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,x,w,_){return x===null||x.tag!==6?(x=xl(w,m.mode,_),x.return=m,x):(x=s(x,w),x.return=m,x)}function l(m,x,w,_){var j=w.type;return j===dr?d(m,x,w.props.children,_,w.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===qt&&Qh(j)===x.type)?(_=s(x,w.props),_.ref=cs(m,x,w),_.return=m,_):(_=mo(w.type,w.key,w.props,null,m.mode,_),_.ref=cs(m,x,w),_.return=m,_)}function c(m,x,w,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=wl(w,m.mode,_),x.return=m,x):(x=s(x,w.children||[]),x.return=m,x)}function d(m,x,w,_,j){return x===null||x.tag!==7?(x=zn(w,m.mode,_,j),x.return=m,x):(x=s(x,w),x.return=m,x)}function h(m,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=xl(""+x,m.mode,w),x.return=m,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ji:return w=mo(x.type,x.key,x.props,null,m.mode,w),w.ref=cs(m,null,x),w.return=m,w;case cr:return x=wl(x,m.mode,w),x.return=m,x;case qt:var _=x._init;return h(m,_(x._payload),w)}if(ms(x)||is(x))return x=zn(x,m.mode,w,null),x.return=m,x;Di(m,x)}return null}function f(m,x,w,_){var j=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:a(m,x,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ji:return w.key===j?l(m,x,w,_):null;case cr:return w.key===j?c(m,x,w,_):null;case qt:return j=w._init,f(m,x,j(w._payload),_)}if(ms(w)||is(w))return j!==null?null:d(m,x,w,_,null);Di(m,w)}return null}function p(m,x,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(w)||null,a(x,m,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ji:return m=m.get(_.key===null?w:_.key)||null,l(x,m,_,j);case cr:return m=m.get(_.key===null?w:_.key)||null,c(x,m,_,j);case qt:var S=_._init;return p(m,x,w,S(_._payload),j)}if(ms(_)||is(_))return m=m.get(w)||null,d(x,m,_,j,null);Di(x,_)}return null}function g(m,x,w,_){for(var j=null,S=null,N=x,E=x=0,C=null;N!==null&&E<w.length;E++){N.index>E?(C=N,N=null):C=N.sibling;var k=f(m,N,w[E],_);if(k===null){N===null&&(N=C);break}t&&N&&k.alternate===null&&e(m,N),x=i(k,x,E),S===null?j=k:S.sibling=k,S=k,N=C}if(E===w.length)return n(m,N),re&&Cn(m,E),j;if(N===null){for(;E<w.length;E++)N=h(m,w[E],_),N!==null&&(x=i(N,x,E),S===null?j=N:S.sibling=N,S=N);return re&&Cn(m,E),j}for(N=r(m,N);E<w.length;E++)C=p(N,m,E,w[E],_),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?E:C.key),x=i(C,x,E),S===null?j=C:S.sibling=C,S=C);return t&&N.forEach(function(I){return e(m,I)}),re&&Cn(m,E),j}function v(m,x,w,_){var j=is(w);if(typeof j!="function")throw Error(T(150));if(w=j.call(w),w==null)throw Error(T(151));for(var S=j=null,N=x,E=x=0,C=null,k=w.next();N!==null&&!k.done;E++,k=w.next()){N.index>E?(C=N,N=null):C=N.sibling;var I=f(m,N,k.value,_);if(I===null){N===null&&(N=C);break}t&&N&&I.alternate===null&&e(m,N),x=i(I,x,E),S===null?j=I:S.sibling=I,S=I,N=C}if(k.done)return n(m,N),re&&Cn(m,E),j;if(N===null){for(;!k.done;E++,k=w.next())k=h(m,k.value,_),k!==null&&(x=i(k,x,E),S===null?j=k:S.sibling=k,S=k);return re&&Cn(m,E),j}for(N=r(m,N);!k.done;E++,k=w.next())k=p(N,m,E,k.value,_),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?E:k.key),x=i(k,x,E),S===null?j=k:S.sibling=k,S=k);return t&&N.forEach(function(ee){return e(m,ee)}),re&&Cn(m,E),j}function b(m,x,w,_){if(typeof w=="object"&&w!==null&&w.type===dr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ji:e:{for(var j=w.key,S=x;S!==null;){if(S.key===j){if(j=w.type,j===dr){if(S.tag===7){n(m,S.sibling),x=s(S,w.props.children),x.return=m,m=x;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===qt&&Qh(j)===S.type){n(m,S.sibling),x=s(S,w.props),x.ref=cs(m,S,w),x.return=m,m=x;break e}n(m,S);break}else e(m,S);S=S.sibling}w.type===dr?(x=zn(w.props.children,m.mode,_,w.key),x.return=m,m=x):(_=mo(w.type,w.key,w.props,null,m.mode,_),_.ref=cs(m,x,w),_.return=m,m=_)}return o(m);case cr:e:{for(S=w.key;x!==null;){if(x.key===S)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(m,x.sibling),x=s(x,w.children||[]),x.return=m,m=x;break e}else{n(m,x);break}else e(m,x);x=x.sibling}x=wl(w,m.mode,_),x.return=m,m=x}return o(m);case qt:return S=w._init,b(m,x,S(w._payload),_)}if(ms(w))return g(m,x,w,_);if(is(w))return v(m,x,w,_);Di(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(m,x.sibling),x=s(x,w),x.return=m,m=x):(n(m,x),x=xl(w,m.mode,_),x.return=m,m=x),o(m)):n(m,x)}return b}var Ur=zg(!0),Wg=zg(!1),$o=vn(null),Mo=null,xr=null,qc=null;function Jc(){qc=xr=Mo=null}function Yc(t){var e=$o.current;X($o),t._currentValue=e}function Su(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ar(t,e){Mo=t,qc=xr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ge=!0),t.firstContext=null)}function lt(t){var e=t._currentValue;if(qc!==t)if(t={context:t,memoizedValue:e,next:null},xr===null){if(Mo===null)throw Error(T(308));xr=t,Mo.dependencies={lanes:0,firstContext:t}}else xr=xr.next=t;return e}var Un=null;function Qc(t){Un===null?Un=[t]:Un.push(t)}function Kg(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Qc(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ut(t,r)}function Ut(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jt=!1;function Xc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function It(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ln(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,H&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ut(t,n)}return s=r.interleaved,s===null?(e.next=e,Qc(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ut(t,n)}function lo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$c(t,n)}}function Xh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uo(t,e,n,r){var s=t.updateQueue;Jt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(f=e,p=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=le({},h,f);break e;case 2:Jt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Jn|=o,t.lanes=o,t.memoizedState=h}}function Zh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(T(191,s));s.call(r)}}}var pi={},Nt=vn(pi),qs=vn(pi),Js=vn(pi);function Vn(t){if(t===pi)throw Error(T(174));return t}function Zc(t,e){switch(Y(Js,e),Y(qs,t),Y(Nt,pi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ru(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ru(e,t)}X(Nt),Y(Nt,e)}function Vr(){X(Nt),X(qs),X(Js)}function qg(t){Vn(Js.current);var e=Vn(Nt.current),n=ru(e,t.type);e!==n&&(Y(qs,t),Y(Nt,n))}function ed(t){qs.current===t&&(X(Nt),X(qs))}var se=vn(0);function Vo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fl=[];function td(){for(var t=0;t<fl.length;t++)fl[t]._workInProgressVersionPrimary=null;fl.length=0}var uo=Bt.ReactCurrentDispatcher,pl=Bt.ReactCurrentBatchConfig,qn=0,oe=null,ge=null,xe=null,Fo=!1,Ts=!1,Ys=0,o_=0;function ke(){throw Error(T(321))}function nd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wt(t[n],e[n]))return!1;return!0}function rd(t,e,n,r,s,i){if(qn=i,oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uo.current=t===null||t.memoizedState===null?c_:d_,t=n(r,s),Ts){i=0;do{if(Ts=!1,Ys=0,25<=i)throw Error(T(301));i+=1,xe=ge=null,e.updateQueue=null,uo.current=h_,t=n(r,s)}while(Ts)}if(uo.current=Bo,e=ge!==null&&ge.next!==null,qn=0,xe=ge=oe=null,Fo=!1,e)throw Error(T(300));return t}function sd(){var t=Ys!==0;return Ys=0,t}function _t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?oe.memoizedState=xe=t:xe=xe.next=t,xe}function ut(){if(ge===null){var t=oe.alternate;t=t!==null?t.memoizedState:null}else t=ge.next;var e=xe===null?oe.memoizedState:xe.next;if(e!==null)xe=e,ge=t;else{if(t===null)throw Error(T(310));ge=t,t={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},xe===null?oe.memoizedState=xe=t:xe=xe.next=t}return xe}function Qs(t,e){return typeof e=="function"?e(t):e}function ml(t){var e=ut(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=ge,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((qn&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,oe.lanes|=d,Jn|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,wt(r,e.memoizedState)||(Ge=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,oe.lanes|=i,Jn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gl(t){var e=ut(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);wt(i,e.memoizedState)||(Ge=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Jg(){}function Yg(t,e){var n=oe,r=ut(),s=e(),i=!wt(r.memoizedState,s);if(i&&(r.memoizedState=s,Ge=!0),r=r.queue,id(Zg.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||xe!==null&&xe.memoizedState.tag&1){if(n.flags|=2048,Xs(9,Xg.bind(null,n,r,s,e),void 0,null),we===null)throw Error(T(349));qn&30||Qg(n,e,s)}return s}function Qg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Xg(t,e,n,r){e.value=n,e.getSnapshot=r,ey(e)&&ty(t)}function Zg(t,e,n){return n(function(){ey(e)&&ty(t)})}function ey(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wt(t,n)}catch{return!0}}function ty(t){var e=Ut(t,1);e!==null&&xt(e,t,1,-1)}function ef(t){var e=_t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:t},e.queue=t,t=t.dispatch=u_.bind(null,oe,t),[e.memoizedState,t]}function Xs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ny(){return ut().memoizedState}function co(t,e,n,r){var s=_t();oe.flags|=t,s.memoizedState=Xs(1|e,n,void 0,r===void 0?null:r)}function wa(t,e,n,r){var s=ut();r=r===void 0?null:r;var i=void 0;if(ge!==null){var o=ge.memoizedState;if(i=o.destroy,r!==null&&nd(r,o.deps)){s.memoizedState=Xs(e,n,i,r);return}}oe.flags|=t,s.memoizedState=Xs(1|e,n,i,r)}function tf(t,e){return co(8390656,8,t,e)}function id(t,e){return wa(2048,8,t,e)}function ry(t,e){return wa(4,2,t,e)}function sy(t,e){return wa(4,4,t,e)}function iy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oy(t,e,n){return n=n!=null?n.concat([t]):null,wa(4,4,iy.bind(null,e,t),n)}function od(){}function ay(t,e){var n=ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ly(t,e){var n=ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function uy(t,e,n){return qn&21?(wt(n,e)||(n=pg(),oe.lanes|=n,Jn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ge=!0),t.memoizedState=n)}function a_(t,e){var n=q;q=n!==0&&4>n?n:4,t(!0);var r=pl.transition;pl.transition={};try{t(!1),e()}finally{q=n,pl.transition=r}}function cy(){return ut().memoizedState}function l_(t,e,n){var r=cn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dy(t))hy(e,n);else if(n=Kg(t,e,n,r),n!==null){var s=Le();xt(n,t,r,s),fy(n,e,r)}}function u_(t,e,n){var r=cn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dy(t))hy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,wt(a,o)){var l=e.interleaved;l===null?(s.next=s,Qc(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Kg(t,e,s,r),n!==null&&(s=Le(),xt(n,t,r,s),fy(n,e,r))}}function dy(t){var e=t.alternate;return t===oe||e!==null&&e===oe}function hy(t,e){Ts=Fo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$c(t,n)}}var Bo={readContext:lt,useCallback:ke,useContext:ke,useEffect:ke,useImperativeHandle:ke,useInsertionEffect:ke,useLayoutEffect:ke,useMemo:ke,useReducer:ke,useRef:ke,useState:ke,useDebugValue:ke,useDeferredValue:ke,useTransition:ke,useMutableSource:ke,useSyncExternalStore:ke,useId:ke,unstable_isNewReconciler:!1},c_={readContext:lt,useCallback:function(t,e){return _t().memoizedState=[t,e===void 0?null:e],t},useContext:lt,useEffect:tf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,co(4194308,4,iy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return co(4194308,4,t,e)},useInsertionEffect:function(t,e){return co(4,2,t,e)},useMemo:function(t,e){var n=_t();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_t();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=l_.bind(null,oe,t),[r.memoizedState,t]},useRef:function(t){var e=_t();return t={current:t},e.memoizedState=t},useState:ef,useDebugValue:od,useDeferredValue:function(t){return _t().memoizedState=t},useTransition:function(){var t=ef(!1),e=t[0];return t=a_.bind(null,t[1]),_t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=oe,s=_t();if(re){if(n===void 0)throw Error(T(407));n=n()}else{if(n=e(),we===null)throw Error(T(349));qn&30||Qg(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,tf(Zg.bind(null,r,i,t),[t]),r.flags|=2048,Xs(9,Xg.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=_t(),e=we.identifierPrefix;if(re){var n=Ot,r=Rt;n=(r&~(1<<32-vt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ys++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=o_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},d_={readContext:lt,useCallback:ay,useContext:lt,useEffect:id,useImperativeHandle:oy,useInsertionEffect:ry,useLayoutEffect:sy,useMemo:ly,useReducer:ml,useRef:ny,useState:function(){return ml(Qs)},useDebugValue:od,useDeferredValue:function(t){var e=ut();return uy(e,ge.memoizedState,t)},useTransition:function(){var t=ml(Qs)[0],e=ut().memoizedState;return[t,e]},useMutableSource:Jg,useSyncExternalStore:Yg,useId:cy,unstable_isNewReconciler:!1},h_={readContext:lt,useCallback:ay,useContext:lt,useEffect:id,useImperativeHandle:oy,useInsertionEffect:ry,useLayoutEffect:sy,useMemo:ly,useReducer:gl,useRef:ny,useState:function(){return gl(Qs)},useDebugValue:od,useDeferredValue:function(t){var e=ut();return ge===null?e.memoizedState=t:uy(e,ge.memoizedState,t)},useTransition:function(){var t=gl(Qs)[0],e=ut().memoizedState;return[t,e]},useMutableSource:Jg,useSyncExternalStore:Yg,useId:cy,unstable_isNewReconciler:!1};function ft(t,e){if(t&&t.defaultProps){e=le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ju(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ba={isMounted:function(t){return(t=t._reactInternals)?Xn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Le(),s=cn(t),i=It(r,s);i.payload=e,n!=null&&(i.callback=n),e=ln(t,i,s),e!==null&&(xt(e,t,s,r),lo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Le(),s=cn(t),i=It(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ln(t,i,s),e!==null&&(xt(e,t,s,r),lo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Le(),r=cn(t),s=It(n,r);s.tag=2,e!=null&&(s.callback=e),e=ln(t,s,r),e!==null&&(xt(e,t,r,n),lo(e,t,r))}};function nf(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!zs(n,r)||!zs(s,i):!0}function py(t,e,n){var r=!1,s=pn,i=e.contextType;return typeof i=="object"&&i!==null?i=lt(i):(s=We(e)?Kn:Oe.current,r=e.contextTypes,i=(r=r!=null)?$r(t,s):pn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ba,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function rf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ba.enqueueReplaceState(e,e.state,null)}function Eu(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Xc(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=lt(i):(i=We(e)?Kn:Oe.current,s.context=$r(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ju(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ba.enqueueReplaceState(s,s.state,null),Uo(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Fr(t,e){try{var n="",r=e;do n+=Vw(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function yl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var f_=typeof WeakMap=="function"?WeakMap:Map;function my(t,e,n){n=It(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zo||(zo=!0,Lu=r),Nu(t,e)},n}function gy(t,e,n){n=It(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Nu(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Nu(t,e),typeof r!="function"&&(un===null?un=new Set([this]):un.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new f_;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=k_.bind(null,t,e,n),e.then(t,t))}function of(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function af(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=It(-1,1),e.tag=2,ln(n,e,1))),n.lanes|=1),t)}var p_=Bt.ReactCurrentOwner,Ge=!1;function Ie(t,e,n,r){e.child=t===null?Wg(e,null,n,r):Ur(e,t.child,n,r)}function lf(t,e,n,r,s){n=n.render;var i=e.ref;return Ar(e,s),r=rd(t,e,n,r,i,s),n=sd(),t!==null&&!Ge?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vt(t,e,s)):(re&&n&&Wc(e),e.flags|=1,Ie(t,e,r,s),e.child)}function uf(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!pd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,yy(t,e,i,r,s)):(t=mo(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:zs,n(o,r)&&t.ref===e.ref)return Vt(t,e,s)}return e.flags|=1,t=dn(i,r),t.ref=e.ref,t.return=e,e.child=t}function yy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(zs(i,r)&&t.ref===e.ref)if(Ge=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ge=!0);else return e.lanes=t.lanes,Vt(t,e,s)}return ku(t,e,n,r,s)}function vy(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(br,He),He|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Y(br,He),He|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Y(br,He),He|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Y(br,He),He|=r;return Ie(t,e,s,n),e.child}function xy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ku(t,e,n,r,s){var i=We(n)?Kn:Oe.current;return i=$r(e,i),Ar(e,s),n=rd(t,e,n,r,i,s),r=sd(),t!==null&&!Ge?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vt(t,e,s)):(re&&r&&Wc(e),e.flags|=1,Ie(t,e,n,s),e.child)}function cf(t,e,n,r,s){if(We(n)){var i=!0;Io(e)}else i=!1;if(Ar(e,s),e.stateNode===null)ho(t,e),py(e,n,r),Eu(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=lt(c):(c=We(n)?Kn:Oe.current,c=$r(e,c));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&rf(e,o,r,c),Jt=!1;var f=e.memoizedState;o.state=f,Uo(e,r,o,s),l=e.memoizedState,a!==r||f!==l||ze.current||Jt?(typeof d=="function"&&(ju(e,n,d,r),l=e.memoizedState),(a=Jt||nf(e,n,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Hg(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ft(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=lt(l):(l=We(n)?Kn:Oe.current,l=$r(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&rf(e,o,r,l),Jt=!1,f=e.memoizedState,o.state=f,Uo(e,r,o,s);var g=e.memoizedState;a!==h||f!==g||ze.current||Jt?(typeof p=="function"&&(ju(e,n,p,r),g=e.memoizedState),(c=Jt||nf(e,n,c,r,f,g,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Tu(t,e,n,r,i,s)}function Tu(t,e,n,r,s,i){xy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&qh(e,n,!1),Vt(t,e,i);r=e.stateNode,p_.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ur(e,t.child,null,i),e.child=Ur(e,null,a,i)):Ie(t,e,a,i),e.memoizedState=r.state,s&&qh(e,n,!0),e.child}function wy(t){var e=t.stateNode;e.pendingContext?Hh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hh(t,e.context,!1),Zc(t,e.containerInfo)}function df(t,e,n,r,s){return Mr(),Hc(s),e.flags|=256,Ie(t,e,n,r),e.child}var Cu={dehydrated:null,treeContext:null,retryLane:0};function Pu(t){return{baseLanes:t,cachePool:null,transitions:null}}function by(t,e,n){var r=e.pendingProps,s=se.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Y(se,s&1),t===null)return _u(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ja(o,r,0,null),t=zn(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Pu(n),e.memoizedState=Cu,t):ad(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return m_(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=dn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=dn(a,i):(i=zn(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Pu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Cu,r}return i=t.child,t=i.sibling,r=dn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ad(t,e){return e=ja({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Li(t,e,n,r){return r!==null&&Hc(r),Ur(e,t.child,null,n),t=ad(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function m_(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=yl(Error(T(422))),Li(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ja({mode:"visible",children:r.children},s,0,null),i=zn(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ur(e,t.child,null,o),e.child.memoizedState=Pu(o),e.memoizedState=Cu,i);if(!(e.mode&1))return Li(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(T(419)),r=yl(i,r,void 0),Li(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ge||a){if(r=we,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ut(t,s),xt(r,t,s,-1))}return fd(),r=yl(Error(T(421))),Li(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=T_.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Je=an(s.nextSibling),Ye=e,re=!0,yt=null,t!==null&&(st[it++]=Rt,st[it++]=Ot,st[it++]=Hn,Rt=t.id,Ot=t.overflow,Hn=e),e=ad(e,r.children),e.flags|=4096,e)}function hf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Su(t.return,e,n)}function vl(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function _y(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ie(t,e,r.children,n),r=se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hf(t,n,e);else if(t.tag===19)hf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Y(se,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Vo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),vl(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Vo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}vl(e,!0,n,null,i);break;case"together":vl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ho(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,n=dn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=dn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function g_(t,e,n){switch(e.tag){case 3:wy(e),Mr();break;case 5:qg(e);break;case 1:We(e.type)&&Io(e);break;case 4:Zc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Y($o,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Y(se,se.current&1),e.flags|=128,null):n&e.child.childLanes?by(t,e,n):(Y(se,se.current&1),t=Vt(t,e,n),t!==null?t.sibling:null);Y(se,se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _y(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Y(se,se.current),r)break;return null;case 22:case 23:return e.lanes=0,vy(t,e,n)}return Vt(t,e,n)}var Sy,Au,jy,Ey;Sy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Au=function(){};jy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Vn(Nt.current);var i=null;switch(n){case"input":s=Zl(t,s),r=Zl(t,r),i=[];break;case"select":s=le({},s,{value:void 0}),r=le({},r,{value:void 0}),i=[];break;case"textarea":s=nu(t,s),r=nu(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ro)}su(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($s.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($s.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Q("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Ey=function(t,e,n,r){n!==r&&(e.flags|=4)};function ds(t,e){if(!re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Te(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function y_(t,e,n){var r=e.pendingProps;switch(Kc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(e),null;case 1:return We(e.type)&&Oo(),Te(e),null;case 3:return r=e.stateNode,Vr(),X(ze),X(Oe),td(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ii(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yt!==null&&(Uu(yt),yt=null))),Au(t,e),Te(e),null;case 5:ed(e);var s=Vn(Js.current);if(n=e.type,t!==null&&e.stateNode!=null)jy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(T(166));return Te(e),null}if(t=Vn(Nt.current),Ii(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[jt]=e,r[Hs]=i,t=(e.mode&1)!==0,n){case"dialog":Q("cancel",r),Q("close",r);break;case"iframe":case"object":case"embed":Q("load",r);break;case"video":case"audio":for(s=0;s<ys.length;s++)Q(ys[s],r);break;case"source":Q("error",r);break;case"img":case"image":case"link":Q("error",r),Q("load",r);break;case"details":Q("toggle",r);break;case"input":wh(r,i),Q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Q("invalid",r);break;case"textarea":_h(r,i),Q("invalid",r)}su(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Oi(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Oi(r.textContent,a,t),s=["children",""+a]):$s.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Q("scroll",r)}switch(n){case"input":Ei(r),bh(r,i,!0);break;case"textarea":Ei(r),Sh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ro)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[jt]=e,t[Hs]=r,Sy(t,e,!1,!1),e.stateNode=t;e:{switch(o=iu(n,r),n){case"dialog":Q("cancel",t),Q("close",t),s=r;break;case"iframe":case"object":case"embed":Q("load",t),s=r;break;case"video":case"audio":for(s=0;s<ys.length;s++)Q(ys[s],t);s=r;break;case"source":Q("error",t),s=r;break;case"img":case"image":case"link":Q("error",t),Q("load",t),s=r;break;case"details":Q("toggle",t),s=r;break;case"input":wh(t,r),s=Zl(t,r),Q("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=le({},r,{value:void 0}),Q("invalid",t);break;case"textarea":_h(t,r),s=nu(t,r),Q("invalid",t);break;default:s=r}su(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?ng(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&eg(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ms(t,l):typeof l=="number"&&Ms(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($s.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Q("scroll",t):l!=null&&Ac(t,i,l,o))}switch(n){case"input":Ei(t),bh(t,r,!1);break;case"textarea":Ei(t),Sh(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?kr(t,!!r.multiple,i,!1):r.defaultValue!=null&&kr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ro)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Te(e),null;case 6:if(t&&e.stateNode!=null)Ey(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(T(166));if(n=Vn(Js.current),Vn(Nt.current),Ii(e)){if(r=e.stateNode,n=e.memoizedProps,r[jt]=e,(i=r.nodeValue!==n)&&(t=Ye,t!==null))switch(t.tag){case 3:Oi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Oi(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jt]=e,e.stateNode=r}return Te(e),null;case 13:if(X(se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(re&&Je!==null&&e.mode&1&&!(e.flags&128))Gg(),Mr(),e.flags|=98560,i=!1;else if(i=Ii(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(T(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(T(317));i[jt]=e}else Mr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Te(e),i=!1}else yt!==null&&(Uu(yt),yt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||se.current&1?ye===0&&(ye=3):fd())),e.updateQueue!==null&&(e.flags|=4),Te(e),null);case 4:return Vr(),Au(t,e),t===null&&Ws(e.stateNode.containerInfo),Te(e),null;case 10:return Yc(e.type._context),Te(e),null;case 17:return We(e.type)&&Oo(),Te(e),null;case 19:if(X(se),i=e.memoizedState,i===null)return Te(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ds(i,!1);else{if(ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vo(t),o!==null){for(e.flags|=128,ds(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Y(se,se.current&1|2),e.child}t=t.sibling}i.tail!==null&&he()>Br&&(e.flags|=128,r=!0,ds(i,!1),e.lanes=4194304)}else{if(!r)if(t=Vo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ds(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!re)return Te(e),null}else 2*he()-i.renderingStartTime>Br&&n!==1073741824&&(e.flags|=128,r=!0,ds(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=he(),e.sibling=null,n=se.current,Y(se,r?n&1|2:n&1),e):(Te(e),null);case 22:case 23:return hd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?He&1073741824&&(Te(e),e.subtreeFlags&6&&(e.flags|=8192)):Te(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function v_(t,e){switch(Kc(e),e.tag){case 1:return We(e.type)&&Oo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vr(),X(ze),X(Oe),td(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ed(e),null;case 13:if(X(se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));Mr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return X(se),null;case 4:return Vr(),null;case 10:return Yc(e.type._context),null;case 22:case 23:return hd(),null;case 24:return null;default:return null}}var $i=!1,Pe=!1,x_=typeof WeakSet=="function"?WeakSet:Set,A=null;function wr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ce(t,e,r)}else n.current=null}function Ru(t,e,n){try{n()}catch(r){ce(t,e,r)}}var ff=!1;function w_(t,e){if(mu=Co,t=Pg(),zc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++d===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(gu={focusedElem:t,selectionRange:n},Co=!1,A=e;A!==null;)if(e=A,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,A=t;else for(;A!==null;){e=A;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,b=g.memoizedState,m=e.stateNode,x=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:ft(e.type,v),b);m.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(_){ce(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,A=t;break}A=e.return}return g=ff,ff=!1,g}function Cs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ru(e,n,i)}s=s.next}while(s!==r)}}function _a(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ou(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ny(t){var e=t.alternate;e!==null&&(t.alternate=null,Ny(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[jt],delete e[Hs],delete e[xu],delete e[n_],delete e[r_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ky(t){return t.tag===5||t.tag===3||t.tag===4}function pf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ky(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Iu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ro));else if(r!==4&&(t=t.child,t!==null))for(Iu(t,e,n),t=t.sibling;t!==null;)Iu(t,e,n),t=t.sibling}function Du(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Du(t,e,n),t=t.sibling;t!==null;)Du(t,e,n),t=t.sibling}var Se=null,mt=!1;function Kt(t,e,n){for(n=n.child;n!==null;)Ty(t,e,n),n=n.sibling}function Ty(t,e,n){if(Et&&typeof Et.onCommitFiberUnmount=="function")try{Et.onCommitFiberUnmount(pa,n)}catch{}switch(n.tag){case 5:Pe||wr(n,e);case 6:var r=Se,s=mt;Se=null,Kt(t,e,n),Se=r,mt=s,Se!==null&&(mt?(t=Se,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Se.removeChild(n.stateNode));break;case 18:Se!==null&&(mt?(t=Se,n=n.stateNode,t.nodeType===8?dl(t.parentNode,n):t.nodeType===1&&dl(t,n),Bs(t)):dl(Se,n.stateNode));break;case 4:r=Se,s=mt,Se=n.stateNode.containerInfo,mt=!0,Kt(t,e,n),Se=r,mt=s;break;case 0:case 11:case 14:case 15:if(!Pe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ru(n,e,o),s=s.next}while(s!==r)}Kt(t,e,n);break;case 1:if(!Pe&&(wr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ce(n,e,a)}Kt(t,e,n);break;case 21:Kt(t,e,n);break;case 22:n.mode&1?(Pe=(r=Pe)||n.memoizedState!==null,Kt(t,e,n),Pe=r):Kt(t,e,n);break;default:Kt(t,e,n)}}function mf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new x_),e.forEach(function(r){var s=C_.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ct(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Se=a.stateNode,mt=!1;break e;case 3:Se=a.stateNode.containerInfo,mt=!0;break e;case 4:Se=a.stateNode.containerInfo,mt=!0;break e}a=a.return}if(Se===null)throw Error(T(160));Ty(i,o,s),Se=null,mt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){ce(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Cy(e,t),e=e.sibling}function Cy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ct(e,t),bt(t),r&4){try{Cs(3,t,t.return),_a(3,t)}catch(v){ce(t,t.return,v)}try{Cs(5,t,t.return)}catch(v){ce(t,t.return,v)}}break;case 1:ct(e,t),bt(t),r&512&&n!==null&&wr(n,n.return);break;case 5:if(ct(e,t),bt(t),r&512&&n!==null&&wr(n,n.return),t.flags&32){var s=t.stateNode;try{Ms(s,"")}catch(v){ce(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Qm(s,i),iu(a,o);var c=iu(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?ng(s,h):d==="dangerouslySetInnerHTML"?eg(s,h):d==="children"?Ms(s,h):Ac(s,d,h,c)}switch(a){case"input":eu(s,i);break;case"textarea":Xm(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?kr(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?kr(s,!!i.multiple,i.defaultValue,!0):kr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Hs]=i}catch(v){ce(t,t.return,v)}}break;case 6:if(ct(e,t),bt(t),r&4){if(t.stateNode===null)throw Error(T(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){ce(t,t.return,v)}}break;case 3:if(ct(e,t),bt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bs(e.containerInfo)}catch(v){ce(t,t.return,v)}break;case 4:ct(e,t),bt(t);break;case 13:ct(e,t),bt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(cd=he())),r&4&&mf(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Pe=(c=Pe)||d,ct(e,t),Pe=c):ct(e,t),bt(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(A=t,d=t.child;d!==null;){for(h=A=d;A!==null;){switch(f=A,p=f.child,f.tag){case 0:case 11:case 14:case 15:Cs(4,f,f.return);break;case 1:wr(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){ce(r,n,v)}}break;case 5:wr(f,f.return);break;case 22:if(f.memoizedState!==null){yf(h);continue}}p!==null?(p.return=f,A=p):yf(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=tg("display",o))}catch(v){ce(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){ce(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ct(e,t),bt(t),r&4&&mf(t);break;case 21:break;default:ct(e,t),bt(t)}}function bt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ky(n)){var r=n;break e}n=n.return}throw Error(T(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ms(s,""),r.flags&=-33);var i=pf(t);Du(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=pf(t);Iu(t,a,o);break;default:throw Error(T(161))}}catch(l){ce(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function b_(t,e,n){A=t,Py(t)}function Py(t,e,n){for(var r=(t.mode&1)!==0;A!==null;){var s=A,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||$i;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Pe;a=$i;var c=Pe;if($i=o,(Pe=l)&&!c)for(A=s;A!==null;)o=A,l=o.child,o.tag===22&&o.memoizedState!==null?vf(s):l!==null?(l.return=o,A=l):vf(s);for(;i!==null;)A=i,Py(i),i=i.sibling;A=s,$i=a,Pe=c}gf(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,A=i):gf(t)}}function gf(t){for(;A!==null;){var e=A;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pe||_a(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Pe)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ft(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Zh(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zh(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Bs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Pe||e.flags&512&&Ou(e)}catch(f){ce(e,e.return,f)}}if(e===t){A=null;break}if(n=e.sibling,n!==null){n.return=e.return,A=n;break}A=e.return}}function yf(t){for(;A!==null;){var e=A;if(e===t){A=null;break}var n=e.sibling;if(n!==null){n.return=e.return,A=n;break}A=e.return}}function vf(t){for(;A!==null;){var e=A;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_a(4,e)}catch(l){ce(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){ce(e,s,l)}}var i=e.return;try{Ou(e)}catch(l){ce(e,i,l)}break;case 5:var o=e.return;try{Ou(e)}catch(l){ce(e,o,l)}}}catch(l){ce(e,e.return,l)}if(e===t){A=null;break}var a=e.sibling;if(a!==null){a.return=e.return,A=a;break}A=e.return}}var __=Math.ceil,Go=Bt.ReactCurrentDispatcher,ld=Bt.ReactCurrentOwner,at=Bt.ReactCurrentBatchConfig,H=0,we=null,me=null,Ee=0,He=0,br=vn(0),ye=0,Zs=null,Jn=0,Sa=0,ud=0,Ps=null,Fe=null,cd=0,Br=1/0,Pt=null,zo=!1,Lu=null,un=null,Mi=!1,tn=null,Wo=0,As=0,$u=null,fo=-1,po=0;function Le(){return H&6?he():fo!==-1?fo:fo=he()}function cn(t){return t.mode&1?H&2&&Ee!==0?Ee&-Ee:i_.transition!==null?(po===0&&(po=pg()),po):(t=q,t!==0||(t=window.event,t=t===void 0?16:bg(t.type)),t):1}function xt(t,e,n,r){if(50<As)throw As=0,$u=null,Error(T(185));di(t,n,r),(!(H&2)||t!==we)&&(t===we&&(!(H&2)&&(Sa|=n),ye===4&&Qt(t,Ee)),Ke(t,r),n===1&&H===0&&!(e.mode&1)&&(Br=he()+500,xa&&xn()))}function Ke(t,e){var n=t.callbackNode;ib(t,e);var r=To(t,t===we?Ee:0);if(r===0)n!==null&&Nh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Nh(n),e===1)t.tag===0?s_(xf.bind(null,t)):Vg(xf.bind(null,t)),e_(function(){!(H&6)&&xn()}),n=null;else{switch(mg(r)){case 1:n=Lc;break;case 4:n=hg;break;case 16:n=ko;break;case 536870912:n=fg;break;default:n=ko}n=My(n,Ay.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ay(t,e){if(fo=-1,po=0,H&6)throw Error(T(327));var n=t.callbackNode;if(Rr()&&t.callbackNode!==n)return null;var r=To(t,t===we?Ee:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ko(t,r);else{e=r;var s=H;H|=2;var i=Oy();(we!==t||Ee!==e)&&(Pt=null,Br=he()+500,Gn(t,e));do try{E_();break}catch(a){Ry(t,a)}while(!0);Jc(),Go.current=i,H=s,me!==null?e=0:(we=null,Ee=0,e=ye)}if(e!==0){if(e===2&&(s=cu(t),s!==0&&(r=s,e=Mu(t,s))),e===1)throw n=Zs,Gn(t,0),Qt(t,r),Ke(t,he()),n;if(e===6)Qt(t,r);else{if(s=t.current.alternate,!(r&30)&&!S_(s)&&(e=Ko(t,r),e===2&&(i=cu(t),i!==0&&(r=i,e=Mu(t,i))),e===1))throw n=Zs,Gn(t,0),Qt(t,r),Ke(t,he()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(T(345));case 2:Pn(t,Fe,Pt);break;case 3:if(Qt(t,r),(r&130023424)===r&&(e=cd+500-he(),10<e)){if(To(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Le(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=vu(Pn.bind(null,t,Fe,Pt),e);break}Pn(t,Fe,Pt);break;case 4:if(Qt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=he()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*__(r/1960))-r,10<r){t.timeoutHandle=vu(Pn.bind(null,t,Fe,Pt),r);break}Pn(t,Fe,Pt);break;case 5:Pn(t,Fe,Pt);break;default:throw Error(T(329))}}}return Ke(t,he()),t.callbackNode===n?Ay.bind(null,t):null}function Mu(t,e){var n=Ps;return t.current.memoizedState.isDehydrated&&(Gn(t,e).flags|=256),t=Ko(t,e),t!==2&&(e=Fe,Fe=n,e!==null&&Uu(e)),t}function Uu(t){Fe===null?Fe=t:Fe.push.apply(Fe,t)}function S_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qt(t,e){for(e&=~ud,e&=~Sa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vt(e),r=1<<n;t[n]=-1,e&=~r}}function xf(t){if(H&6)throw Error(T(327));Rr();var e=To(t,0);if(!(e&1))return Ke(t,he()),null;var n=Ko(t,e);if(t.tag!==0&&n===2){var r=cu(t);r!==0&&(e=r,n=Mu(t,r))}if(n===1)throw n=Zs,Gn(t,0),Qt(t,e),Ke(t,he()),n;if(n===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pn(t,Fe,Pt),Ke(t,he()),null}function dd(t,e){var n=H;H|=1;try{return t(e)}finally{H=n,H===0&&(Br=he()+500,xa&&xn())}}function Yn(t){tn!==null&&tn.tag===0&&!(H&6)&&Rr();var e=H;H|=1;var n=at.transition,r=q;try{if(at.transition=null,q=1,t)return t()}finally{q=r,at.transition=n,H=e,!(H&6)&&xn()}}function hd(){He=br.current,X(br)}function Gn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Zb(n)),me!==null)for(n=me.return;n!==null;){var r=n;switch(Kc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Oo();break;case 3:Vr(),X(ze),X(Oe),td();break;case 5:ed(r);break;case 4:Vr();break;case 13:X(se);break;case 19:X(se);break;case 10:Yc(r.type._context);break;case 22:case 23:hd()}n=n.return}if(we=t,me=t=dn(t.current,null),Ee=He=e,ye=0,Zs=null,ud=Sa=Jn=0,Fe=Ps=null,Un!==null){for(e=0;e<Un.length;e++)if(n=Un[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Un=null}return t}function Ry(t,e){do{var n=me;try{if(Jc(),uo.current=Bo,Fo){for(var r=oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Fo=!1}if(qn=0,xe=ge=oe=null,Ts=!1,Ys=0,ld.current=null,n===null||n.return===null){ye=1,Zs=e,me=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Ee,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=of(o);if(p!==null){p.flags&=-257,af(p,o,a,i,e),p.mode&1&&sf(i,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){sf(i,c,e),fd();break e}l=Error(T(426))}}else if(re&&a.mode&1){var b=of(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),af(b,o,a,i,e),Hc(Fr(l,a));break e}}i=l=Fr(l,a),ye!==4&&(ye=2),Ps===null?Ps=[i]:Ps.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=my(i,l,e);Xh(i,m);break e;case 1:a=l;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(un===null||!un.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=gy(i,a,e);Xh(i,_);break e}}i=i.return}while(i!==null)}Dy(n)}catch(j){e=j,me===n&&n!==null&&(me=n=n.return);continue}break}while(!0)}function Oy(){var t=Go.current;return Go.current=Bo,t===null?Bo:t}function fd(){(ye===0||ye===3||ye===2)&&(ye=4),we===null||!(Jn&268435455)&&!(Sa&268435455)||Qt(we,Ee)}function Ko(t,e){var n=H;H|=2;var r=Oy();(we!==t||Ee!==e)&&(Pt=null,Gn(t,e));do try{j_();break}catch(s){Ry(t,s)}while(!0);if(Jc(),H=n,Go.current=r,me!==null)throw Error(T(261));return we=null,Ee=0,ye}function j_(){for(;me!==null;)Iy(me)}function E_(){for(;me!==null&&!Yw();)Iy(me)}function Iy(t){var e=$y(t.alternate,t,He);t.memoizedProps=t.pendingProps,e===null?Dy(t):me=e,ld.current=null}function Dy(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=v_(n,e),n!==null){n.flags&=32767,me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ye=6,me=null;return}}else if(n=y_(n,e,He),n!==null){me=n;return}if(e=e.sibling,e!==null){me=e;return}me=e=t}while(e!==null);ye===0&&(ye=5)}function Pn(t,e,n){var r=q,s=at.transition;try{at.transition=null,q=1,N_(t,e,n,r)}finally{at.transition=s,q=r}return null}function N_(t,e,n,r){do Rr();while(tn!==null);if(H&6)throw Error(T(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ob(t,i),t===we&&(me=we=null,Ee=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mi||(Mi=!0,My(ko,function(){return Rr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=at.transition,at.transition=null;var o=q;q=1;var a=H;H|=4,ld.current=null,w_(t,n),Cy(n,t),Kb(gu),Co=!!mu,gu=mu=null,t.current=n,b_(n),Qw(),H=a,q=o,at.transition=i}else t.current=n;if(Mi&&(Mi=!1,tn=t,Wo=s),i=t.pendingLanes,i===0&&(un=null),eb(n.stateNode),Ke(t,he()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(zo)throw zo=!1,t=Lu,Lu=null,t;return Wo&1&&t.tag!==0&&Rr(),i=t.pendingLanes,i&1?t===$u?As++:(As=0,$u=t):As=0,xn(),null}function Rr(){if(tn!==null){var t=mg(Wo),e=at.transition,n=q;try{if(at.transition=null,q=16>t?16:t,tn===null)var r=!1;else{if(t=tn,tn=null,Wo=0,H&6)throw Error(T(331));var s=H;for(H|=4,A=t.current;A!==null;){var i=A,o=i.child;if(A.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(A=c;A!==null;){var d=A;switch(d.tag){case 0:case 11:case 15:Cs(8,d,i)}var h=d.child;if(h!==null)h.return=d,A=h;else for(;A!==null;){d=A;var f=d.sibling,p=d.return;if(Ny(d),d===c){A=null;break}if(f!==null){f.return=p,A=f;break}A=p}}}var g=i.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}A=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,A=o;else e:for(;A!==null;){if(i=A,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Cs(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,A=m;break e}A=i.return}}var x=t.current;for(A=x;A!==null;){o=A;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,A=w;else e:for(o=x;A!==null;){if(a=A,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_a(9,a)}}catch(j){ce(a,a.return,j)}if(a===o){A=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,A=_;break e}A=a.return}}if(H=s,xn(),Et&&typeof Et.onPostCommitFiberRoot=="function")try{Et.onPostCommitFiberRoot(pa,t)}catch{}r=!0}return r}finally{q=n,at.transition=e}}return!1}function wf(t,e,n){e=Fr(n,e),e=my(t,e,1),t=ln(t,e,1),e=Le(),t!==null&&(di(t,1,e),Ke(t,e))}function ce(t,e,n){if(t.tag===3)wf(t,t,n);else for(;e!==null;){if(e.tag===3){wf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(un===null||!un.has(r))){t=Fr(n,t),t=gy(e,t,1),e=ln(e,t,1),t=Le(),e!==null&&(di(e,1,t),Ke(e,t));break}}e=e.return}}function k_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Le(),t.pingedLanes|=t.suspendedLanes&n,we===t&&(Ee&n)===n&&(ye===4||ye===3&&(Ee&130023424)===Ee&&500>he()-cd?Gn(t,0):ud|=n),Ke(t,e)}function Ly(t,e){e===0&&(t.mode&1?(e=Ti,Ti<<=1,!(Ti&130023424)&&(Ti=4194304)):e=1);var n=Le();t=Ut(t,e),t!==null&&(di(t,e,n),Ke(t,n))}function T_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ly(t,n)}function C_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(T(314))}r!==null&&r.delete(e),Ly(t,n)}var $y;$y=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ze.current)Ge=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ge=!1,g_(t,e,n);Ge=!!(t.flags&131072)}else Ge=!1,re&&e.flags&1048576&&Fg(e,Lo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ho(t,e),t=e.pendingProps;var s=$r(e,Oe.current);Ar(e,n),s=rd(null,e,r,t,s,n);var i=sd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,We(r)?(i=!0,Io(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xc(e),s.updater=ba,e.stateNode=s,s._reactInternals=e,Eu(e,r,t,n),e=Tu(null,e,r,!0,i,n)):(e.tag=0,re&&i&&Wc(e),Ie(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ho(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=A_(r),t=ft(r,t),s){case 0:e=ku(null,e,r,t,n);break e;case 1:e=cf(null,e,r,t,n);break e;case 11:e=lf(null,e,r,t,n);break e;case 14:e=uf(null,e,r,ft(r.type,t),n);break e}throw Error(T(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ft(r,s),ku(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ft(r,s),cf(t,e,r,s,n);case 3:e:{if(wy(e),t===null)throw Error(T(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Hg(t,e),Uo(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Fr(Error(T(423)),e),e=df(t,e,r,n,s);break e}else if(r!==s){s=Fr(Error(T(424)),e),e=df(t,e,r,n,s);break e}else for(Je=an(e.stateNode.containerInfo.firstChild),Ye=e,re=!0,yt=null,n=Wg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mr(),r===s){e=Vt(t,e,n);break e}Ie(t,e,r,n)}e=e.child}return e;case 5:return qg(e),t===null&&_u(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,yu(r,s)?o=null:i!==null&&yu(r,i)&&(e.flags|=32),xy(t,e),Ie(t,e,o,n),e.child;case 6:return t===null&&_u(e),null;case 13:return by(t,e,n);case 4:return Zc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ur(e,null,r,n):Ie(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ft(r,s),lf(t,e,r,s,n);case 7:return Ie(t,e,e.pendingProps,n),e.child;case 8:return Ie(t,e,e.pendingProps.children,n),e.child;case 12:return Ie(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Y($o,r._currentValue),r._currentValue=o,i!==null)if(wt(i.value,o)){if(i.children===s.children&&!ze.current){e=Vt(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=It(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Su(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(T(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Su(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ie(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ar(e,n),s=lt(s),r=r(s),e.flags|=1,Ie(t,e,r,n),e.child;case 14:return r=e.type,s=ft(r,e.pendingProps),s=ft(r.type,s),uf(t,e,r,s,n);case 15:return yy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ft(r,s),ho(t,e),e.tag=1,We(r)?(t=!0,Io(e)):t=!1,Ar(e,n),py(e,r,s),Eu(e,r,s,n),Tu(null,e,r,!0,t,n);case 19:return _y(t,e,n);case 22:return vy(t,e,n)}throw Error(T(156,e.tag))};function My(t,e){return dg(t,e)}function P_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ot(t,e,n,r){return new P_(t,e,n,r)}function pd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function A_(t){if(typeof t=="function")return pd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Oc)return 11;if(t===Ic)return 14}return 2}function dn(t,e){var n=t.alternate;return n===null?(n=ot(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mo(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")pd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case dr:return zn(n.children,s,i,e);case Rc:o=8,s|=8;break;case Jl:return t=ot(12,n,e,s|2),t.elementType=Jl,t.lanes=i,t;case Yl:return t=ot(13,n,e,s),t.elementType=Yl,t.lanes=i,t;case Ql:return t=ot(19,n,e,s),t.elementType=Ql,t.lanes=i,t;case qm:return ja(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Km:o=10;break e;case Hm:o=9;break e;case Oc:o=11;break e;case Ic:o=14;break e;case qt:o=16,r=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=ot(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function zn(t,e,n,r){return t=ot(7,t,r,e),t.lanes=n,t}function ja(t,e,n,r){return t=ot(22,t,r,e),t.elementType=qm,t.lanes=n,t.stateNode={isHidden:!1},t}function xl(t,e,n){return t=ot(6,t,null,e),t.lanes=n,t}function wl(t,e,n){return e=ot(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function R_(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=el(0),this.expirationTimes=el(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=el(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function md(t,e,n,r,s,i,o,a,l){return t=new R_(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ot(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xc(i),t}function O_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Uy(t){if(!t)return pn;t=t._reactInternals;e:{if(Xn(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(We(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var n=t.type;if(We(n))return Ug(t,n,e)}return e}function Vy(t,e,n,r,s,i,o,a,l){return t=md(n,r,!0,t,s,i,o,a,l),t.context=Uy(null),n=t.current,r=Le(),s=cn(n),i=It(r,s),i.callback=e??null,ln(n,i,s),t.current.lanes=s,di(t,s,r),Ke(t,r),t}function Ea(t,e,n,r){var s=e.current,i=Le(),o=cn(s);return n=Uy(n),e.context===null?e.context=n:e.pendingContext=n,e=It(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ln(s,e,o),t!==null&&(xt(t,s,o,i),lo(t,s,o)),o}function Ho(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gd(t,e){bf(t,e),(t=t.alternate)&&bf(t,e)}function I_(){return null}var Fy=typeof reportError=="function"?reportError:function(t){console.error(t)};function yd(t){this._internalRoot=t}Na.prototype.render=yd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));Ea(t,e,null,null)};Na.prototype.unmount=yd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yn(function(){Ea(null,t,null,null)}),e[Mt]=null}};function Na(t){this._internalRoot=t}Na.prototype.unstable_scheduleHydration=function(t){if(t){var e=vg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yt.length&&e!==0&&e<Yt[n].priority;n++);Yt.splice(n,0,t),n===0&&wg(t)}};function vd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ka(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _f(){}function D_(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Ho(o);i.call(c)}}var o=Vy(e,r,t,0,null,!1,!1,"",_f);return t._reactRootContainer=o,t[Mt]=o.current,Ws(t.nodeType===8?t.parentNode:t),Yn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Ho(l);a.call(c)}}var l=md(t,0,!1,null,null,!1,!1,"",_f);return t._reactRootContainer=l,t[Mt]=l.current,Ws(t.nodeType===8?t.parentNode:t),Yn(function(){Ea(e,l,n,r)}),l}function Ta(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Ho(o);a.call(l)}}Ea(e,o,t,s)}else o=D_(n,e,t,s,r);return Ho(o)}gg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gs(e.pendingLanes);n!==0&&($c(e,n|1),Ke(e,he()),!(H&6)&&(Br=he()+500,xn()))}break;case 13:Yn(function(){var r=Ut(t,1);if(r!==null){var s=Le();xt(r,t,1,s)}}),gd(t,1)}};Mc=function(t){if(t.tag===13){var e=Ut(t,134217728);if(e!==null){var n=Le();xt(e,t,134217728,n)}gd(t,134217728)}};yg=function(t){if(t.tag===13){var e=cn(t),n=Ut(t,e);if(n!==null){var r=Le();xt(n,t,e,r)}gd(t,e)}};vg=function(){return q};xg=function(t,e){var n=q;try{return q=t,e()}finally{q=n}};au=function(t,e,n){switch(e){case"input":if(eu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=va(r);if(!s)throw Error(T(90));Ym(r),eu(r,s)}}}break;case"textarea":Xm(t,n);break;case"select":e=n.value,e!=null&&kr(t,!!n.multiple,e,!1)}};ig=dd;og=Yn;var L_={usingClientEntryPoint:!1,Events:[fi,mr,va,rg,sg,dd]},hs={findFiberByHostInstance:Mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$_={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ug(t),t===null?null:t.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||I_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ui=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ui.isDisabled&&Ui.supportsFiber)try{pa=Ui.inject($_),Et=Ui}catch{}}et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L_;et.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vd(e))throw Error(T(200));return O_(t,e,null,n)};et.createRoot=function(t,e){if(!vd(t))throw Error(T(299));var n=!1,r="",s=Fy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=md(t,1,!1,null,null,n,!1,r,s),t[Mt]=e.current,Ws(t.nodeType===8?t.parentNode:t),new yd(e)};et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=ug(e),t=t===null?null:t.stateNode,t};et.flushSync=function(t){return Yn(t)};et.hydrate=function(t,e,n){if(!ka(e))throw Error(T(200));return Ta(null,t,e,!0,n)};et.hydrateRoot=function(t,e,n){if(!vd(t))throw Error(T(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Fy;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Vy(e,null,t,1,n??null,s,!1,i,o),t[Mt]=e.current,Ws(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Na(e)};et.render=function(t,e,n){if(!ka(e))throw Error(T(200));return Ta(null,t,e,!1,n)};et.unmountComponentAtNode=function(t){if(!ka(t))throw Error(T(40));return t._reactRootContainer?(Yn(function(){Ta(null,null,t,!1,function(){t._reactRootContainer=null,t[Mt]=null})}),!0):!1};et.unstable_batchedUpdates=dd;et.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ka(n))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return Ta(t,e,n,!1,r)};et.version="18.3.1-next-f1338f8080-20240426";function By(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(By)}catch(t){console.error(t)}}By(),Bm.exports=et;var M_=Bm.exports,Sf=M_;Hl.createRoot=Sf.createRoot,Hl.hydrateRoot=Sf.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ei(){return ei=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ei.apply(this,arguments)}var nn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(nn||(nn={}));const jf="popstate";function U_(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Vu("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:qo(s)}return F_(e,n,null,t)}function ae(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function V_(){return Math.random().toString(36).substr(2,8)}function Ef(t,e){return{usr:t.state,key:t.key,idx:e}}function Vu(t,e,n,r){return n===void 0&&(n=null),ei({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xr(e):e,{state:n,key:e&&e.key||r||V_()})}function qo(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function F_(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=nn.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(ei({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=nn.Pop;let b=d(),m=b==null?null:b-c;c=b,l&&l({action:a,location:v.location,delta:m})}function f(b,m){a=nn.Push;let x=Vu(v.location,b,m);c=d()+1;let w=Ef(x,c),_=v.createHref(x);try{o.pushState(w,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(_)}i&&l&&l({action:a,location:v.location,delta:1})}function p(b,m){a=nn.Replace;let x=Vu(v.location,b,m);c=d();let w=Ef(x,c),_=v.createHref(x);o.replaceState(w,"",_),i&&l&&l({action:a,location:v.location,delta:0})}function g(b){let m=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof b=="string"?b:qo(b);return x=x.replace(/ $/,"%20"),ae(m,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,m)}let v={get action(){return a},get location(){return t(s,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(jf,h),l=b,()=>{s.removeEventListener(jf,h),l=null}},createHref(b){return e(s,b)},createURL:g,encodeLocation(b){let m=g(b);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:p,go(b){return o.go(b)}};return v}var Nf;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Nf||(Nf={}));function B_(t,e,n){return n===void 0&&(n="/"),G_(t,e,n)}function G_(t,e,n,r){let s=typeof e=="string"?Xr(e):e,i=Gr(s.pathname||"/",n);if(i==null)return null;let o=Gy(t);z_(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=tS(i);a=Z_(o[l],c)}return a}function Gy(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(ae(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=hn([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(ae(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Gy(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:Q_(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of zy(i.path))s(i,o,l)}),e}function zy(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=zy(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function z_(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:X_(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const W_=/^:[\w-]+$/,K_=3,H_=2,q_=1,J_=10,Y_=-2,kf=t=>t==="*";function Q_(t,e){let n=t.split("/"),r=n.length;return n.some(kf)&&(r+=Y_),e&&(r+=H_),n.filter(s=>!kf(s)).reduce((s,i)=>s+(W_.test(i)?K_:i===""?q_:J_),r)}function X_(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Z_(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=Fu({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:hn([i,h.pathname]),pathnameBase:oS(hn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=hn([i,h.pathnameBase]))}return o}function Fu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=eS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let v=a[h]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[h];return p&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function eS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function tS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Gr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const nS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rS=t=>nS.test(t);function sS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Xr(t):t,i;if(n)if(rS(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),xd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Tf(n.substring(1),"/"):i=Tf(n,e)}else i=e;return{pathname:i,search:aS(r),hash:lS(s)}}function Tf(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function bl(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function iS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wd(t,e){let n=iS(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function bd(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Xr(t):(s=ei({},t),ae(!s.pathname||!s.pathname.includes("?"),bl("?","pathname","search",s)),ae(!s.pathname||!s.pathname.includes("#"),bl("#","pathname","hash",s)),ae(!s.search||!s.search.includes("#"),bl("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=sS(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const hn=t=>t.join("/").replace(/\/\/+/g,"/"),oS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,lS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Wy=["post","put","patch","delete"];new Set(Wy);const cS=["get",...Wy];new Set(cS);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ti(){return ti=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ti.apply(this,arguments)}const Ca=y.createContext(null),Ky=y.createContext(null),Gt=y.createContext(null),Pa=y.createContext(null),Ct=y.createContext({outlet:null,matches:[],isDataRoute:!1}),Hy=y.createContext(null);function dS(t,e){let{relative:n}=e===void 0?{}:e;Zr()||ae(!1);let{basename:r,navigator:s}=y.useContext(Gt),{hash:i,pathname:o,search:a}=Aa(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:hn([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Zr(){return y.useContext(Pa)!=null}function zt(){return Zr()||ae(!1),y.useContext(Pa).location}function qy(t){y.useContext(Gt).static||y.useLayoutEffect(t)}function Ue(){let{isDataRoute:t}=y.useContext(Ct);return t?NS():hS()}function hS(){Zr()||ae(!1);let t=y.useContext(Ca),{basename:e,future:n,navigator:r}=y.useContext(Gt),{matches:s}=y.useContext(Ct),{pathname:i}=zt(),o=JSON.stringify(wd(s,n.v7_relativeSplatPath)),a=y.useRef(!1);return qy(()=>{a.current=!0}),y.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=bd(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:hn([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}const fS=y.createContext(null);function pS(t){let e=y.useContext(Ct).outlet;return e&&y.createElement(fS.Provider,{value:t},e)}function wn(){let{matches:t}=y.useContext(Ct),e=t[t.length-1];return e?e.params:{}}function Aa(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=y.useContext(Gt),{matches:s}=y.useContext(Ct),{pathname:i}=zt(),o=JSON.stringify(wd(s,r.v7_relativeSplatPath));return y.useMemo(()=>bd(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function mS(t,e){return gS(t,e)}function gS(t,e,n,r){Zr()||ae(!1);let{navigator:s}=y.useContext(Gt),{matches:i}=y.useContext(Ct),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=zt(),d;if(e){var h;let b=typeof e=="string"?Xr(e):e;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||ae(!1),d=b}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=B_(t,{pathname:p}),v=bS(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:hn([l,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:hn([l,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&v?y.createElement(Pa.Provider,{value:{location:ti({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:nn.Pop}},v):v}function yS(){let t=ES(),e=uS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:s},n):null,null)}const vS=y.createElement(yS,null);class xS extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?y.createElement(Ct.Provider,{value:this.props.routeContext},y.createElement(Hy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wS(t){let{routeContext:e,match:n,children:r}=t,s=y.useContext(Ca);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(Ct.Provider,{value:e},r)}function bS(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||ae(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=n,g=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,g=!1,v=null,b=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||vS,l&&(c<0&&f===0?(kS("route-fallback"),g=!0,b=null):c===f&&(g=!0,b=h.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),x=()=>{let w;return p?w=v:g?w=b:h.route.Component?w=y.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,y.createElement(wS,{match:h,routeContext:{outlet:d,matches:m,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?y.createElement(xS,{location:n.location,revalidation:n.revalidation,component:v,error:p,children:x(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):x()},null)}var Jy=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Jy||{}),Yy=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Yy||{});function _S(t){let e=y.useContext(Ca);return e||ae(!1),e}function SS(t){let e=y.useContext(Ky);return e||ae(!1),e}function jS(t){let e=y.useContext(Ct);return e||ae(!1),e}function Qy(t){let e=jS(),n=e.matches[e.matches.length-1];return n.route.id||ae(!1),n.route.id}function ES(){var t;let e=y.useContext(Hy),n=SS(),r=Qy();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function NS(){let{router:t}=_S(Jy.UseNavigateStable),e=Qy(Yy.UseNavigateStable),n=y.useRef(!1);return qy(()=>{n.current=!0}),y.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ti({fromRouteId:e},i)))},[t,e])}const Cf={};function kS(t,e,n){Cf[t]||(Cf[t]=!0)}function TS(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Rs(t){let{to:e,replace:n,state:r,relative:s}=t;Zr()||ae(!1);let{future:i,static:o}=y.useContext(Gt),{matches:a}=y.useContext(Ct),{pathname:l}=zt(),c=Ue(),d=bd(e,wd(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return y.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:s}),[c,h,s,n,r]),null}function _d(t){return pS(t.context)}function W(t){ae(!1)}function CS(t){let{basename:e="/",children:n=null,location:r,navigationType:s=nn.Pop,navigator:i,static:o=!1,future:a}=t;Zr()&&ae(!1);let l=e.replace(/^\/*/,"/"),c=y.useMemo(()=>({basename:l,navigator:i,static:o,future:ti({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Xr(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:g="default"}=r,v=y.useMemo(()=>{let b=Gr(d,l);return b==null?null:{location:{pathname:b,search:h,hash:f,state:p,key:g},navigationType:s}},[l,d,h,f,p,g,s]);return v==null?null:y.createElement(Gt.Provider,{value:c},y.createElement(Pa.Provider,{children:n,value:v}))}function PS(t){let{children:e,location:n}=t;return mS(Bu(e),n)}new Promise(()=>{});function Bu(t,e){e===void 0&&(e=[]);let n=[];return y.Children.forEach(t,(r,s)=>{if(!y.isValidElement(r))return;let i=[...e,s];if(r.type===y.Fragment){n.push.apply(n,Bu(r.props.children,i));return}r.type!==W&&ae(!1),!r.props.index||!r.props.children||ae(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Bu(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jo(){return Jo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jo.apply(this,arguments)}function Xy(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function AS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function RS(t,e){return t.button===0&&(!e||e==="_self")&&!AS(t)}const OS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],DS="6";try{window.__reactRouterVersion=DS}catch{}const LS=y.createContext({isTransitioning:!1}),$S="startTransition",Pf=kw[$S];function MS(t){let{basename:e,children:n,future:r,window:s}=t,i=y.useRef();i.current==null&&(i.current=U_({window:s,v5Compat:!0}));let o=i.current,[a,l]=y.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=y.useCallback(h=>{c&&Pf?Pf(()=>l(h)):l(h)},[l,c]);return y.useLayoutEffect(()=>o.listen(d),[o,d]),y.useEffect(()=>TS(r),[r]),y.createElement(CS,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const US=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=y.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=Xy(e,OS),{basename:p}=y.useContext(Gt),g,v=!1;if(typeof c=="string"&&VS.test(c)&&(g=c,US))try{let w=new URL(window.location.href),_=c.startsWith("//")?new URL(w.protocol+c):new URL(c),j=Gr(_.pathname,p);_.origin===w.origin&&j!=null?c=j+_.search+_.hash:v=!0}catch{}let b=dS(c,{relative:s}),m=BS(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function x(w){r&&r(w),w.defaultPrevented||m(w)}return y.createElement("a",Jo({},f,{href:g||b,onClick:v||i?r:x,ref:n,target:l}))}),ar=y.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,h=Xy(e,IS),f=Aa(l,{relative:h.relative}),p=zt(),g=y.useContext(Ky),{navigator:v,basename:b}=y.useContext(Gt),m=g!=null&&GS(f)&&c===!0,x=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,w=p.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;s||(w=w.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&b&&(_=Gr(_,b)||_);const j=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let S=w===x||!o&&w.startsWith(x)&&w.charAt(j)==="/",N=_!=null&&(_===x||!o&&_.startsWith(x)&&_.charAt(x.length)==="/"),E={isActive:S,isPending:N,isTransitioning:m},C=S?r:void 0,k;typeof i=="function"?k=i(E):k=[i,S?"active":null,N?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(E):a;return y.createElement(De,Jo({},h,{"aria-current":C,className:k,ref:n,style:I,to:l,viewTransition:c}),typeof d=="function"?d(E):d)});var Gu;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gu||(Gu={}));var Af;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Af||(Af={}));function FS(t){let e=y.useContext(Ca);return e||ae(!1),e}function BS(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Ue(),c=zt(),d=Aa(t,{relative:o});return y.useCallback(h=>{if(RS(h,n)){h.preventDefault();let f=r!==void 0?r:qo(c)===qo(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function GS(t,e){e===void 0&&(e={});let n=y.useContext(LS);n==null&&ae(!1);let{basename:r}=FS(Gu.useViewTransitionState),s=Aa(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Gr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Gr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Fu(s.pathname,o)!=null||Fu(s.pathname,i)!=null}var Sd={},Yo={},zu=function(t,e){return zu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},zu(t,e)};function Zy(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");zu(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Qo=function(){return Qo=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Qo.apply(this,arguments)};function es(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ev(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function tv(t,e){return function(n,r){e(n,r,t)}}function nv(t,e,n,r,s,i){function o(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,d=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,f=!1,p=n.length-1;p>=0;p--){var g={};for(var v in r)g[v]=v==="access"?{}:r[v];for(var v in r.access)g.access[v]=r.access[v];g.addInitializer=function(m){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(m||null))};var b=(0,n[p])(a==="accessor"?{get:d.get,set:d.set}:d[l],g);if(a==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(h=o(b.get))&&(d.get=h),(h=o(b.set))&&(d.set=h),(h=o(b.init))&&s.unshift(h)}else(h=o(b))&&(a==="field"?s.unshift(h):d[l]=h)}c&&Object.defineProperty(c,r.name,d),f=!0}function rv(t,e,n){for(var r=arguments.length>2,s=0;s<e.length;s++)n=r?e[s].call(t,n):e[s].call(t);return r?n:void 0}function sv(t){return typeof t=="symbol"?t:"".concat(t)}function iv(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function ov(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function R(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function av(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(d){c=[6,d],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Ra=Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function lv(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ra(e,t,n)}function Xo(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jd(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function uv(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(jd(arguments[e]));return t}function cv(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function dv(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function zr(t){return this instanceof zr?(this.v=t,this):new zr(t)}function hv(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(p){return function(g){return Promise.resolve(g).then(p,h)}}function a(p,g){r[p]&&(s[p]=function(v){return new Promise(function(b,m){i.push([p,v,b,m])>1||l(p,v)})},g&&(s[p]=g(s[p])))}function l(p,g){try{c(r[p](g))}catch(v){f(i[0][3],v)}}function c(p){p.value instanceof zr?Promise.resolve(p.value.v).then(d,h):f(i[0][2],p)}function d(p){l("next",p)}function h(p){l("throw",p)}function f(p,g){p(g),i.shift(),i.length&&l(i[0][0],i[0][1])}}function fv(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:zr(t[s](o)),done:!1}:i?i(o):o}:i}}function pv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Xo=="function"?Xo(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function mv(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var zS=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Wu=function(t){return Wu=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},Wu(t)};function gv(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=Wu(t),r=0;r<n.length;r++)n[r]!=="default"&&Ra(e,t,n[r]);return zS(e,t),e}function yv(t){return t&&t.__esModule?t:{default:t}}function vv(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function xv(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}function wv(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function bv(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var WS=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function _v(t){function e(i){t.error=t.hasError?new WS(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var n,r=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function Sv(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,s,i,o){return r?e?".jsx":".js":s&&(!i||!o)?n:s+i+"."+o.toLowerCase()+"js"}):t}const KS={__extends:Zy,__assign:Qo,__rest:es,__decorate:ev,__param:tv,__esDecorate:nv,__runInitializers:rv,__propKey:sv,__setFunctionName:iv,__metadata:ov,__awaiter:R,__generator:av,__createBinding:Ra,__exportStar:lv,__values:Xo,__read:jd,__spread:uv,__spreadArrays:cv,__spreadArray:dv,__await:zr,__asyncGenerator:hv,__asyncDelegator:fv,__asyncValues:pv,__makeTemplateObject:mv,__importStar:gv,__importDefault:yv,__classPrivateFieldGet:vv,__classPrivateFieldSet:xv,__classPrivateFieldIn:wv,__addDisposableResource:bv,__disposeResources:_v,__rewriteRelativeImportExtension:Sv},HS=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:bv,get __assign(){return Qo},__asyncDelegator:fv,__asyncGenerator:hv,__asyncValues:pv,__await:zr,__awaiter:R,__classPrivateFieldGet:vv,__classPrivateFieldIn:wv,__classPrivateFieldSet:xv,__createBinding:Ra,__decorate:ev,__disposeResources:_v,__esDecorate:nv,__exportStar:lv,__extends:Zy,__generator:av,__importDefault:yv,__importStar:gv,__makeTemplateObject:mv,__metadata:ov,__param:tv,__propKey:sv,__read:jd,__rest:es,__rewriteRelativeImportExtension:Sv,__runInitializers:rv,__setFunctionName:iv,__spread:uv,__spreadArray:dv,__spreadArrays:cv,__values:Xo,default:KS},Symbol.toStringTag,{value:"Module"})),qS=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let Oa=class extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}},jv=class extends Oa{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Ku=class extends Oa{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Hu=class extends Oa{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Zo;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Zo||(Zo={}));class JS{constructor(e,{headers:n={},customFetch:r,region:s=Zo.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=qS(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return R(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:l,body:c,signal:d,timeout:h}=r;let f={},{region:p}=r;p||(p=this.region);const g=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let v;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=c):typeof c=="string"?(f["Content-Type"]="text/plain",v=c):typeof FormData<"u"&&c instanceof FormData?v=c:(f["Content-Type"]="application/json",v=JSON.stringify(c)):v=c;let b=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(b=o.signal,d.addEventListener("abort",()=>o.abort())):b=o.signal);const m=yield this.fetch(g.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:v,signal:b}).catch(j=>{throw new jv(j)}),x=m.headers.get("x-relay-error");if(x&&x==="true")throw new Ku(m);if(!m.ok)throw new Hu(m);let w=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield m.json():w==="application/octet-stream"||w==="application/pdf"?_=yield m.blob():w==="text/event-stream"?_=m:w==="multipart/form-data"?_=yield m.formData():_=yield m.text(),{data:_,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof Hu||a instanceof Ku?a.context:void 0}}finally{i&&clearTimeout(i)}})}}const YS=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Zo},FunctionsClient:JS,FunctionsError:Oa,FunctionsFetchError:jv,FunctionsHttpError:Hu,FunctionsRelayError:Ku},Symbol.toStringTag,{value:"Module"})),Ev=ui(YS);var Ae={};const ts=ui(HS);var Vi={},Fi={},Bi={},Gi={},zi={},Wi={},Rf;function Nv(){if(Rf)return Wi;Rf=1,Object.defineProperty(Wi,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Wi.default=t,Wi}var Of;function kv(){if(Of)return zi;Of=1,Object.defineProperty(zi,"__esModule",{value:!0});const e=ts.__importDefault(Nv());let n=class{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,d,h,f;let p=null,g=null,v=null,b=l.status,m=l.statusText;if(l.ok){if(this.method!=="HEAD"){const j=await l.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?g=j:g=JSON.parse(j))}const w=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(h=l.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&_&&_.length>1&&(v=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(p={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,v=null,b=406,m="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const w=await l.text();try{p=JSON.parse(w),Array.isArray(p)&&l.status===404&&(g=[],p=null,b=200,m="OK")}catch{l.status===404&&w===""?(b=204,m="No Content"):p={message:w}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,b=200,m="OK"),p&&this.shouldThrowOnError)throw new e.default(p)}return{error:p,data:g,count:v,status:b,statusText:m}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,d,h,f,p,g;let v="";const b=l==null?void 0:l.cause;if(b){const m=(c=b==null?void 0:b.message)!==null&&c!==void 0?c:"",x=(d=b==null?void 0:b.code)!==null&&d!==void 0?d:"";v=`${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"FetchError"}: ${l==null?void 0:l.message}`,v+=`

Caused by: ${(f=b==null?void 0:b.name)!==null&&f!==void 0?f:"Error"}: ${m}`,x&&(v+=` (${x})`),b!=null&&b.stack&&(v+=`
${b.stack}`)}else v=(p=l==null?void 0:l.stack)!==null&&p!==void 0?p:"";return{error:{message:`${(g=l==null?void 0:l.name)!==null&&g!==void 0?g:"FetchError"}: ${l==null?void 0:l.message}`,details:v,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(s,i)}returns(){return this}overrideTypes(){return this}};return zi.default=n,zi}var If;function Tv(){if(If)return Gi;If=1,Object.defineProperty(Gi,"__esModule",{value:!0});const e=ts.__importDefault(kv());let n=class extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",d=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${d?`${d},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var d;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};return Gi.default=n,Gi}var Df;function Ed(){if(Df)return Bi;Df=1,Object.defineProperty(Bi,"__esModule",{value:!0});const e=ts.__importDefault(Tv()),n=new RegExp("[,()]");let r=class extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&n.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const d=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${c}fts${d}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}};return Bi.default=r,Bi}var Lf;function Cv(){if(Lf)return Fi;Lf=1,Object.defineProperty(Fi,"__esModule",{value:!0});const e=ts.__importDefault(Ed());let n=class{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(s,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let c=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",d),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const c=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(s,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};return Fi.default=n,Fi}var $f;function QS(){if($f)return Vi;$f=1,Object.defineProperty(Vi,"__esModule",{value:!0});const t=ts,e=t.__importDefault(Cv()),n=t.__importDefault(Ed());let r=class Pv{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new Pv(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:c}={}){var d;let h;const f=new URL(`${this.url}/rpc/${i}`);let p;a||l?(h=a?"HEAD":"GET",Object.entries(o).filter(([v,b])=>b!==void 0).map(([v,b])=>[v,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([v,b])=>{f.searchParams.append(v,b)})):(h="POST",p=o);const g=new Headers(this.headers);return c&&g.set("Prefer",`count=${c}`),new n.default({method:h,url:f,headers:g,schema:this.schemaName,body:p,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};return Vi.default=r,Vi}Object.defineProperty(Ae,"__esModule",{value:!0});Ae.PostgrestError=Ae.PostgrestBuilder=Ae.PostgrestTransformBuilder=Ae.PostgrestFilterBuilder=Ae.PostgrestQueryBuilder=Ae.PostgrestClient=void 0;const ns=ts,Av=ns.__importDefault(QS());Ae.PostgrestClient=Av.default;const Rv=ns.__importDefault(Cv());Ae.PostgrestQueryBuilder=Rv.default;const Ov=ns.__importDefault(Ed());Ae.PostgrestFilterBuilder=Ov.default;const Iv=ns.__importDefault(Tv());Ae.PostgrestTransformBuilder=Iv.default;const Dv=ns.__importDefault(kv());Ae.PostgrestBuilder=Dv.default;const Lv=ns.__importDefault(Nv());Ae.PostgrestError=Lv.default;Ae.default={PostgrestClient:Av.default,PostgrestQueryBuilder:Rv.default,PostgrestFilterBuilder:Ov.default,PostgrestTransformBuilder:Iv.default,PostgrestBuilder:Dv.default,PostgrestError:Lv.default};class $v{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const XS="2.86.2",ZS=`realtime-js/${XS}`,Mv="1.0.0",ej="2.0.0",Mf=Mv,qu=1e4,tj=1e3,nj=100;var Ln;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ln||(Ln={}));var fe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(fe||(fe={}));var gt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gt||(gt={}));var Ju;(function(t){t.websocket="websocket"})(Ju||(Ju={}));var $n;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})($n||($n={}));class rj{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",c=e.payload.event,d=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+h.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let g=new DataView(p),v=0;g.setUint8(v++,this.KINDS.userBroadcastPush),g.setUint8(v++,l.length),g.setUint8(v++,a.length),g.setUint8(v++,o.length),g.setUint8(v++,c.length),g.setUint8(v++,h.length),g.setUint8(v++,n),Array.from(l,m=>g.setUint8(v++,m.charCodeAt(0))),Array.from(a,m=>g.setUint8(v++,m.charCodeAt(0))),Array.from(o,m=>g.setUint8(v++,m.charCodeAt(0))),Array.from(c,m=>g.setUint8(v++,m.charCodeAt(0))),Array.from(h,m=>g.setUint8(v++,m.charCodeAt(0)));var b=new Uint8Array(p.byteLength+r.byteLength);return b.set(new Uint8Array(p),0),b.set(new Uint8Array(r),p.byteLength),b.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,l]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+s));l=l+s;const d=r.decode(e.slice(l,l+i));l=l+i;const h=r.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,g={type:this.BROADCAST_EVENT,event:d,payload:p};return o>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class Uv{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var J;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(J||(J={}));const Uf=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=sj(o,t,e,s),i),{}):{}},sj=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?Vv(i,o):Yu(o)},Vv=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return lj(e,n)}switch(t){case J.bool:return ij(e);case J.float4:case J.float8:case J.int2:case J.int4:case J.int8:case J.numeric:case J.oid:return oj(e);case J.json:case J.jsonb:return aj(e);case J.timestamp:return uj(e);case J.abstime:case J.date:case J.daterange:case J.int4range:case J.int8range:case J.money:case J.reltime:case J.text:case J.time:case J.timestamptz:case J.timetz:case J.tsrange:case J.tstzrange:return Yu(e);default:return Yu(e)}},Yu=t=>t,ij=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},oj=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},aj=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},lj=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Vv(e,a))}return t},uj=t=>typeof t=="string"?t.replace(" ","T"):t,Fv=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class _l{constructor(e,n,r={},s=qu){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Qu||(Qu={}));let Bv=class go{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=go.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=go.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=go.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const h=i[c];if(h){const f=d.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),g=d.filter(b=>p.indexOf(b.presence_ref)<0),v=h.filter(b=>f.indexOf(b.presence_ref)<0);g.length>0&&(a[c]=g),v.length>0&&(l[c]=v)}else a[c]=d}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Xu;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Xu||(Xu={}));var Or;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Or||(Or={}));var St;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(St||(St={}));const cj=fe;let Gv=class zv{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=fe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new _l(this,gt.join,this.params,this.timeout),this.rejoinTimer=new Uv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=fe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=fe.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=fe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gt.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Bv(this),this.broadcastEndpointURL=Fv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==fe.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Or.PRESENCE]&&this.bindings[Or.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(St.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(St.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var g;if(this.socket.setAuth(),p===void 0){e==null||e(St.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(g=v==null?void 0:v.length)!==null&&g!==void 0?g:0,m=[];for(let x=0;x<b;x++){const w=v[x],{filter:{event:_,schema:j,table:S,filter:N}}=w,E=p&&p[x];if(E&&E.event===_&&E.schema===j&&E.table===S&&E.filter===N)m.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),this.state=fe.errored,e==null||e(St.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(St.SUBSCRIBED);return}}).receive("error",p=>{this.state=fe.errored,e==null||e(St.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(St.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===fe.joined&&e===Or.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=fe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new _l(this,gt.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=fe.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new _l(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>nj){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=gt;if(r&&[a,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,v,b;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((b=(v=p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var g,v,b,m,x,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,j=(g=p.filter)===null||g===void 0?void 0:g.event;return _&&((v=n.ids)===null||v===void 0?void 0:v.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(x=(m=p==null?void 0:p.filter)===null||m===void 0?void 0:m.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:v,table:b,commit_timestamp:m,type:x,errors:w}=g;f=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:m,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(g))}p.callback(f,r)})}_isClosed(){return this.state===fe.closed}_isJoined(){return this.state===fe.joined}_isJoining(){return this.state===fe.joining}_isLeaving(){return this.state===fe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&zv.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gt.close,{},e)}_onError(e){this._on(gt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=fe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Uf(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Uf(e.columns,e.old_record)),n}};const Sl=()=>{},Ki={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},dj=[1e3,2e3,5e3,1e4],hj=1e4,fj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let pj=class{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qu,this.transport=null,this.heartbeatIntervalMs=Ki.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sl,this.ref=0,this.reconnectTimer=null,this.vsn=Mf,this.logger=Sl,this.conn=null,this.sendBuffer=[],this.serializer=new rj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Ju.websocket}`,this.httpEndpoint=Fv(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$v.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ln.connecting:return $n.Connecting;case Ln.open:return $n.Open;case Ln.closing:return $n.Closing;default:return $n.Closed}}isConnected(){return this.connectionState()===$n.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Gv(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(tj,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ki.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ln.open||this.conn.readyState===Ln.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([fj],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:ZS};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(gt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Uv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ki.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,c,d,h,f,p;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:qu,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Ki.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Sl,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Mf,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:g=>dj[g-1]||hj,this.vsn){case Mv:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:(g,v)=>v(JSON.stringify(g)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(g,v)=>v(JSON.parse(g));break;case ej:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const mj=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:cj,get REALTIME_LISTEN_TYPES(){return Or},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Xu},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Qu},get REALTIME_SUBSCRIBE_STATES(){return St},RealtimeChannel:Gv,RealtimeClient:pj,RealtimePresence:Bv,WebSocketFactory:$v},Symbol.toStringTag,{value:"Module"})),Wv=ui(mj);class mi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ne(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Kv extends mi{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ea extends mi{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Nd=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),gj=()=>Response,Zu=t=>{if(Array.isArray(t))return t.map(n=>Zu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Zu(r)}),e},yj=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},vj=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),jl=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},xj=(t,e,n)=>R(void 0,void 0,void 0,function*(){const r=yield gj();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new Kv(jl(s),i,o))}).catch(s=>{e(new ea(jl(s),s))}):e(new ea(jl(t),t))}),wj=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(yj(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function gi(t,e,n,r,s,i){return R(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,wj(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>xj(l,a,r))})})}function ni(t,e,n,r){return R(this,void 0,void 0,function*(){return gi(t,"GET",e,n,r)})}function pt(t,e,n,r,s){return R(this,void 0,void 0,function*(){return gi(t,"POST",e,r,s,n)})}function ec(t,e,n,r,s){return R(this,void 0,void 0,function*(){return gi(t,"PUT",e,r,s,n)})}function bj(t,e,n,r){return R(this,void 0,void 0,function*(){return gi(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function kd(t,e,n,r,s){return R(this,void 0,void 0,function*(){return gi(t,"DELETE",e,r,s,n)})}class _j{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return R(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ne(e))return{data:null,error:e};throw e}})}}var Hv;class Sj{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Hv]="BlobDownloadBuilder",this.promise=null}asStream(){return new _j(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return R(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ne(e))return{data:null,error:e};throw e}})}}Hv=Symbol.toStringTag;const jj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ej{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Nd(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return R(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Vf),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),h=yield(e=="PUT"?ec:pt)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ne(i))return{data:null,error:i};throw i}})}upload(e,n,r){return R(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return R(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:Vf.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield ec(this.fetch,a.toString(),l,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ne(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return R(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield pt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new mi("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}update(e,n,r){return R(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return R(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ne(s))return{data:null,error:s};throw s}})}copy(e,n,r){return R(this,void 0,void 0,function*(){try{return{data:{path:(yield pt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ne(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return R(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield pt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ne(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return R(this,void 0,void 0,function*(){try{const s=yield pt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ne(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>ni(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new Sj(l,this.shouldThrowOnError)}info(e){return R(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ni(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Zu(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}exists(e){return R(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield bj(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r)&&r instanceof ea){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return R(this,void 0,void 0,function*(){try{return{data:yield kd(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}list(e,n,r){return R(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},jj),n),{prefix:e||""});return{data:yield pt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ne(s))return{data:null,error:s};throw s}})}listV2(e,n){return R(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield pt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const qv="2.86.2",Jv={"X-Client-Info":`storage-js/${qv}`};class Nj{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Jv),n),this.fetch=Nd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return R(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield ni(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}getBucket(e){return R(this,void 0,void 0,function*(){try{return{data:yield ni(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}createBucket(e){return R(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield pt(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ne(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return R(this,void 0,void 0,function*(){try{return{data:yield ec(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ne(r))return{data:null,error:r};throw r}})}emptyBucket(e){return R(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}deleteBucket(e){return R(this,void 0,void 0,function*(){try{return{data:yield kd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var ri=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function kj(t,e,n){const r=new URL(e,t);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function Tj(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Cj(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const a=kj(t.baseUrl,r,s),l=await Tj(t.auth),c=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),d=await c.text(),h=(c.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!c.ok){const p=h?f:void 0,g=p==null?void 0:p.error;throw new ri((g==null?void 0:g.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function Hi(t){return t.join("")}var Pj=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Hi(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Hi(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hi(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Hi(t.namespace)}`}),!0}catch(e){if(e instanceof ri&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof ri&&n.status===409)return;throw n}}};function rr(t){return t.join("")}var Aj=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${rr(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${rr(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${rr(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${rr(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${rr(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${rr(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof ri&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof ri&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Rj=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Cj({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new Pj(this.client,e),this.tableOps=new Aj(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class Yv{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Jv),n),this.fetch=Nd(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return R(this,void 0,void 0,function*(){try{return{data:yield pt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}listBuckets(e){return R(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield ni(this.fetch,s,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}deleteBucket(e){return R(this,void 0,void 0,function*(){try{return{data:yield kd(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ne(n))return{data:null,error:n};throw n}})}from(e){if(!vj(e))throw new mi("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new Rj({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>R(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Td={"X-Client-Info":`storage-js/${qv}`,"Content-Type":"application/json"};class Cd extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Be(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class yo extends Cd{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qv extends Cd{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var tc;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(tc||(tc={}));const Ia=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Oj=()=>Response,Xv=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Ij=t=>Array.from(new Float32Array(t)),Dj=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},Ff=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Lj=(t,e,n)=>R(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";e(new yo(Ff(o),s,a))}).catch(()=>{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new yo(a,s,o))});else{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new yo(a,s,o))}}else e(new Qv(Ff(t),t))}),$j=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(Xv(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function Mj(t,e,n,r,s,i){return R(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,$j(e,r,s,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Lj(l,a,r))})})}function qe(t,e,n,r,s){return R(this,void 0,void 0,function*(){return Mj(t,"POST",e,r,s,n)})}class Zv{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Td),n),this.fetch=Ia(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return R(this,void 0,void 0,function*(){try{return{data:(yield qe(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}getIndex(e,n){return R(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}listIndexes(e){return R(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return R(this,void 0,void 0,function*(){try{return{data:(yield qe(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Be(r))return{data:null,error:r};throw r}})}}class ex{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Td),n),this.fetch=Ia(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return R(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield qe(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}getVectors(e){return R(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}listVectors(e){return R(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield qe(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}queryVectors(e){return R(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}deleteVectors(e){return R(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield qe(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}}class tx{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Td),n),this.fetch=Ia(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return R(this,void 0,void 0,function*(){try{return{data:(yield qe(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}getBucket(e){return R(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}listBuckets(){return R(this,arguments,void 0,function*(e={}){try{return{data:yield qe(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}deleteBucket(e){return R(this,void 0,void 0,function*(){try{return{data:(yield qe(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Be(n))return{data:null,error:n};throw n}})}}class nx extends tx{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new rx(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return R(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return R(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return R(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return R(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class rx extends Zv{constructor(e,n,r,s){super(e,n,s),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return R(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return R(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return R(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return R(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new sx(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class sx extends ex{constructor(e,n,r,s,i){super(e,n,i),this.vectorBucketName=r,this.indexName=s}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return R(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return R(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return R(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return R(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return R(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Uj extends Nj{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new Ej(this.url,this.headers,e,this.fetch)}get vectors(){return new nx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Yv(this.url+"/iceberg",this.headers,this.fetch)}}const Vj=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:Yv,StorageApiError:Kv,StorageClient:Uj,StorageError:mi,StorageUnknownError:ea,StorageVectorsApiError:yo,StorageVectorsClient:nx,StorageVectorsError:Cd,get StorageVectorsErrorCode(){return tc},StorageVectorsUnknownError:Qv,VectorBucketApi:tx,VectorBucketScope:rx,VectorDataApi:ex,VectorIndexApi:Zv,VectorIndexScope:sx,isPlainObject:Xv,isStorageError:ne,isStorageVectorsError:Be,normalizeToFloat32:Ij,resolveFetch:Ia,resolveResponse:Oj,validateVectorDimension:Dj},Symbol.toStringTag,{value:"Module"})),Fj=ui(Vj);var ix={},Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.version=void 0;Da.version="2.86.2";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=Da;let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(ix);var ox={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=s=>s?(...i)=>s(...i):(...i)=>fetch(...i);t.resolveFetch=e;const n=()=>Headers;t.resolveHeadersConstructor=n;const r=(s,i,o)=>{const a=(0,t.resolveFetch)(o),l=(0,t.resolveHeadersConstructor)();return async(c,d)=>{var h;const f=(h=await i())!==null&&h!==void 0?h:s;let p=new l(d==null?void 0:d.headers);return p.has("apikey")||p.set("apikey",s),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),a(c,Object.assign(Object.assign({},d),{headers:p}))}};t.fetchWithAuth=r})(ox);var bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.isBrowser=void 0;bn.uuid=Bj;bn.ensureTrailingSlash=ax;bn.applySettingDefaults=zj;bn.validateSupabaseUrl=Wj;function Bj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t=="x"?e:e&3|8;return n.toString(16)})}function ax(t){return t.endsWith("/")?t:t+"/"}const Gj=()=>typeof window<"u";bn.isBrowser=Gj;function zj(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function Wj(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ax(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var La={};const lx="2.86.2",lr=30*1e3,nc=3,El=nc*lr,Kj="http://localhost:9999",Hj="supabase.auth.token",qj={"X-Client-Info":`gotrue-js/${lx}`},rc="X-Supabase-Api-Version",ux={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Jj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Yj=10*60*1e3;let Wr=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function O(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let cx=class extends Wr{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function dx(t){return O(t)&&t.name==="AuthApiError"}let Xt=class extends Wr{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},Wt=class extends Wr{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}},Ve=class extends Wt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function hx(t){return O(t)&&t.name==="AuthSessionMissingError"}let An=class extends Wt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},vs=class extends Wt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},xs=class extends Wt{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function fx(t){return O(t)&&t.name==="AuthImplicitGrantRedirectError"}let sc=class extends Wt{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},ta=class extends Wt{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function vo(t){return O(t)&&t.name==="AuthRetryableFetchError"}let ic=class extends Wt{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function Qj(t){return O(t)&&t.name==="AuthWeakPasswordError"}let na=class extends Wt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const ra="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Bf=` 	
\r=`.split(""),Xj=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Bf.length;e+=1)t[Bf[e].charCodeAt(0)]=-2;for(let e=0;e<ra.length;e+=1)t[ra[e].charCodeAt(0)]=e;return t})();function Gf(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ra[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(ra[r]),e.queuedBits-=6}}function px(t,e,n){const r=Xj[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function zf(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{tE(o,r,n)};for(let o=0;o<t.length;o+=1)px(t.charCodeAt(o),s,i);return e.join("")}function Zj(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function eE(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Zj(r,e)}}function tE(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ir(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)px(t.charCodeAt(s),n,r);return new Uint8Array(e)}function nE(t){const e=[];return eE(t,n=>e.push(n)),new Uint8Array(e)}function Fn(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Gf(s,n,r)),Gf(null,n,r),e.join("")}function rE(t){return Math.round(Date.now()/1e3)+t}function sE(){return Symbol("auth-callback")}const _e=()=>typeof window<"u"&&typeof document<"u",Nn={tested:!1,writable:!1},mx=()=>{if(!_e())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Nn.tested)return Nn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Nn.tested=!0,Nn.writable=!0}catch{Nn.tested=!0,Nn.writable=!1}return Nn.writable};function iE(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const gx=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),oE=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ur=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},kn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},be=async(t,e)=>{await t.removeItem(e)};class $a{constructor(){this.promise=new $a.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}$a.promiseConstructor=Promise;function Nl(t){const e=t.split(".");if(e.length!==3)throw new na("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Jj.test(e[r]))throw new na("JWT not in base64url format");return{header:JSON.parse(zf(e[0])),payload:JSON.parse(zf(e[1])),signature:Ir(e[2]),raw:{header:e[0],payload:e[1]}}}async function aE(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function lE(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function uE(t){return("0"+t.toString(16)).substr(-2)}function cE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,uE).join("")}async function dE(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function hE(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await dE(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function sr(t,e,n=!1){const r=cE();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ur(t,`${e}-code-verifier`,s);const i=await hE(r);return[i,r===i?"plain":"s256"]}const fE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pE(t){const e=t.headers.get(rc);if(!e||!e.match(fE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function mE(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function gE(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ir(t){if(!yE.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kl(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function vE(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function Wf(t){return JSON.parse(JSON.stringify(t))}const Rn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xE=[502,503,504];async function Kf(t){var e;if(!oE(t))throw new ta(Rn(t),0);if(xE.includes(t.status))throw new ta(Rn(t),t.status);let n;try{n=await t.json()}catch(i){throw new Xt(Rn(i),i)}let r;const s=pE(t);if(s&&s.getTime()>=ux["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ic(Rn(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ve}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ic(Rn(n),t.status,n.weak_password.reasons);throw new cx(Rn(n),t.status||500,r)}const wE=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function $(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[rc]||(i[rc]=ux["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await bE(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function bE(t,e,n,r,s,i){const o=wE(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new ta(Rn(l),0)}if(a.ok||await Kf(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Kf(l)}}function dt(t){var e;let n=null;jE(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=rE(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Hf(t){const e=dt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Zt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _E(t){return{data:t,error:null}}function SE(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=es(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function qf(t){return t}function jE(t){return t.access_token&&t.refresh_token&&t.expires_in}const xo=["global","local","others"];let Pd=class{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=gx(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=xo[0]){if(xo.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xo.join(", ")}`);try{return await $(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await $(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Zt})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=es(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await $(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:SE,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(O(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await $(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Zt})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await $(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:qf});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(O(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){ir(e);try{return await $(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Zt})}catch(n){if(O(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ir(e);try{return await $(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Zt})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){ir(e);try{return await $(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Zt})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ir(e.userId);try{const{data:n,error:r}=await $(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(O(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ir(e.userId),ir(e.id);try{return{data:await $(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(O(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await $(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:qf});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(g.split(";")[1].split("=")[1]);c[`${b}Page`]=v}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(O(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await $(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(O(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await $(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(O(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await $(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(O(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await $(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(O(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await $(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(O(n))return{data:null,error:n};throw n}}};function Jf(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const On={debug:!!(globalThis&&mx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ad extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let yx=class extends Ad{};class EE extends Ad{}async function vx(t,e,n){On.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),On.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){On.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{On.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw On.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new yx(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(On.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const Yf={};async function NE(t,e,n){var r;const s=(r=Yf[t])!==null&&r!==void 0?r:Promise.resolve(),i=Promise.race([s.catch(()=>null),e>=0?new Promise((o,a)=>{setTimeout(()=>{a(new EE(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await n());return Yf[t]=i.catch(async o=>{if(o&&o.isAcquireTimeout)return await s,null;throw o}),await i}function kE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function xx(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function TE(t){return parseInt(t,16)}function CE(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function PE(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:d,uri:h,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=xx(t.address),g=d?`${d}://${r}`:r,v=t.statement?`${t.statement}
`:"",b=`${g} wants you to sign in with your Ethereum account:
${p}

${v}`;let m=`URI: ${h}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(m+=`
Expiration Time: ${s.toISOString()}`),a&&(m+=`
Not Before: ${a.toISOString()}`),l&&(m+=`
Request ID: ${l}`),c){let x=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);x+=`
- ${w}`}m+=x}return`${b}
${m}`}class pe extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class sa extends pe{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function AE({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new pe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new pe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new pe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new pe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new pe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new pe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new pe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(wx(o)){if(i.rp.id!==o)return new pe({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new pe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new pe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function RE({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new pe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new pe({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(wx(r)){if(n.rpId!==r)return new pe({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new pe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class OE{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const IE=new OE;function DE(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=es(t,["challenge","user","excludeCredentials"]),i=Ir(e).buffer,o=Object.assign(Object.assign({},n),{id:Ir(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Ir(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function LE(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=es(t,["challenge","allowCredentials"]),s=Ir(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Ir(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function $E(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Fn(new Uint8Array(t.response.attestationObject)),clientDataJSON:Fn(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ME(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Fn(new Uint8Array(s.authenticatorData)),clientDataJSON:Fn(new Uint8Array(s.clientDataJSON)),signature:Fn(new Uint8Array(s.signature)),userHandle:s.userHandle?Fn(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function wx(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Qf(){var t,e;return!!(_e()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function UE(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new sa("Browser returned unexpected credential type",e)}:{data:null,error:new sa("Empty credential response",e)}}catch(e){return{data:null,error:AE({error:e,options:t})}}}async function VE(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new sa("Browser returned unexpected credential type",e)}:{data:null,error:new sa("Empty credential response",e)}}catch(e){return{data:null,error:RE({error:e,options:t})}}}const FE={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},BE={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ia(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=ia(a,o):r[i]=ia(o)}else r[i]=o}return r}function GE(t,e){return ia(FE,t,e||{})}function zE(t,e){return ia(BE,t,e||{})}class WE{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=s??IE.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=GE(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await UE({publicKey:c,signal:l});return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const c=zE(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await VE(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return d?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new Xt("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Wr("rpId is required for WebAuthn authentication")};try{if(!Qf())return{data:null,error:new Xt("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new Xt("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new Wr("rpId is required for WebAuthn registration")};try{if(!Qf())return{data:null,error:new Xt("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return O(o)?{data:null,error:o}:{data:null,error:new Xt("Unexpected error in register",o)}}}}kE();const KE={url:Kj,storageKey:Hj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Xf(t,e,n){return await n()}const or={};let Rd=class oc{get jwks(){var e,n;return(n=(e=or[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){or[this.storageKey]=Object.assign(Object.assign({},or[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=or[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){or[this.storageKey]=Object.assign(Object.assign({},or[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},KE),e);if(this.storageKey=i.storageKey,this.instanceID=(n=oc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,oc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&_e()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Pd({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=gx(i.fetch),this.lock=i.lock||Xf,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:_e()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=vx:this.lock=Xf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new WE(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:mx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jf(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Jf(this.memoryStorage)),_e()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${lx}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(_e()&&(n=iE(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),_e()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),fx(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return O(n)?this._returnResult({error:n}):this._returnResult({error:new Xt("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:dt}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await sr(this.storage,this.storageKey)),i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},xform:dt})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await $(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:dt})}else throw new vs("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await be(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Hf})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await $(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Hf})}else throw new vs("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new An;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(O(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,a,l,c,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:v,wallet:b,statement:m,options:x}=e;let w;if(_e())if(typeof b=="object")w=b;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")w=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=b}const _=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),j=await w.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=xx(j[0]);let N=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!N){const C=await w.request({method:"eth_chainId"});N=TE(C)}const E={domain:_.host,address:S,statement:m,uri:_.href,version:"1",chainId:N,nonce:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(d=x==null?void 0:x.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=PE(E),g=await w.request({method:"personal_sign",params:[CE(p),S]})}try{const{data:v,error:b}=await $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:dt});if(b)throw b;if(!v||!v.session||!v.user){const m=new An;return this._returnResult({data:{user:null,session:null},error:m})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(O(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var n,r,s,i,o,a,l,c,d,h,f,p;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:b,wallet:m,statement:x,options:w}=e;let _;if(_e())if(typeof m=="object")_=m;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=m}const j=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),x?{statement:x}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)g=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),v=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=S}}try{const{data:b,error:m}=await $(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Fn(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:dt});if(m)throw m;if(!b||!b.session||!b.user){const x=new An;return this._returnResult({data:{user:null,session:null},error:x})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:m})}catch(b){if(O(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(e){const n=await kn(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await $(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:dt});if(await be(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new An;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:dt}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const d=new An;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(O(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await sr(this.storage,this.storageKey));const{error:h}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await $(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new vs("You must provide either an email or phone number.")}catch(a){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await $(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:dt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await sr(this.storage,this.storageKey));const c=await $(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:_E});return!((i=c.data)===null||i===void 0)&&i.url&&_e()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ve;const{error:s}=await $(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(O(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await $(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await $(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new vs("You must provide either an email or phone number and a type")}catch(n){if(O(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await kn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<El:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await kn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=kl()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=vE(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Zt}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ve}:await $(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Zt})})}catch(n){if(O(n))return hx(n)&&(await this._removeSession(),await be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ve;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await sr(this.storage,this.storageKey));const{data:c,error:d}=await $(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Zt});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ve;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Nl(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(O(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ve;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(O(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!_e())throw new xs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new xs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new sc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xs("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new sc("No code detected.");const{data:x,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new xs("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=lr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:e.type},error:null})}catch(r){if(O(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await kn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(dx(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await be(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=sE(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await sr(this.storage,this.storageKey,!0));try{return await $(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await $(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return _e()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(O(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:c,nonce:d}=e,h=await $(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:dt}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new An}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(await be(this.storage,`${this.storageKey}-code-verifier`),O(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await $(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await lE(async s=>(s>0&&await aE(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await $(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:dt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&vo(i)&&Date.now()+o-r<lr})}catch(r){if(this._debug(n,"error",r),O(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),_e()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await kn(this.storage,this.storageKey);if(s&&this.userStorage){let o=await kn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await ur(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:kl()}else if(s&&!s.user&&!s.user){const o=await kn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await be(this.storage,this.storageKey+"-user"),await ur(this.storage,this.storageKey,s)):s.user=kl()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<El;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${El}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),vo(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ve;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new $a;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ve;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),O(i)){const o={data:null,error:i};return vo(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await be(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ur(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=Wf(s);await ur(this.storage,this.storageKey,i)}else{const s=Wf(n);await ur(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await be(this.storage,this.storageKey),await be(this.storage,this.storageKey+"-code-verifier"),await be(this.storage,this.storageKey+"-user"),this.userStorage&&await be(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_e()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),lr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/lr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${lr}ms, refresh threshold is ${nc} ticks`),s<=nc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ad)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_e()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await sr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await $(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await $(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?$E(e.webauthn.credential_response):ME(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await $(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await $(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:DE(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:LE(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Nl(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await $(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ve})})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ve});const o=await $(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&_e()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ve});const o=await $(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&_e()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await $(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ve})})}catch(e){if(O(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await $(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ve})})}catch(n){if(O(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Yj>s)return r;const{data:i,error:o}=await $(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:g}=await this.getSession();if(g||!p.session)return this._returnResult({data:null,error:g});r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Nl(r);n!=null&&n.allowExpired||mE(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const d=gE(s.alg),h=await crypto.subtle.importKey("jwk",c,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,nE(`${a}.${l}`)))throw new na("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(O(r))return this._returnResult({data:null,error:r});throw r}}};Rd.nextInstanceID={};const HE=Pd,qE=Rd,JE=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:HE,AuthApiError:cx,AuthClient:qE,AuthError:Wr,AuthImplicitGrantRedirectError:xs,AuthInvalidCredentialsError:vs,AuthInvalidJwtError:na,AuthInvalidTokenResponseError:An,AuthPKCEGrantCodeExchangeError:sc,AuthRetryableFetchError:ta,AuthSessionMissingError:Ve,AuthUnknownError:Xt,AuthWeakPasswordError:ic,CustomAuthError:Wt,GoTrueAdminApi:Pd,GoTrueClient:Rd,NavigatorLockAcquireTimeoutError:yx,SIGN_OUT_SCOPES:xo,isAuthApiError:dx,isAuthError:O,isAuthImplicitGrantRedirectError:fx,isAuthRetryableFetchError:vo,isAuthSessionMissingError:hx,isAuthWeakPasswordError:Qj,lockInternals:On,navigatorLock:vx,processLock:NE},Symbol.toStringTag,{value:"Module"})),bx=ui(JE);Object.defineProperty(La,"__esModule",{value:!0});La.SupabaseAuthClient=void 0;const YE=bx;class QE extends YE.AuthClient{constructor(e){super(e)}}La.SupabaseAuthClient=QE;Object.defineProperty(Yo,"__esModule",{value:!0});const XE=Ev,ZE=Ae,eN=Wv,tN=Fj,qi=ix,nN=ox,Zf=bn,rN=La;let sN=class{constructor(e,n,r){var s,i,o;this.supabaseUrl=e,this.supabaseKey=n;const a=(0,Zf.validateSupabaseUrl)(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:qi.DEFAULT_DB_OPTIONS,realtime:qi.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},qi.DEFAULT_AUTH_OPTIONS),{storageKey:l}),global:qi.DEFAULT_GLOBAL_OPTIONS},d=(0,Zf.applySettingDefaults)(r??{},c);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=(0,nN.fetchWithAuth)(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new ZE.PostgrestClient(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new tN.StorageClient(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new XE.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:d},h,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rN.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),h),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:i,flowType:a,lock:l,debug:c,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new eN.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};Yo.default=sN;(function(t){var e=tr&&tr.__createBinding||(Object.create?function(d,h,f,p){p===void 0&&(p=f);var g=Object.getOwnPropertyDescriptor(h,f);(!g||("get"in g?!h.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return h[f]}}),Object.defineProperty(d,p,g)}:function(d,h,f,p){p===void 0&&(p=f),d[p]=h[f]}),n=tr&&tr.__exportStar||function(d,h){for(var f in d)f!=="default"&&!Object.prototype.hasOwnProperty.call(h,f)&&e(h,d,f)},r=tr&&tr.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const s=r(Yo);n(bx,t);var i=Ae;Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return i.PostgrestError}});var o=Ev;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),n(Wv,t);var a=Yo;Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return r(a).default}});const l=(d,h,f)=>new s.default(d,h,f);t.createClient=l;function c(){if(typeof window<"u"||typeof process>"u")return!1;const d=process.version;if(d==null)return!1;const h=d.match(/^v(\d+)\./);return h?parseInt(h[1],10)<=18:!1}c()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Sd);const _x=Pm(Sd),iN=Cm({__proto__:null,default:_x},[Sd]),{PostgrestError:jR,FunctionsHttpError:ER,FunctionsFetchError:NR,FunctionsRelayError:kR,FunctionsError:TR,FunctionRegion:CR,SupabaseClient:PR,createClient:oN,GoTrueAdminApi:AR,GoTrueClient:RR,AuthAdminApi:OR,AuthClient:IR,navigatorLock:DR,NavigatorLockAcquireTimeoutError:LR,lockInternals:$R,processLock:MR,SIGN_OUT_SCOPES:UR,AuthError:VR,AuthApiError:FR,AuthUnknownError:BR,CustomAuthError:GR,AuthSessionMissingError:zR,AuthInvalidTokenResponseError:WR,AuthInvalidCredentialsError:KR,AuthImplicitGrantRedirectError:HR,AuthPKCEGrantCodeExchangeError:qR,AuthRetryableFetchError:JR,AuthWeakPasswordError:YR,AuthInvalidJwtError:QR,isAuthError:XR,isAuthApiError:ZR,isAuthSessionMissingError:eO,isAuthImplicitGrantRedirectError:tO,isAuthRetryableFetchError:nO,isAuthWeakPasswordError:rO,RealtimePresence:sO,RealtimeChannel:iO,RealtimeClient:oO,REALTIME_LISTEN_TYPES:aO,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:lO,REALTIME_PRESENCE_LISTEN_EVENTS:uO,REALTIME_SUBSCRIBE_STATES:cO,REALTIME_CHANNEL_STATES:dO}=_x||iN,F=oN(void 0,void 0),ac="authUser",aN="auth-user-change",Sx=()=>typeof window<"u"&&typeof localStorage<"u",Ma=()=>{if(!Sx())return null;try{const t=localStorage.getItem(ac);if(!t)return null;const e=JSON.parse(t);if(e!=null&&e.accessToken&&(e!=null&&e.id)&&(e!=null&&e.role))return e}catch(t){console.warn("[authUser] Failed to parse auth user:",t)}return Dr(),null},Ua=t=>{if(Sx())try{t?localStorage.setItem(ac,JSON.stringify(t)):localStorage.removeItem(ac),window.dispatchEvent(new Event(aN))}catch(e){console.error("[authUser] Failed to set auth user:",e)}},Dr=()=>Ua(null),lc=async t=>{if(!(t!=null&&t.user))return Dr(),null;try{const{data:e,error:n}=await F.from("profiles").select("id, email, name, role").eq("id",t.user.id).single();if(n||!e)return console.error("[authUser] Failed to load profile",n),Dr(),null;const r={id:e.id??t.user.id,email:e.email??t.user.email??"",name:e.name??"",role:e.role,accessToken:t.access_token??""};return Ua(r),r}catch(e){return console.error("[authUser] Unexpected error while hydrating user",e),Dr(),null}},lN=t=>t==="admin"?"/admin/dashboard":"/home",jx=async()=>{try{await F.auth.signOut()}catch(t){console.error("[auth] logout failed",t)}finally{typeof window<"u"&&(localStorage.removeItem("token"),localStorage.removeItem("role")),Ua(null),window.location.href="/home"}},uN=async()=>{var e;const t=localStorage.getItem("oauth_role");try{const{data:{session:n}}=await F.auth.getSession();if(!(n!=null&&n.user))throw new Error("   .");const r=n.user,{data:s,error:i}=await F.from("profiles").select("id, email, name, role").eq("id",r.id).single();if(i&&i.code!=="PGRST116")throw i;const o=(s==null?void 0:s.role)??t??"student";if(s&&t&&s.role!==t){await F.auth.signOut(),localStorage.removeItem("oauth_role"),alert("      .");return}if(!s){const{error:a}=await F.from("profiles").upsert({id:r.id,email:r.email,name:((e=r.user_metadata)==null?void 0:e.full_name)??"",role:o});if(a)throw a}await lc(n),localStorage.removeItem("oauth_role"),window.location.href=lN(o)}catch(n){console.error("[auth] completeOAuthLogin failed",n),alert("    .")}},cN=()=>{const t=Ue();return y.useEffect(()=>{(async()=>{await uN(),t(0)})()},[t]),u.jsx("p",{children:" ..."})},dN=()=>{const[t,e]=y.useState(""),[n,r]=y.useState(""),[s,i]=y.useState(""),[o,a]=y.useState("student"),[l,c]=y.useState(""),[d,h]=y.useState(!1),f=Ue(),p=y.useCallback(async g=>{if(g.preventDefault(),!d){c(""),h(!0);try{const{data:v,error:b}=await F.auth.signUp({email:n.trim(),password:s.trim()});if(b)throw b;const m=v==null?void 0:v.user;if(!m)throw new Error("     .");const{error:x}=await F.from("profiles").upsert({id:m.id,email:n.trim(),name:t.trim(),role:o});if(x)throw x;f("/login")}catch(v){console.error("[Signup] signup failed",v),c(" .  .")}finally{h(!1)}}},[n,d,t,f,s,o]);return u.jsxs("div",{className:"mx-auto mt-10 max-w-md rounded-2xl bg-white p-6 shadow-xl",children:[u.jsx("h1",{className:"mb-4 text-xl font-semibold",children:""}),u.jsxs("form",{onSubmit:p,children:[u.jsx("label",{className:"mb-1 block text-sm font-medium",children:""}),u.jsx("input",{className:"mb-3 w-full rounded-md border p-2",value:t,onChange:g=>e(g.target.value),required:!0}),u.jsx("label",{className:"mb-1 block text-sm font-medium",children:""}),u.jsx("input",{type:"email",className:"mb-3 w-full rounded-md border p-2",value:n,onChange:g=>r(g.target.value),required:!0}),u.jsx("label",{className:"mb-1 block text-sm font-medium",children:""}),u.jsx("input",{type:"password",className:"mb-3 w-full rounded-md border p-2",value:s,onChange:g=>i(g.target.value),required:!0}),u.jsx("label",{className:"mb-2 block text-sm font-medium",children:" "}),u.jsxs("div",{className:"mb-4 flex items-center gap-4 text-sm",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",name:"role",value:"student",checked:o==="student",onChange:()=>a("student")}),"student"]}),u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("input",{type:"radio",name:"role",value:"vod",checked:o==="vod",onChange:()=>a("vod")}),"vod"]})]}),l&&u.jsx("p",{className:"mb-3 text-sm text-red-500",children:l}),u.jsx("button",{type:"submit",className:"w-full rounded-lg bg-yellow-400 py-2 text-white hover:bg-yellow-500",disabled:d,children:d?" ...":""})]})]})},ep="classWebAppUserId",hN=()=>{if(typeof crypto<"u"&&typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=Math.random().toString(36).slice(2,10);return`${Date.now().toString(36)}-${t}`},fN=()=>{if(typeof window>"u")return"guest";try{const t=window.localStorage.getItem(ep);if(t&&t.trim().length>0)return t;const e=hN();return window.localStorage.setItem(ep,e),e}catch(t){return console.warn("[userIdentity] failed to access localStorage",t),"guest"}},pN=t=>{const e=" ";try{const n=new Date(t);if(Number.isNaN(n.getTime()))return e;const s=new Date().getTime()-n.getTime();if(s<60*1e3)return" ";if(s<60*60*1e3)return`${Math.floor(s/6e4)} `;if(s<24*60*60*1e3)return`${Math.floor(s/36e5)} `;const i=Math.floor(s/(24*60*60*1e3));return i<7?`${i} `:n.toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(n){return console.warn("[NotificationBell] failed to format time",t,n),e}},mN=t=>{const e=t??"";return e.length<=70?e:`${e.slice(0,67)}...`},gN=()=>{const[t,e]=y.useState([]),[n,r]=y.useState(!1),[s,i]=y.useState(!1),[o,a]=y.useState(null),l=y.useRef(null),c=y.useRef(""),d=y.useCallback(()=>(c.current||(c.current=fN()),c.current),[]),h=y.useCallback(async()=>{try{i(!0),a(null);const m=d(),x=await fetch("/.netlify/functions/notifications",{headers:{"X-User-Id":m}});if(!x.ok)throw new Error(`  . (status ${x.status})`);const w=await x.json(),j=(Array.isArray(w==null?void 0:w.data)?w.data:[]).map(S=>({id:typeof(S==null?void 0:S.id)=="number"?S.id:Number(S==null?void 0:S.id)||0,title:typeof(S==null?void 0:S.title)=="string"?S.title:"",message:typeof(S==null?void 0:S.message)=="string"?S.message:"",createdAt:typeof(S==null?void 0:S.createdAt)=="string"&&S.createdAt.length>0?S.createdAt:typeof(S==null?void 0:S.created_at)=="string"?S.created_at:""})).filter(S=>S.id>0&&S.title);e(j)}catch(m){const x=m instanceof Error?m.message:"    .";a(x)}finally{i(!1)}},[d]);y.useEffect(()=>{h().catch(m=>{console.warn("[NotificationBell] failed initial fetch",m)})},[h]),y.useEffect(()=>{if(!n)return;const m=w=>{l.current&&(w.target instanceof Node&&l.current.contains(w.target)||r(!1))},x=w=>{w.key==="Escape"&&r(!1)};return document.addEventListener("mousedown",m),document.addEventListener("keydown",x),()=>{document.removeEventListener("mousedown",m),document.removeEventListener("keydown",x)}},[n]);const f=()=>{r(m=>{const x=!m;return!m&&!s&&h().catch(w=>{console.warn("[NotificationBell] failed to refresh",w)}),x})},p=y.useCallback(async m=>{if(m)try{const x=d(),w=await fetch("/.netlify/functions/notifications-delete",{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":x},body:JSON.stringify({id:m})});if(!w.ok)throw new Error(`  . (status ${w.status})`);const _=await w.json();if((_==null?void 0:_.success)!==!0)throw new Error((_==null?void 0:_.message)||"  .");e(j=>j.filter(S=>S.id!==m))}catch(x){const w=x instanceof Error?x.message:"    .";a(w)}},[d]),g=t.length,v=g>0,b=y.useMemo(()=>s?u.jsx("p",{className:"py-4 text-center text-sm text-ellieGray/70",children:"  ..."}):o?u.jsx("p",{className:"py-4 text-center text-sm text-red-500",children:o}):v?u.jsx("ul",{className:"max-h-80 divide-y divide-gray-100 overflow-auto",children:t.map(m=>u.jsxs("li",{className:"flex items-start gap-3 px-4 py-3",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("p",{className:"text-sm font-semibold text-ellieGray",children:m.title}),u.jsx("p",{className:"mt-1 text-xs text-ellieGray/70",children:mN(m.message)}),u.jsx("p",{className:"mt-1 text-[11px] text-ellieGray/60",children:pN(m.createdAt)})]}),u.jsx("button",{type:"button",onClick:()=>p(m.id),className:"mt-1 text-xs text-ellieGray/50 transition-colors hover:text-ellieGray",children:""})]},m.id))}):u.jsx("p",{className:"py-4 text-center text-sm text-ellieGray/70",children:"  ."}),[o,p,v,s,t]);return u.jsxs("div",{className:"relative",ref:l,children:[u.jsxs("button",{type:"button",onClick:f,className:"relative flex h-10 w-10 items-center justify-center rounded-full bg-white text-ellieGray shadow-sm transition-colors hover:bg-[#fef568]/30","aria-label":" ",children:[u.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[u.jsx("path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"}),u.jsx("path",{d:"M10.3 21a1.7 1.7 0 0 0 3.4 0"})]}),v?u.jsx("span",{className:"absolute -right-1 -top-1 flex h-5 min-w-[20px] items-center justify-center rounded-full bg-red-500 px-1 text-[11px] font-semibold text-white",children:g}):null]}),n?u.jsxs("div",{className:"absolute right-0 mt-3 w-80 overflow-hidden rounded-2xl bg-white shadow-xl",children:[u.jsx("div",{className:"border-b border-gray-100 px-4 py-3",children:u.jsx("p",{className:"text-sm font-semibold text-ellieGray",children:""})}),b]}):null]})},yN=()=>typeof window<"u"?localStorage.getItem("token"):null,vN=()=>typeof window>"u"?null:localStorage.getItem("role")??null;function xN(){const[t,e]=y.useState(null),[n,r]=y.useState(null),[s,i]=y.useState(!1),[o,a]=y.useState(!0),l=y.useCallback(d=>{if(e(d),r((d==null?void 0:d.role)??null),i(!!d),!(typeof window>"u")){if(!d){Dr(),localStorage.removeItem("token"),localStorage.removeItem("role");return}Ua(d),d.accessToken&&localStorage.setItem("token",d.accessToken),d.role&&localStorage.setItem("role",d.role)}},[]),c=y.useCallback(async()=>{a(!0);try{const{data:{session:f}}=await F.auth.getSession();if(f){const p=await lc(f);if(p){l(p),a(!1);return}}}catch(f){console.error("[useAuthUser] Failed to restore Supabase session",f)}const d=yN(),h=vN();if(!d){l(null),a(!1);return}try{const f=await fetch("/auth/me",{headers:{Authorization:`Bearer ${d}`}}),p=await f.json();if(f.ok&&(p!=null&&p.user)){const g=p.user.role??h??null,v={...p.user,accessToken:d,role:g??p.user.role};g&&localStorage.setItem("role",g),l(v)}else l(null)}catch(f){console.error("[useAuthUser] Failed to hydrate user",f),l(null)}finally{a(!1)}},[l]);return y.useEffect(()=>{c()},[c]),y.useEffect(()=>{const{data:d}=F.auth.onAuthStateChange(async(h,f)=>{a(!0);const p=f?await lc(f):null;l(p),a(!1)});return()=>d.subscription.unsubscribe()},[l]),{user:t,role:n,loggedIn:s,loading:o,refresh:c,setUser:l}}const Ex=y.createContext(void 0),wN=({children:t})=>{const e=xN();return u.jsx(Ex.Provider,{value:e,children:t})},Nx=()=>{const t=y.useContext(Ex);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},_n=()=>Nx(),Va=y.createContext(null);function bN({children:t}){const[e,n]=y.useState(!1),[r,s]=y.useState("select-type"),[i,o]=y.useState(null),a=()=>{s("select-type"),n(!0)},l=()=>n(!1);return u.jsx(Va.Provider,{value:{isOpen:e,open:a,close:l,step:r,setStep:s,userType:i,setUserType:o},children:t})}const _N=()=>{const t=Ue(),{user:e}=_n(),{open:n}=y.useContext(Va),r=()=>{t("/admin")};return u.jsx("header",{className:"fixed top-0 z-30 w-full bg-white/90 shadow-md backdrop-blur",children:u.jsxs("div",{className:"flex h-16 items-center justify-between px-5",children:[u.jsx("span",{className:"pointer-events-none text-lg font-semibold text-gray-800",children:" "}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(gN,{}),(e==null?void 0:e.role)==="admin"&&u.jsx("button",{type:"button",onClick:r,className:"rounded-full bg-white px-4 py-2 text-sm font-semibold text-ellieGray shadow-sm transition-colors hover:bg-[#fef568]/40",children:" "}),!e&&u.jsx("button",{type:"button",onClick:n,className:"rounded-full bg-white px-4 py-2 text-sm font-semibold text-ellieGray shadow-sm transition-colors hover:bg-[#fef568]/40",children:""})]})]})})};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=(t,e)=>{const n=y.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>y.createElement("svg",{ref:d,...SN,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${jN(t)}`,a].join(" "),...c},[...e.map(([h,f])=>y.createElement(h,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=Zn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Zn("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Zn("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=Zn("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=Zn("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=Zn("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=Zn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),tp=[{label:"",to:"/",Icon:CN},{label:"",to:"/classroom",Icon:TN},{label:"VOD",to:"/vod",Icon:NN},{label:"",to:"/notices",Icon:PN}],RN="flex flex-col items-center justify-center gap-1 rounded-2xl bg-white py-3 text-xs font-medium shadow-md transition-colors duration-200 focus:outline-none",ON=()=>{const t=zt(),e=Ue(),{user:n,loading:r}=Nx(),s=y.useMemo(()=>!r&&n?[...tp,{label:"My",to:"/my",Icon:AN}]:tp,[n,r]);return u.jsx("nav",{className:"fixed inset-x-0 bottom-0 z-20 bg-[#fefaf4] px-5 pb-6 pt-3 shadow-[0_-6px_20px_rgba(0,0,0,0.05)]",children:u.jsx("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${s.length}, minmax(0, 1fr))`},children:s.map(({label:i,to:o,Icon:a})=>{const l=o==="/"?t.pathname==="/"||t.pathname==="/home":t.pathname.startsWith(o),c=l?"#404040":"#8e8e8e",d=l?"text-[#404040]":"text-[#8e8e8e]",h=()=>e(o);return u.jsxs("button",{type:"button",onClick:h,className:`${RN} ${d} ${l?"bg-[#fef568]/70":"hover:bg-[#fef568]/40"}`,children:[u.jsx(a,{size:22,strokeWidth:1.75,color:c}),u.jsx("span",{children:i})]},i)})})})},IN=()=>u.jsxs("div",{className:"flex min-h-screen flex-col bg-[#fefaf4]",children:[u.jsx(_N,{}),u.jsx("main",{className:"flex-1 px-4 pb-20 pt-20",children:u.jsx(_d,{})}),u.jsx(ON,{})]});async function Tl(t){const e=await fetch(t);if(!e.ok)throw new Error(`Failed to fetch: ${t}`);try{return await e.json()}catch(n){throw console.error("[home] failed to parse response",t,n),new Error("Invalid JSON response")}}function np(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),[s,i]=y.useState([]),[o,a]=y.useState(!0),[l,c]=y.useState([]),[d,h]=y.useState(!0);y.useEffect(()=>{async function b(){try{const m=await Tl("/api/global-list"),x=Array.isArray(m==null?void 0:m.data)?m.data:[];e(x)}catch(m){console.error("  :",m)}finally{r(!1)}}b()},[]),y.useEffect(()=>{async function b(){try{const m=await Tl("/api/vod-list");i(m.data??[])}catch(m){console.error("VOD  :",m)}finally{a(!1)}}b()},[]),y.useEffect(()=>{async function b(){try{const m=await Tl("/api/vod-categories");c(m.data??[])}catch(m){console.error("  :",m)}finally{h(!1)}}b()},[]);const f=y.useMemo(()=>t.slice(0,2),[t]),p=y.useMemo(()=>s.filter(b=>b.isRecommended).slice(0,3),[s]),g=y.useMemo(()=>l.find(b=>b.id==="featured"),[l]),v=n||o||d;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{className:"rounded-3xl bg-ellieYellow px-6 py-8 text-ellieGray shadow-soft",children:[u.jsx("h1",{className:"text-2xl font-bold",children:" "}),u.jsx("p",{className:"mt-3 text-sm leading-relaxed",children:"     .   PWA    ."}),u.jsxs("div",{className:"mt-5 flex gap-3",children:[u.jsx(De,{to:"/classroom",className:"rounded-full bg-white px-4 py-2 text-sm font-semibold text-ellieGray shadow-md",children:"  "}),u.jsx(De,{to:"/vod",className:"rounded-full border border-ellieGray/30 px-4 py-2 text-sm font-semibold text-ellieGray",children:"VOD "})]})]}),u.jsxs("section",{className:"grid gap-4",children:[u.jsxs("article",{className:"space-y-4 rounded-3xl bg-white p-5 shadow-soft",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-lg font-semibold text-ellieGray",children:g?`${g.name} VOD `:" VOD"}),u.jsx(De,{to:"/vod",className:"text-xs font-semibold text-ellieGray/70 hover:text-ellieGray",children:" "})]}),v?u.jsx("p",{className:"text-sm text-ellieGray/60",children:"  ..."}):p.length===0?u.jsx("p",{className:"text-sm text-ellieGray/60",children:" VOD  ."}):u.jsx("ul",{className:"grid gap-3 sm:grid-cols-2",children:p.map(b=>u.jsxs("li",{className:"flex gap-3 rounded-2xl bg-[#fffaf0] p-3",children:[u.jsx("div",{className:"h-20 w-28 overflow-hidden rounded-xl bg-ellieGray/10",children:u.jsx("img",{src:b.thumbnailUrl,alt:"VOD ",className:"h-full w-full object-cover"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-semibold text-ellieGray",children:b.title}),b.description&&u.jsx("p",{className:"mt-1 line-clamp-2 text-xs text-ellieGray/70",children:b.description})]})]},b.id))})]}),u.jsxs("article",{className:"space-y-4 rounded-3xl bg-white p-5 shadow-soft",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-lg font-semibold text-ellieGray",children:" "}),u.jsx(De,{to:"/notices",className:"text-xs font-semibold text-ellieGray/70 hover:text-ellieGray",children:" "})]}),v?u.jsx("p",{className:"text-sm text-ellieGray/60",children:"   ..."}):f.length===0?u.jsx("p",{className:"text-sm text-ellieGray/60",children:"   ."}):u.jsx("ul",{className:"space-y-3",children:f.map(b=>{const m=b.createdAt??b.created_at,x=m?new Date(m):null,w=x&&!Number.isNaN(x.getTime())?x.toLocaleDateString("ko-KR",{month:"2-digit",day:"2-digit"}):"";return u.jsxs("li",{className:"rounded-2xl bg-[#fffaf0] p-3",children:[u.jsxs("div",{className:"flex items-center justify-between gap-3",children:[u.jsx("p",{className:"text-sm font-semibold text-ellieGray",children:b.title}),u.jsx("time",{className:"text-xs text-ellieGray/60",dateTime:m,children:w})]}),u.jsx("p",{className:"mt-1 line-clamp-2 text-xs text-ellieGray/70",children:b.content})]},b.id)})})]})]})]})}const DN=({categories:t,selectedCategoryId:e,onChange:n})=>t.length?u.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(r=>{const s=String(e)===String(r.id);return u.jsx("button",{type:"button",onClick:()=>n(String(r.id)),className:`rounded-full border px-4 py-2 text-sm font-semibold transition ${s?"border-ellieOrange bg-ellieYellow text-ellieGray shadow-sm":"border-ellieGray/20 bg-white text-ellieGray hover:border-ellieGray/50"}`,children:r.name},r.id)})}):u.jsx("p",{className:"text-sm text-ellieGray/70",children:"  ."}),LN=({categoryId:t})=>{const[e,n]=y.useState([]),[r,s]=y.useState(!1),[i,o]=y.useState(null);return y.useEffect(()=>{if(!t){n([]);return}let a=!0;return(async()=>{s(!0),o(null);try{const{data:c,error:d}=await F.from("vod_videos").select("*").eq("category_id",Number(t)).order("order_index",{ascending:!0});if(d)throw d;if(!a)return;const h=Array.isArray(c)?c:[];n(h)}catch(c){if(!a)return;console.error("[vod] list load failed",c),o("  ."),n([])}finally{if(!a)return;s(!1)}})(),()=>{a=!1}},[t]),t?r?u.jsx("p",{className:"text-sm text-ellieGray/70",children:" ..."}):i?u.jsx("p",{className:"text-sm text-red-500",children:i}):e.length?u.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.map(a=>u.jsxs("article",{className:"rounded-2xl border border-ellieGray/10 bg-white p-4 shadow-sm",children:[u.jsxs("div",{className:"flex items-start justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-base font-semibold text-ellieGray",children:a.title??" "}),a.created_at?u.jsx("p",{className:"text-xs text-ellieGray/60",children:new Date(a.created_at).toLocaleDateString("ko-KR")}):null]}),a.url?u.jsx("a",{href:a.url,target:"_blank",rel:"noreferrer",className:"text-xs font-semibold text-ellieOrange hover:underline",children:""}):null]}),a.description?u.jsx("p",{className:"mt-2 text-sm text-ellieGray/70",children:a.description}):null]},a.id))}):u.jsx("p",{className:"text-sm text-ellieGray/70",children:"  ."}):u.jsx("p",{className:"text-sm text-ellieGray/70",children:"  ."})};async function kx(){const{data:t,error:e}=await F.from("vod_category").select("*").order("order_num",{ascending:!0});if(e)throw console.error("[vod-content] failed to load categories",e),e;return t??[]}const $N=()=>{const[t,e]=y.useState([]),[n,r]=y.useState(""),[s,i]=y.useState(!1),[o,a]=y.useState(null);y.useEffect(()=>{let c=!0;return(async()=>{i(!0),a(null);try{const h=await kx();if(!c)return;e(h??[]),r(f=>{var p,g,v;return f||(((v=(g=(p=h==null?void 0:h[0])==null?void 0:p.id)==null?void 0:g.toString)==null?void 0:v.call(g))??"")})}catch(h){if(!c)return;console.error("[vod] failed to load categories",h),a("  ."),e([])}finally{if(!c)return;i(!1)}})(),()=>{c=!1}},[]);const l=c=>{r(c)};return u.jsxs("div",{className:"mx-auto max-w-5xl space-y-6 px-4 py-8",children:[u.jsxs("header",{className:"space-y-2",children:[u.jsx("h1",{className:"text-2xl font-bold text-ellieGray",children:"VOD"}),u.jsx("p",{className:"text-sm text-ellieGray/70",children:"   VOD  ."})]}),s?u.jsx("p",{className:"text-sm text-ellieGray/70",children:"  ..."}):o?u.jsx("p",{className:"text-sm text-red-500",children:o}):u.jsx(DN,{categories:t,selectedCategoryId:n,onChange:l}),u.jsx(LN,{categoryId:n})]})};function MN({title:t,isOpen:e,onToggle:n,children:r}){return u.jsxs("article",{className:"rounded-3xl bg-transparent",children:[u.jsxs("button",{type:"button",onClick:n,className:"flex w-full items-center justify-between rounded-3xl bg-[#fff8ec] px-5 py-5 text-left shadow-soft transition-transform duration-200 hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-[#ffd331]/40","aria-expanded":e,children:[u.jsx("span",{className:"text-lg font-semibold text-ellieGray",children:t}),u.jsx(EN,{className:`h-5 w-5 text-ellieGray transition-transform duration-200 ${e?"rotate-180":""}`,strokeWidth:2})]}),u.jsx("div",{className:`grid overflow-hidden transition-[grid-template-rows] duration-300 ease-in-out ${e?"grid-rows-[1fr] pt-4":"grid-rows-[0fr]"}`,children:u.jsx("div",{className:"overflow-hidden",children:r})})]})}function UN(){const[t,e]=y.useState([]),[n,r]=y.useState(!0),[s,i]=y.useState(null);return y.useEffect(()=>{async function o(){const a=typeof window<"u"?localStorage.getItem("token"):null;if(!a){e([]),r(!1);return}try{const l=await fetch("/categories",{headers:{Authorization:`Bearer ${a}`}});if(!l.ok)throw new Error("  ");const c=await l.json();e(c.categories??[])}catch(l){console.error("  :",l),i("  .")}finally{r(!1)}}o()},[]),{categories:t,loading:n,error:s}}function VN({category:t,onClick:e}){return u.jsx("button",{type:"button",onClick:()=>e==null?void 0:e(t),className:"w-full rounded-2xl border border-[#f1e6c7] bg-[#fffaf2] px-4 py-3 text-left text-sm font-medium text-ellieGray shadow-soft transition duration-200 hover:-translate-y-0.5 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-[#ffd331]/50",children:t.name})}function FN({subCategories:t}){const e=Ue(),n=r=>{const s=`/classroom/${r.id}`;e(s)};return u.jsx("div",{className:"grid gap-3 pt-1 pointer-events-auto",children:t.map(r=>u.jsx(VN,{category:r,onClick:()=>n(r)},r.id))})}function BN(){const{categories:t,loading:e,error:n}=UN(),[r,s]=y.useState(null),i=y.useMemo(()=>{const a=t.filter(c=>c.parent_id===null),l=t.filter(c=>c.parent_id!==null);return a.map(c=>({...c,children:l.filter(d=>d.parent_id===c.id)}))},[t]),o=a=>{s(l=>l===a?null:a)};return u.jsx("div",{className:"min-h-screen bg-[#fffdf6] text-ellieGray",children:u.jsxs("div",{className:"mx-auto flex max-w-4xl flex-col gap-6 px-4 py-6",children:[u.jsxs("header",{className:"rounded-3xl bg-[#fef568] px-6 py-6 shadow-soft",children:[u.jsx("h1",{className:"text-2xl font-bold text-ellieGray",children:""}),u.jsx("p",{className:"mt-3 text-sm leading-relaxed text-ellieGray/70",children:"     ."})]}),u.jsx("section",{className:"space-y-4 rounded-3xl bg-white px-6 py-6 shadow-soft",children:e?u.jsx("p",{className:"text-sm text-ellieGray/70",children:"  ..."}):n?u.jsx("p",{className:"text-sm text-red-500",children:n}):i.length===0?u.jsx("p",{className:"text-sm text-ellieGray/70",children:"  ."}):u.jsx("div",{className:"space-y-3",children:i.map(a=>{const l=r===a.id;return u.jsx(MN,{title:a.name,isOpen:l,onToggle:()=>o(a.id),children:a.children.length===0?u.jsx("p",{className:"rounded-2xl bg-[#fff8ec] px-4 py-3 text-sm text-ellieGray/70 shadow-soft",children:"  ."}):u.jsx(FN,{subCategories:a.children})},a.id)})})})]})})}const rp="block w-full rounded-2xl bg-white px-5 py-4 text-left shadow-soft transition hover:-translate-y-0.5 hover:shadow-lg";function Tx(){const{user:t}=_n(),e=Ue(),{open:n}=y.useContext(Va);return y.useEffect(()=>{if(!t){n(),e("/my",{replace:!0});return}t.role!=="admin"&&e("/my",{replace:!0})},[t,e,n]),!t||t.role!=="admin"?null:u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsx("h1",{className:"text-xl font-bold",children:" "}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs(De,{to:"/admin/my/notifications",className:rp,children:[u.jsx("p",{className:"text-sm font-semibold text-[#6b625c]",children:" "}),u.jsx("p",{className:"mt-1 text-base font-bold text-[#404040]",children:" "})]}),u.jsxs(De,{to:"/admin/my/assignments",className:rp,children:[u.jsx("p",{className:"text-sm font-semibold text-[#6b625c]",children:"  "}),u.jsx("p",{className:"mt-1 text-base font-bold text-[#404040]",children:"   "})]})]})]})}function Ji(t){return fetch(t).then(e=>{if(!e.ok)throw new Error(t+"  ");return e.json()})}function GN(){const{user:t}=_n(),e=y.useMemo(()=>!t||t.role!=="student"?null:t.id,[t]),[n,r]=y.useState([]),[s,i]=y.useState([]),[o,a]=y.useState([]),[l,c]=y.useState([]),[d,h]=y.useState(!0),[f,p]=y.useState(null),g=`/api/student-classrooms?student=${e}`,v=`/api/student-assignments?student=${e}`,b=`/api/student-feedback?student=${e}`,m="/api/student-courses";y.useEffect(()=>{if(!e){h(!1);return}let j=!1;return h(!0),p(null),Promise.all([Ji(g),Ji(v),Ji(b),Ji(m)]).then(([S,N,E,C])=>{j||(r((S==null?void 0:S.items)??[]),i((N==null?void 0:N.items)??[]),a((E==null?void 0:E.items)??[]),c((C==null?void 0:C.items)??[]))}).catch(S=>{j||(console.error("MyPage Load Failed:",S),p(S))}).finally(()=>{j||h(!1)}),()=>j=!0},[e]);const x=y.useMemo(()=>l.length===0?[]:[...l].sort((S,N)=>S.week-N.week).slice(0,3),[l]),w=y.useMemo(()=>{const j=new Map;return o.forEach(S=>{S.assignment_id&&j.set(S.assignment_id,S)}),j},[o]),_=()=>{window.location.href="/classroom/assignments/upload"};return u.jsxs("div",{className:"mx-auto max-w-5xl space-y-6 p-6",children:[u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{type:"button",onClick:jx,className:"rounded-full bg-white px-4 py-2 text-sm font-semibold text-ellieGray shadow-sm transition-colors hover:bg-[#fef568]/40",children:""})}),u.jsxs("header",{className:"rounded-3xl bg-white px-6 py-5 shadow-soft",children:[u.jsx("h1",{className:"text-xl font-bold text-ellieGray",children:" "}),u.jsx("p",{className:"mt-2 text-sm text-ellieGray/70",children:"  ,     ."})]}),f&&u.jsx("div",{className:"rounded-3xl bg-red-50 p-5 text-sm text-red-600 shadow-soft",children:"    .    ."}),u.jsxs("section",{className:"grid gap-4 md:grid-cols-2",children:[u.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-soft",children:[u.jsx("h2",{className:"text-lg font-semibold text-ellieGray",children:" "}),u.jsx("p",{className:"text-xs text-ellieGray/60",children:"   "}),u.jsx("div",{className:"mt-4 space-y-3",children:d?u.jsx("p",{className:"text-sm text-ellieGray/60",children:" ..."}):n.length===0?u.jsx("p",{className:"text-sm text-ellieGray/60",children:"  ."}):n.map(j=>{var S;return u.jsx("div",{className:"rounded-xl border border-gray-200 p-4",children:u.jsx("p",{className:"font-semibold",children:(S=j.classes)==null?void 0:S.name})},j.id)})})]}),u.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-soft",children:[u.jsx("h2",{className:"text-lg font-semibold text-ellieGray",children:"  "}),u.jsx("p",{className:"text-xs text-ellieGray/60",children:"  "}),u.jsx("div",{className:"mt-4 space-y-3",children:d?u.jsx("p",{className:"text-sm text-ellieGray/60",children:" ..."}):x.length===0?u.jsx("p",{className:"text-sm text-ellieGray/60",children:"  ."}):x.map(j=>u.jsxs("div",{className:"rounded-xl border border-gray-200 p-4",children:[u.jsx("p",{className:"font-semibold",children:j.title}),u.jsxs("p",{className:"text-xs text-ellieGray/60",children:[": ",j.week]})]},j.id))})]})]}),u.jsxs("section",{className:"grid gap-4 md:grid-cols-2",children:[u.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-soft",children:[u.jsxs("header",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold",children:"   "}),u.jsx("p",{className:"text-xs text-ellieGray/60",children:"  "})]}),u.jsx("button",{type:"button",onClick:_,className:"rounded-full bg-ellieOrange px-4 py-2 text-xs font-semibold text-white shadow-soft",children:" "})]}),u.jsx("div",{className:"mt-4 space-y-3",children:d?u.jsx("p",{className:"text-sm text-ellieGray/60",children:" ..."}):s.length===0?u.jsx("p",{className:"text-sm text-ellieGray/60",children:"  ."}):s.map(j=>u.jsxs("div",{className:"rounded-xl border border-gray-200 p-4",children:[u.jsxs("p",{className:"font-semibold",children:[j.session_no,""]}),j.link_url&&u.jsxs("p",{className:"text-xs text-ellieGray/70",children:[": ",u.jsx("a",{href:j.link_url,className:"underline text-ellieOrange",target:"_blank",children:""})]}),j.image_url&&u.jsx("img",{src:j.image_url,className:"mt-2 max-h-48 rounded-xl border object-contain"})]},j.id))})]}),u.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-soft",children:[u.jsx("h2",{className:"text-lg font-semibold text-ellieGray",children:"  "}),u.jsx("p",{className:"text-xs text-ellieGray/60",children:"  "}),u.jsx("div",{className:"mt-4 space-y-3",children:d?u.jsx("p",{className:"text-sm text-ellieGray/60",children:" ..."}):s.length===0?u.jsx("p",{className:"text-sm text-ellieGray/60",children:"   ."}):s.map(j=>{const S=w.get(j.id);return u.jsxs("div",{className:"rounded-xl border border-gray-200 p-4",children:[u.jsxs("p",{className:"font-semibold",children:[j.session_no,""]}),u.jsxs("p",{className:"text-xs text-ellieGray/70",children:[": ",(S==null?void 0:S.admin_name)??""]}),u.jsxs("p",{className:"text-xs text-ellieGray/70",children:[": ",(S==null?void 0:S.feedback)??" "]})]},j.id)})})]})]})]})}function sp(){if(typeof window>"u")return[];try{const t=localStorage.getItem("vodHistory");if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e:[]}catch(t){return console.warn("[VodMyPage] failed to read vod history",t),[]}}const Yi=t=>!t||typeof t!="object"?"":(t.category||t.categoryName||t.||t["category()"]||"").toString().trim(),Cl=t=>!t||typeof t!="object"?"":(t.title||t["title()"]||t.name||"").toString().trim();function zN(){const[t,e]=y.useState([]),[n,r]=y.useState(""),[s,i]=y.useState(""),[o,a]=y.useState(!0),[l,c]=y.useState(null),[d,h]=y.useState(()=>sp());y.useEffect(()=>{let v=!0;return a(!0),c(null),fetch("/.netlify/functions/getVOD").then(b=>{if(!b.ok)throw new Error("VOD   .");return b.json()}).then(b=>{if(!v)return;const m=Array.isArray(b)?b:Array.isArray(b==null?void 0:b.items)?b.items:[];e(m)}).catch(b=>{v&&(console.error("[VodMyPage] failed to load vod list",b),c(b))}).finally(()=>{v&&a(!1)}),()=>{v=!1}},[]),y.useEffect(()=>{h(sp())},[]);const f=y.useMemo(()=>{const v=new Set;return t.forEach(b=>{const m=Yi(b);m&&v.add(m)}),Array.from(v)},[t]),p=y.useMemo(()=>{const v=s.trim().toLowerCase();return t.filter(b=>{const m=Yi(b);if(!(n?m===n:!0))return!1;if(!v)return!0;const w=Cl(b).toLowerCase(),_=((b==null?void 0:b.description)||"").toString().toLowerCase();return w.includes(v)||_.includes(v)})},[t,n,s]),g=y.useMemo(()=>!d||d.length===0?[]:d.map(v=>typeof v=="string"?t.find(b=>b.id===v)??null:v&&typeof v=="object"?v.id?t.find(b=>b.id===v.id)??v:v:null).filter(Boolean).slice(0,5),[d,t]);return u.jsxs("div",{className:"mx-auto max-w-6xl space-y-6 p-6",children:[u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{type:"button",onClick:jx,className:"rounded-full bg-white px-4 py-2 text-sm font-semibold text-ellieGray shadow-sm transition-colors hover:bg-[#fef568]/40",children:""})}),u.jsxs("header",{className:"rounded-3xl bg-white px-6 py-5 shadow-soft",children:[u.jsx("h1",{className:"text-xl font-bold text-ellieGray",children:"VOD "}),u.jsx("p",{className:"mt-2 text-sm text-ellieGray/70",children:"    ."})]}),u.jsx("section",{className:"rounded-3xl bg-white p-6 shadow-soft",children:u.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{className:"flex flex-1 flex-col gap-2 md:flex-row md:items-center",children:[u.jsx("label",{className:"text-xs font-semibold text-ellieGray/70",htmlFor:"vod-category",children:""}),u.jsxs("select",{id:"vod-category",value:n,onChange:v=>r(v.target.value),className:"w-full rounded-full border border-ellieGray/20 px-4 py-2 text-sm text-ellieGray outline-none focus:border-ellieOrange md:w-auto",children:[u.jsx("option",{value:"",children:""}),f.map(v=>u.jsx("option",{value:v,children:v},v))]})]}),u.jsx("div",{className:"flex flex-1 items-center gap-2",children:u.jsx("input",{type:"search",placeholder:"VOD ",value:s,onChange:v=>i(v.target.value),className:"w-full rounded-full border border-ellieGray/20 px-4 py-2 text-sm text-ellieGray outline-none focus:border-ellieOrange"})})]})}),l?u.jsx("div",{className:"rounded-3xl bg-red-50 p-5 text-sm text-red-600 shadow-soft",children:"    .    ."}):null,u.jsxs("section",{className:"grid gap-4 md:grid-cols-3",children:[u.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-soft md:col-span-2",children:[u.jsx("header",{className:"flex items-center justify-between",children:u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-ellieGray",children:"VOD  "}),u.jsx("p",{className:"text-xs text-ellieGray/60",children:"   ."})]})}),u.jsx("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:o?u.jsx("p",{className:"text-sm text-ellieGray/60",children:"  ..."}):p.length===0?u.jsx("p",{className:"text-sm text-ellieGray/60",children:"    ."}):p.map(v=>u.jsxs("div",{className:"flex flex-col justify-between rounded-2xl border border-ellieGray/10 p-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-ellieGray",children:Cl(v)||"VOD "}),u.jsxs("p",{className:"mt-1 text-xs text-ellieGray/60",children:[": ",Yi(v)||""]}),v.description?u.jsx("p",{className:"mt-2 text-xs text-ellieGray/60",children:v.description}):null]}),u.jsx("div",{className:"mt-3 flex justify-end",children:u.jsx("a",{href:v.url||"#",className:"rounded-full bg-ellieOrange px-4 py-2 text-xs font-semibold text-white shadow-soft transition hover:bg-ellieOrange/90",children:" "})})]},v.id))})]}),u.jsxs("article",{className:"rounded-3xl bg-white p-6 shadow-soft",children:[u.jsx("header",{className:"flex items-center justify-between",children:u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-ellieGray",children:"  VOD"}),u.jsx("p",{className:"text-xs text-ellieGray/60",children:" 5 ."})]})}),u.jsx("div",{className:"mt-4 space-y-3",children:g.length===0?u.jsx("p",{className:"text-sm text-ellieGray/60",children:"   ."}):g.map((v,b)=>u.jsxs("div",{className:"rounded-2xl border border-ellieGray/10 p-4",children:[u.jsx("p",{className:"text-sm font-semibold text-ellieGray",children:Cl(v)||"VOD "}),u.jsxs("p",{className:"mt-1 text-xs text-ellieGray/60",children:[": ",Yi(v)||""]})]},`${v.id||b}`))})]})]})]})}const ip={admin:Tx,student:GN,vod:zN};function WN(t){return t?t.toString().toLowerCase():null}const KN=()=>{const t=Ue(),{user:e}=_n(),[n,r]=y.useState({ready:!1,role:null});y.useEffect(()=>{if(!e){t("/login");return}const i=WN(e.role);if(!i||!ip[i]){t("/login");return}r({ready:!0,role:i})},[e,t]);const s=y.useMemo(()=>!n.ready||!n.role?null:ip[n.role]??null,[n.ready,n.role]);return!n.ready||!s?null:u.jsx(s,{})},HN=t=>{if(!t)return"";try{const e=new Date(t);if(!Number.isNaN(e.getTime()))return e.toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"})}catch(e){console.warn("[Notices] failed to format date value",t,e)}return t};function qN(){const[t,e]=y.useState([]),[n,r]=y.useState(!0);y.useEffect(()=>{const i=new AbortController;return(async()=>{try{const a=await fetch("/api/global-list",{signal:i.signal});if(!a.ok)throw new Error("   .");let l={};try{l=await a.json()}catch{throw new Error("  .")}const d=(Array.isArray(l==null?void 0:l.data)?l.data:Array.isArray(l==null?void 0:l.notices)?l.notices:Array.isArray(l)?l:[]).map(h=>({id:String((h==null?void 0:h.id)??""),title:(h==null?void 0:h.title)??"",content:(h==null?void 0:h.content)??"",created_at:(h==null?void 0:h.created_at)??"",is_visible:!!(h!=null&&h.is_visible)})).filter(h=>h.id&&h.title);i.signal.aborted||e(d)}catch(a){if(i.signal.aborted)return;console.warn("[Notices] failed to fetch notices",a),e([])}finally{i.signal.aborted||r(!1)}})(),()=>{i.abort()}},[]);const s=y.useMemo(()=>t.filter(i=>i.is_visible),[t]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("header",{className:"rounded-3xl bg-white px-6 py-5 shadow-soft",children:[u.jsx("h1",{className:"text-xl font-bold text-ellieGray",children:""}),u.jsx("p",{className:"mt-2 text-sm text-ellieGray/70",children:"     ."})]}),u.jsx("section",{className:"space-y-4",children:n?u.jsx("article",{className:"rounded-3xl bg-white p-5 shadow-soft",children:u.jsx("p",{className:"text-sm text-ellieGray/70",children:"   ..."})}):s.length===0?u.jsx("article",{className:"rounded-3xl bg-white p-5 shadow-soft",children:u.jsx("p",{className:"text-sm text-ellieGray/70",children:"  ."})}):s.map(i=>u.jsxs("article",{className:"rounded-3xl bg-white p-5 shadow-soft",children:[u.jsxs("div",{className:"flex items-center justify-between gap-4",children:[u.jsx("h2",{className:"text-lg font-semibold text-ellieGray",children:i.title}),u.jsx("time",{className:"text-xs text-ellieGray/60",dateTime:i.created_at,children:HN(i.created_at)})]}),u.jsx("p",{className:"mt-2 whitespace-pre-wrap text-sm leading-relaxed text-ellieGray/70",children:i.content}),u.jsx("div",{className:"mt-3 flex items-center gap-2 text-xs text-ellieGray/60",children:u.jsx("span",{children:"    "})})]},i.id))})]})}function JN({classId:t}){return t?u.jsx("nav",{className:"sticky top-0 z-10 rounded-3xl bg-white/90 p-2 shadow-soft backdrop-blur",children:u.jsxs("ul",{className:"flex flex-wrap gap-2",children:[u.jsx("li",{className:"min-w-[120px] flex-1",children:u.jsx(ar,{to:`/classroom/${t}/video`,className:({isActive:e})=>`flex w-full items-center justify-center gap-2 rounded-2xl px-4 py-3 text-sm font-semibold transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ellieYellow/80 ${e?"bg-ellieYellow text-ellieGray shadow-soft":"bg-transparent text-[#8e8e8e] hover:bg-ellieYellow/10"}`,children:" "})}),u.jsx("li",{className:"min-w-[120px] flex-1",children:u.jsx(ar,{to:`/classroom/${t}/material`,className:({isActive:e})=>`flex w-full items-center justify-center gap-2 rounded-2xl px-4 py-3 text-sm font-semibold transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ellieYellow/80 ${e?"bg-ellieYellow text-ellieGray shadow-soft":"bg-transparent text-[#8e8e8e] hover:bg-ellieYellow/10"}`,children:""})}),u.jsx("li",{className:"min-w-[120px] flex-1",children:u.jsx(ar,{to:`/classroom/${t}/notice`,className:({isActive:e})=>`flex w-full items-center justify-center gap-2 rounded-2xl px-4 py-3 text-sm font-semibold transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ellieYellow/80 ${e?"bg-ellieYellow text-ellieGray shadow-soft":"bg-transparent text-[#8e8e8e] hover:bg-ellieYellow/10"}`,children:" "})}),u.jsx("li",{className:"min-w-[120px] flex-1",children:u.jsx(ar,{to:`/classroom/${t}/assignment`,className:({isActive:e})=>`flex w-full items-center justify-center gap-2 rounded-2xl px-4 py-3 text-sm font-semibold transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ellieYellow/80 ${e?"bg-ellieYellow text-ellieGray shadow-soft":"bg-transparent text-[#8e8e8e] hover:bg-ellieYellow/10"}`,children:""})}),u.jsx("li",{className:"min-w-[120px] flex-1",children:u.jsx(ar,{to:`/classroom/${t}/feedback`,className:({isActive:e})=>`flex w-full items-center justify-center gap-2 rounded-2xl px-4 py-3 text-sm font-semibold transition-colors duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ellieYellow/80 ${e?"bg-ellieYellow text-ellieGray shadow-soft":"bg-transparent text-[#8e8e8e] hover:bg-ellieYellow/10"}`,children:""})})]})}):null}function YN(){const{classId:t}=wn();return t?u.jsxs("div",{children:[u.jsx(JN,{classId:t}),u.jsx("div",{style:{marginTop:"24px"},children:u.jsx(_d,{})})]}):null}function Od({tab:t,Component:e}){const{classId:n}=wn(),[r,s]=y.useState({contents:[],loading:!1,error:""});return y.useEffect(()=>{if(!n)return;const i=new AbortController;return(async()=>{s({contents:[],loading:!0,error:""});try{let{data:a,error:l}=await F.from("classroom_content").select("*, classes(*)").eq("classroom_id",n).order("created_at",{ascending:!1});if(l)throw l;const c=(a==null?void 0:a.map(d=>({...d,classroomId:d.classroom_id??d.classroomId??d.classId??null})).filter(d=>{const h=(d.type??d.category??"").toLowerCase();return t==="video"?h==="video"||h==="":t==="material"?h==="material"||h==="":t==="notice"?h==="notice"||h==="":t==="feedback"?h==="feedback"||h==="":!1}))??[];s({contents:c,loading:!1,error:""})}catch(a){i.signal.aborted||s({contents:[],loading:!1,error:(a==null?void 0:a.message)||"  ."})}})(),()=>i.abort()},[n,t]),n?u.jsx(e,{courseId:n,classId:n,contents:r.contents,isLoadingContents:r.loading,contentError:r.error}):null}const QN=({assignments:t})=>{const[e,n]=y.useState(null),r=y.useMemo(()=>[...t].sort((i,o)=>i.created_at>o.created_at?-1:1),[t]),s=i=>{if(!i)return"";const o=new Date(i);return isNaN(o.getTime())?"":new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(o)};return r.length?u.jsxs(u.Fragment,{children:[u.jsx("ul",{className:"space-y-3",children:r.map(i=>u.jsx("li",{className:"bg-ivory/80 rounded-xl p-4",children:u.jsxs("div",{className:"flex flex-col gap-2 text-xs",children:[u.jsxs("span",{className:"font-semibold text-sm",children:[i.session_no,"  ",i.status==="success"?"":""]}),u.jsx("span",{children:s(i.created_at)}),i.type==="image"&&i.image_url&&u.jsx("button",{className:"text-left",type:"button",onClick:()=>n(i.image_url??""),children:u.jsx("img",{src:i.image_url,className:"rounded-xl max-h-40 object-contain"})}),i.type==="link"&&i.link_url&&u.jsx("a",{href:i.link_url,target:"_blank",className:"text-[#d98200] underline text-sm font-semibold",rel:"noreferrer",children:" "}),i.type==="text"&&i.text_content&&u.jsx("span",{className:"text-sm text-ellieGray",children:i.text_content}),!i.image_url&&!i.link_url&&!i.text_content&&u.jsx("span",{className:"text-ellieGray/60 text-sm",children:"  ."})]})},i.id))}),e&&u.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",onClick:()=>n(null),children:u.jsx("div",{className:"bg-white p-3 rounded-xl max-w-3xl max-h-[90vh] overflow-auto",children:u.jsx("img",{src:e,className:"max-h-[80vh] max-w-full object-contain"})})})]}):u.jsx("p",{className:"text-sm",children:"  ."})},XN=({totalSessions:t,completedSessions:e})=>{const n=Math.max(t,1),r=Math.min(Math.max(e,0),n),s=Math.round(r/n*100);return u.jsxs("div",{className:"rounded-2xl bg-white/70 px-5 py-4 shadow-soft",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2 text-sm font-semibold text-ellieGray",children:[u.jsx("span",{children:" "}),u.jsxs("span",{children:[r," / ",n," (",s,"%)"]})]}),u.jsx("div",{className:"w-full h-3 bg-ivory rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-[#ffd331]",style:{width:`${s}%`}})})]})};function Cx(t){return["",""].includes(t)?10:["",""].includes(t)?8:["",""].includes(t)?4:["","","",""].includes(t)?1:15}const ZN=({className:t,onSubmit:e,allowSubmission:n,submitting:r,submitError:s,statusMessage:i})=>{const o=y.useMemo(()=>Cx(t),[t]),[a,l]=y.useState(1),[c,d]=y.useState("image"),[h,f]=y.useState(""),[p,g]=y.useState(""),[v,b]=y.useState(""),[m,x]=y.useState(""),w=y.useMemo(()=>Array.from({length:o},(E,C)=>C+1),[o]);So.useEffect(()=>{a>o&&l(1)},[o,a]);const _=y.useMemo(()=>c==="image"?!!v:c==="link"?!!h.trim():c==="text"?!!p.trim():!1,[c,v,h,p]),j=E=>{var I;const C=(I=E.target.files)==null?void 0:I[0];if(!C)return;const k=new FileReader;k.onload=()=>{b(k.result),x(C.name)},k.readAsDataURL(C)},S=E=>{E.preventDefault(),!(!n||!_)&&e({sessionNo:a,assignmentType:c,linkUrl:h,textContent:p,imageBase64:v})},N=()=>{f(""),g(""),b(""),x("")};return So.useEffect(()=>{N()},[c]),u.jsxs("form",{onSubmit:S,className:"rounded-2xl bg-white/70 px-5 py-6 shadow-soft space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-ellieGray",children:" "}),u.jsx("p",{className:"text-sm text-ellieGray/70",children:",    ."})]}),o>1&&u.jsxs("div",{className:"flex gap-2 items-center",children:[u.jsx("label",{className:"text-sm font-semibold",children:" "}),u.jsx("select",{className:"border rounded-xl px-3 py-2",value:a,onChange:E=>l(Number(E.target.value)),children:w.map(E=>u.jsxs("option",{value:E,children:[E,""]},E))})]}),u.jsxs("div",{className:"flex gap-3 text-sm font-semibold text-ellieGray",children:[u.jsxs("label",{className:"flex items-center gap-1",children:[u.jsx("input",{type:"radio",name:"assignment_type",value:"image",checked:c==="image",onChange:()=>d("image")}),""]}),u.jsxs("label",{className:"flex items-center gap-1",children:[u.jsx("input",{type:"radio",name:"assignment_type",value:"link",checked:c==="link",onChange:()=>d("link")}),""]}),u.jsxs("label",{className:"flex items-center gap-1",children:[u.jsx("input",{type:"radio",name:"assignment_type",value:"text",checked:c==="text",onChange:()=>d("text")}),""]})]}),c==="image"&&u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold",children:" "}),u.jsx("input",{type:"file",accept:"image/*",onChange:j}),m&&u.jsx("p",{className:"text-xs",children:m})]}),c==="link"&&u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold",children:" "}),u.jsx("input",{className:"border rounded-xl px-3 py-2 w-full",type:"url",value:h,onChange:E=>f(E.target.value)})]}),c==="text"&&u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-semibold",children:" "}),u.jsx("textarea",{className:"border rounded-xl px-3 py-2 w-full",value:p,onChange:E=>g(E.target.value)})]}),s&&u.jsx("p",{className:"text-red-500 text-sm",children:s}),i&&u.jsx("p",{className:"text-sm",children:i}),u.jsx("button",{type:"submit",disabled:r||!n||!_,className:"bg-[#ffd331] rounded-2xl px-4 py-2 font-semibold text-ellieGray shadow-soft w-full",children:r?" ...":""})]})},ek=({completed:t,certificateUrl:e})=>t?u.jsxs("div",{className:"rounded-2xl bg-white/70 px-5 py-4 shadow-soft flex flex-col gap-2",children:[u.jsx("p",{className:"text-sm font-semibold text-ellieGray",children:"   !  ."}),e?u.jsx("a",{href:e,target:"_blank",rel:"noreferrer",className:"bg-[#ffd331] rounded-2xl px-4 py-2 font-semibold text-ellieGray text-center shadow-soft",children:" "}):u.jsx("p",{className:"text-xs text-ellieGray/70",children:"  ..."})]}):null,Px=async(t,e={})=>{var i;const n=((i=Ma())==null?void 0:i.accessToken)??(typeof window<"u"?localStorage.getItem("token"):null),r=new Headers(e.headers);r.set("Accept","application/json"),e.body instanceof FormData||r.set("Content-Type","application/json"),n&&r.set("Authorization",`Bearer ${n}`);const s=await fetch(t,{...e,headers:r});if(!s.ok){const o=await s.text()||s.statusText||" .";throw new Error(o)}return s.status===204?null:await s.json()},tk=async t=>(await Px("/api/assignments-submit",{method:"POST",body:JSON.stringify(t)})).assignment,Ax=async t=>{const e=new URLSearchParams;e.set("class_id",String(t.class_id)),t.student_id&&e.set("student_id",t.student_id),t.session_no&&e.set("session_no",String(t.session_no));const r=`/api/assignments-list?${e.toString()}`;return(await Px(r,{method:"GET"})).assignments??[]};function nk({classId:t}){const e=y.useMemo(()=>Ma(),[]),n=(e==null?void 0:e.id)??null,r=y.useCallback(()=>{if(typeof window>"u")return null;const L=localStorage.getItem("token");return L?{Authorization:`Bearer ${L}`}:null},[]),[s,i]=y.useState([]),[o,a]=y.useState(!1),[l,c]=y.useState(""),[d,h]=y.useState(""),[f,p]=y.useState(!1),[g,v]=y.useState(""),[b,m]=y.useState(null),[x,w]=y.useState(""),[_,j]=y.useState(!1),[S,N]=y.useState(""),E=y.useMemo(()=>Cx((b==null?void 0:b.name)??(b==null?void 0:b.code)??""),[b]),C=y.useMemo(()=>new Set(s.map(L=>L.session_no)).size,[s]),k=y.useMemo(()=>E>0&&C===E&&E>0,[C,E]),I=y.useCallback(async()=>{j(!0),w("");try{const L=r(),z=await fetch(`/api/class-info-get?id=${encodeURIComponent(t)}`,{...L?{headers:L}:{}});if(!z.ok)throw new Error(`API error: ${z.status}`);const K=await z.json(),P=K.classInfo??K.data??K.class;if(!P)throw new Error("NO_CLASS_INFO");m(P)}catch(L){console.error(L),w("   .    ."),m(null)}finally{j(!1)}},[t,r]);y.useEffect(()=>{I()},[I]);const ee=y.useMemo(()=>{if(!(b!=null&&b.start_date)||!(b!=null&&b.end_date))return!0;const L=new Date,z=new Date(b.start_date),K=new Date(b.end_date);return isNaN(z.getTime())||isNaN(K.getTime())?!0:L>=z&&L<=K},[b]),D=y.useCallback(async()=>{if(n){a(!0),h("");try{const L=await Ax({class_id:Number(t),student_id:n});i(L??[])}catch{h("     ."),i([])}finally{a(!1)}}},[n,t]);y.useEffect(()=>{D()},[D]),y.useEffect(()=>{(async()=>{if(!(!k||!n||!t)&&!S)try{const z=r(),K=await fetch(`/api/certificate-generate?class_id=${encodeURIComponent(t)}&user_id=${encodeURIComponent(n)}`,{...z?{headers:z}:{}});if(K.ok){const P=await K.json();N(P.url??"")}}catch(z){console.error(z)}})()},[S,t,r,k,n]);const G=async L=>{if(c(""),v(""),!ee){c("  .");return}if(!n){c(" .");return}p(!0);const z={class_id:Number(t),student_id:n,session_no:L.sessionNo,content_type:L.assignmentType,link_url:L.assignmentType==="link"?L.linkUrl:null,text_content:L.assignmentType==="text"?L.textContent:null,image_base64:L.assignmentType==="image"?L.imageBase64:null};try{await tk(z),v(" ."),await D()}catch{c("  ")}finally{p(!1)}};return u.jsxs("div",{className:"space-y-6",children:[_&&u.jsx("p",{className:"text-sm text-ellieGray/70",children:"   ..."}),x&&u.jsx("p",{className:"text-red-500 text-sm",children:x}),E>1&&u.jsx(XN,{totalSessions:E,completedSessions:C}),u.jsx(ZN,{className:(b==null?void 0:b.name)??"",onSubmit:G,allowSubmission:ee,submitting:f,submitError:l,statusMessage:g}),k&&u.jsx(ek,{completed:k,certificateUrl:S}),u.jsxs("section",{className:"rounded-2xl bg-white/70 px-5 py-6 shadow-soft",children:[u.jsx("h3",{className:"font-semibold mb-3",children:" "}),o&&u.jsx("p",{className:"text-sm",children:" ..."}),d&&u.jsx("p",{className:"text-red-500",children:d}),!o&&u.jsx(QN,{assignments:s})]})]})}const rk=t=>{if(!t||typeof t!="object")return null;const e=[t.url,t.videoUrl,t.link,t.linkUrl,t.streamUrl];for(const n of e)if(typeof n=="string"&&n.trim().length>0)return n;return null},sk=t=>{if(!t)return"";try{const e=new Date(t);return Number.isNaN(e.getTime())?"":new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(e)}catch(e){return console.error("[VideoTab] Failed to format date",e),""}},ik=t=>Array.isArray(t)?t.map((e,n)=>{const r=(e==null?void 0:e.id)??(e==null?void 0:e.content_id)??(e==null?void 0:e.contentId)??`video-${n}`,s=(e==null?void 0:e.classroom_id)??(e==null?void 0:e.classroomId)??(e==null?void 0:e.classId)??null,i=(e==null?void 0:e.title)??(e==null?void 0:e.name)??(e==null?void 0:e.content_title)??(e==null?void 0:e.contentTitle)??` ${n+1}`,o=(e==null?void 0:e.description)??(e==null?void 0:e.summary)??(e==null?void 0:e.content)??(e==null?void 0:e.text)??"",a=(e==null?void 0:e.file_url)??(e==null?void 0:e.fileUrl)??(e==null?void 0:e.url)??(e==null?void 0:e.link)??(e==null?void 0:e.linkUrl)??null,l=(e==null?void 0:e.created_at)??(e==null?void 0:e.createdAt)??(e==null?void 0:e.published_at)??(e==null?void 0:e.publishedAt)??null;return{id:r,title:typeof i=="string"?i:String(i??""),description:typeof o=="string"?o:o!=null?String(o):"",classroomId:s,url:a,createdAt:l}}):[];function ok({courseName:t,classId:e}){const[n,r]=y.useState([]),[s,i]=y.useState(!1),[o,a]=y.useState("");y.useEffect(()=>{if(!e)return;let c=!0;return(async()=>{i(!0),a("");try{const{data:h,error:f}=await F.from("classroom_videos").select("*, classes(*)").eq("classroom_id",e).order("order_num",{ascending:!0});if(f)throw f;c&&r(ik(h??[]))}catch(h){c&&a((h==null?void 0:h.message)||"   .")}finally{c&&i(!1)}})(),()=>{c=!1}},[e]);const l=y.useMemo(()=>t?`${t}    .`:"   .",[t]);return u.jsxs("div",{className:"space-y-4 text-ellieGray",children:[u.jsxs("header",{className:"space-y-2",children:[u.jsx("h2",{className:"text-lg font-semibold",children:" "}),u.jsx("p",{className:"text-sm leading-relaxed text-ellieGray/80",children:l})]}),o?u.jsx("p",{className:"rounded-2xl bg-red-50 px-4 py-3 text-sm text-red-600 shadow-soft",children:o}):null,s?u.jsx("p",{className:"rounded-2xl bg-white/70 px-4 py-3 text-center text-sm text-ellieGray/70 shadow-soft",children:"   "}):null,!s&&!o?n.length>0?u.jsx("ul",{className:"space-y-4",children:n.map((c,d)=>{const h=rk(c),f=typeof(c==null?void 0:c.description)=="string"&&c.description.trim().length>0?c.description:"",p=sk(c==null?void 0:c.createdAt);return u.jsxs("li",{className:"rounded-2xl bg-white/70 px-5 py-6 shadow-soft",children:[u.jsx("h3",{className:"text-base font-semibold text-ellieGray",children:(c==null?void 0:c.title)??` ${d+1}`}),f?u.jsx("p",{className:"mt-2 text-sm leading-relaxed text-ellieGray/70",children:f}):null,h?u.jsx("a",{href:h,target:"_blank",rel:"noreferrer",className:"mt-4 inline-flex items-center gap-1 text-sm font-semibold text-ellieYellow hover:underline",children:" "}):u.jsx("p",{className:"mt-4 text-sm text-ellieGray/60",children:"   ."}),p?u.jsxs("p",{className:"mt-3 text-xs text-ellieGray/50",children:[": ",p]}):null]},(c==null?void 0:c.id)??`video-${d}`)})}):u.jsx("div",{className:"rounded-2xl bg-white/70 px-5 py-6 text-center shadow-soft",children:u.jsx("p",{className:"text-sm leading-relaxed text-ellieGray/70",children:"  ."})}):null]})}const ak=t=>{if(!t||typeof t!="object")return null;const e=[t.fileUrl,t.file_url,t.url,t.link,t.linkUrl];for(const n of e)if(typeof n=="string"&&n.trim().length>0)return n;return null},lk=t=>{if(!t)return"";try{const e=new Date(t);return Number.isNaN(e.getTime())?"":new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(e)}catch(e){return console.error("[MaterialTab] Failed to format date",e),""}},uk=t=>Array.isArray(t)?t.map((e,n)=>{const r=(e==null?void 0:e.id)??(e==null?void 0:e.content_id)??(e==null?void 0:e.contentId)??`material-${n}`,s=(e==null?void 0:e.classroom_id)??(e==null?void 0:e.classroomId)??(e==null?void 0:e.classId)??null,i=(e==null?void 0:e.title)??(e==null?void 0:e.name)??(e==null?void 0:e.fileName)??(e==null?void 0:e.content_title)??` ${n+1}`,o=(e==null?void 0:e.description)??(e==null?void 0:e.summary)??(e==null?void 0:e.content)??(e==null?void 0:e.text)??"",a=(e==null?void 0:e.created_at)??(e==null?void 0:e.createdAt)??(e==null?void 0:e.uploaded_at)??(e==null?void 0:e.uploadedAt);return{id:r,title:typeof i=="string"?i:String(i??""),description:typeof o=="string"?o:o!=null?String(o):"",classroomId:s,link:ak(e),createdAt:a??null}}):[];function ck({courseName:t,classId:e}){const[n,r]=y.useState([]),[s,i]=y.useState(!1),[o,a]=y.useState("");y.useEffect(()=>{if(!e)return;let c=!0;return(async()=>{i(!0),a("");try{const{data:h,error:f}=await F.from("classroom_materials").select("*, classes(*)").eq("classroom_id",e).order("created_at",{ascending:!1});if(f)throw f;c&&r(uk(h??[]))}catch(h){c&&a((h==null?void 0:h.message)||"  .")}finally{c&&i(!1)}})(),()=>{c=!1}},[e]);const l=y.useMemo(()=>t?`${t}     .`:"    .",[t]);return u.jsxs("div",{className:"space-y-4 text-ellieGray",children:[u.jsxs("header",{className:"space-y-2",children:[u.jsx("h2",{className:"text-lg font-semibold",children:" "}),u.jsx("p",{className:"text-sm leading-relaxed text-ellieGray/80",children:l})]}),o?u.jsx("p",{className:"rounded-2xl bg-red-50 px-4 py-3 text-sm text-red-600 shadow-soft",children:o}):null,s?u.jsx("p",{className:"rounded-2xl bg-white/70 px-4 py-3 text-center text-sm text-ellieGray/70 shadow-soft",children:"  "}):null,!s&&!o?n.length>0?u.jsx("ul",{className:"space-y-4",children:n.map((c,d)=>{const h=lk(c==null?void 0:c.createdAt);return u.jsxs("li",{className:"rounded-2xl bg-white/70 px-5 py-6 shadow-soft",children:[u.jsx("h3",{className:"text-base font-semibold text-ellieGray",children:(c==null?void 0:c.title)??` ${d+1}`}),c!=null&&c.description?u.jsx("p",{className:"mt-2 text-sm leading-relaxed text-ellieGray/70",children:c.description}):null,c!=null&&c.link?u.jsx("a",{href:c.link,target:"_blank",rel:"noreferrer",className:"mt-4 inline-flex items-center gap-1 text-sm font-semibold text-ellieYellow hover:underline",children:" "}):u.jsx("p",{className:"mt-4 text-sm text-ellieGray/60",children:"  ."}),h?u.jsxs("p",{className:"mt-3 text-xs text-ellieGray/50",children:[": ",h]}):null]},(c==null?void 0:c.id)??`material-${d}`)})}):u.jsx("div",{className:"rounded-2xl bg-white/70 px-5 py-6 text-center shadow-soft",children:u.jsx("p",{className:"text-sm leading-relaxed text-ellieGray/70",children:"   ."})}):null]})}const dk=t=>{if(!t)return"";try{const e=new Date(t);return Number.isNaN(e.getTime())?"":new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(e)}catch(e){return console.error("[NoticeTab] Failed to format date",e),""}},hk=t=>Array.isArray(t)?t.map((e,n)=>{const r=(e==null?void 0:e.id)??(e==null?void 0:e.content_id)??(e==null?void 0:e.contentId)??`notice-${n}`,s=(e==null?void 0:e.classroom_id)??(e==null?void 0:e.classroomId)??(e==null?void 0:e.classId)??null,i=(e==null?void 0:e.title)??(e==null?void 0:e.name)??(e==null?void 0:e.content_title)??` ${n+1}`,o=(e==null?void 0:e.description)??(e==null?void 0:e.content)??(e==null?void 0:e.text)??"",a=(e==null?void 0:e.author)??(e==null?void 0:e.writer)??(e==null?void 0:e.creator)??"",l=(e==null?void 0:e.created_at)??(e==null?void 0:e.createdAt)??(e==null?void 0:e.published_at)??(e==null?void 0:e.publishedAt);return{id:r,title:typeof i=="string"?i:String(i??""),content:typeof o=="string"?o:o!=null?String(o):"",classroomId:s,author:typeof a=="string"?a:a!=null?String(a):"",createdAt:l??null}}):[];function fk({courseName:t,classId:e}){const[n,r]=y.useState([]),[s,i]=y.useState(!1),[o,a]=y.useState("");y.useEffect(()=>{if(!e)return;let c=!0;return(async()=>{i(!0),a("");try{const{data:h,error:f}=await F.from("classroom_notices").select("*, classes(*)").eq("classroom_id",e).order("created_at",{ascending:!1});if(f)throw f;c&&r(hk(h??[]))}catch(h){c&&a((h==null?void 0:h.message)||"  .")}finally{c&&i(!1)}})(),()=>{c=!1}},[e]);const l=y.useMemo(()=>t?`${t}    .`:"     .",[t]);return u.jsxs("div",{className:"space-y-4 text-ellieGray",children:[u.jsxs("header",{className:"space-y-2",children:[u.jsx("h2",{className:"text-lg font-semibold",children:""}),u.jsx("p",{className:"text-sm leading-relaxed text-ellieGray/80",children:l})]}),o?u.jsx("p",{className:"rounded-2xl bg-red-50 px-4 py-3 text-sm text-red-600 shadow-soft",children:o}):null,s?u.jsx("p",{className:"rounded-2xl bg-white/70 px-4 py-3 text-center text-sm text-ellieGray/70 shadow-soft",children:"  "}):null,!s&&!o?n.length>0?u.jsx("ul",{className:"space-y-4",children:n.map((c,d)=>{const h=dk(c==null?void 0:c.createdAt);return u.jsx("li",{className:"rounded-2xl bg-white/70 px-5 py-6 shadow-soft",children:u.jsxs("div",{className:"space-y-2",children:[u.jsx("h3",{className:"text-base font-semibold text-ellieGray",children:(c==null?void 0:c.title)??` ${d+1}`}),c!=null&&c.author?u.jsxs("p",{className:"text-xs font-medium text-ellieGray/60",children:[": ",c.author]}):null,c!=null&&c.content?u.jsx("p",{className:"whitespace-pre-line text-sm leading-relaxed text-ellieGray/80",children:c.content}):u.jsx("p",{className:"text-sm text-ellieGray/60",children:"   ."}),h?u.jsxs("p",{className:"text-xs text-ellieGray/50",children:[": ",h]}):null]})},(c==null?void 0:c.id)??`notice-${d}`)})}):u.jsx("div",{className:"rounded-2xl bg-white/70 px-5 py-6 text-center shadow-soft",children:u.jsxs("p",{className:"text-sm leading-relaxed text-ellieGray/70",children:[" ",t??"","    .     ."]})}):null]})}const pk=t=>{if(!t)return"";try{const e=new Date(t);return Number.isNaN(e.getTime())?"":new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(e)}catch(e){return console.error("[FeedbackTab] Failed to format date",e),""}},mk=(t,e)=>{const n=[t==null?void 0:t.id,t==null?void 0:t.feedbackId,t==null?void 0:t.assignmentId,t==null?void 0:t.title];for(const r of n)if(r)return r;return`feedback-${e}`};function gk({courseId:t,courseName:e}){const[n,r]=y.useState([]),[s,i]=y.useState(!1),[o,a]=y.useState(null);y.useEffect(()=>{r([]),i(!1),a(null)},[t]);const l=y.useMemo(()=>e?`${e}      .`:"    .",[e]);return u.jsxs("div",{className:"space-y-4 text-ellieGray",children:[u.jsxs("header",{className:"space-y-2",children:[u.jsx("h2",{className:"text-lg font-semibold",children:" "}),u.jsx("p",{className:"text-sm leading-relaxed text-ellieGray/80",children:l})]}),!s&&!o?n.length>0?u.jsx("ul",{className:"space-y-4",children:n.map((c,d)=>{const h=mk(c,d),f=typeof(c==null?void 0:c.content)=="string"&&c.content.trim().length>0?c.content:typeof(c==null?void 0:c.comment)=="string"?c.comment:"",p=typeof(c==null?void 0:c.teacher)=="string"?c.teacher:typeof(c==null?void 0:c.instructor)=="string"?c.instructor:(c==null?void 0:c.author)??"",g=typeof(c==null?void 0:c.assignmentTitle)=="string"?c.assignmentTitle:typeof(c==null?void 0:c.title)=="string"?c.title:"",v=pk((c==null?void 0:c.createdAt)??(c==null?void 0:c.submittedAt)??(c==null?void 0:c.updatedAt));return u.jsx("li",{className:"rounded-2xl bg-white/70 px-5 py-6 shadow-soft",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-base font-semibold text-ellieGray",children:g?`${g} `:` ${d+1}`}),p?u.jsxs("p",{className:"text-xs font-medium text-ellieGray/60",children:[": ",p]}):null]}),f?u.jsx("p",{className:"whitespace-pre-line text-sm leading-relaxed text-ellieGray/80",children:f}):u.jsx("p",{className:"text-sm text-ellieGray/60",children:"   ."}),v?u.jsxs("p",{className:"text-xs text-ellieGray/50",children:[": ",v]}):null]})},h)})}):u.jsx("div",{className:"rounded-2xl bg-white/70 px-5 py-6 text-center shadow-soft",children:u.jsxs("p",{className:"text-sm leading-relaxed text-ellieGray/70",children:[" ",e??"","    .       ."]})}):null]})}function yk(){return u.jsx(Od,{tab:"video",Component:ok})}function vk(){return u.jsx(Od,{tab:"material",Component:ck})}function xk(){return u.jsx(Od,{tab:"notice",Component:fk})}function wk(){const{classId:t}=wn();return t?u.jsx(gk,{courseId:t,classId:t}):null}function bk(){const{classId:t}=wn();return t?u.jsx(nk,{classId:t}):null}const _k=[{label:" ",to:"/admin/dashboard"},{label:" ",to:"/admin/lessons"},{label:" ",to:"/admin/students"},{label:" ",to:"/admin/assignments"},{label:"  (Classrooms)",to:"/admin/classrooms",icon:kN},{label:"  ",to:"/admin/global"},{label:"VOD ",to:"/admin/vod"}],Sk=({isOpen:t,onClose:e})=>{const n=zt(),r=n.pathname.startsWith("/admin/lessons"),s=n.pathname.startsWith("/admin/classrooms");return u.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 w-72 transform bg-[#fffaf0] px-6 pb-8 pt-10 shadow-2xl transition-transform duration-200 ease-in-out ${t?"translate-x-0":"-translate-x-full md:translate-x-0"}`,children:[u.jsxs("div",{className:"mb-10 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#c18f1f]",children:"Ellie's Room"}),u.jsx("p",{className:"text-xl font-black text-[#3f3a37]",children:"Admin Dashboard"})]}),u.jsx("button",{type:"button",onClick:e,className:"flex h-9 w-9 items-center justify-center rounded-full bg-white text-lg shadow-md md:hidden","aria-label":" ",children:""})]}),u.jsx("nav",{className:"space-y-2",children:_k.map(i=>u.jsxs(ar,{to:i.to,className:({isActive:o})=>`flex items-center justify-between rounded-2xl px-4 py-3 text-sm font-semibold transition-all hover:bg-[#ffe8a3] ${i.to.startsWith("/admin/lessons")&&r||i.to.startsWith("/admin/classrooms")&&s||o?"bg-[#ffd331] text-[#3f3a37] shadow-md":"text-[#5c5246]"}`,onClick:e,children:[u.jsxs("span",{className:"flex items-center gap-2",children:[i.icon?u.jsx(i.icon,{className:"h-4 w-4"}):null,i.label]}),u.jsx("span",{className:"text-sm",children:""})]},i.to))})]})},Rx=({text:t=" ..."})=>u.jsxs("div",{className:"flex min-h-[40vh] flex-col items-center justify-center gap-3 text-ellieGray",children:[u.jsx("div",{className:"h-10 w-10 animate-spin rounded-full border-4 border-ellieYellow border-t-transparent","aria-hidden":!0}),t?u.jsx("p",{className:"text-sm font-medium",children:t}):null]}),jk={"/admin/dashboard":" ","/admin/lessons":" ","/admin/lessons/new":" ","/admin/students":" ","/admin/assignments":" "},Ek=()=>{const[t,e]=y.useState(!1),n=Ue(),r=zt(),{user:s,loading:i}=_n(),o=async()=>{await F.auth.signOut(),Dr(),n("/login",{replace:!0})};if(i)return u.jsx(Rx,{text:" ..."});if(!s)return u.jsx(Rs,{to:"/login",replace:!0});if(s.role!=="admin")return alert("  ."),u.jsx(Rs,{to:"/my",replace:!0});const a=jk[r.pathname]??" ";return u.jsx("div",{className:"min-h-screen bg-[#f7f3ea] text-[#3f3a37]",children:u.jsxs("div",{className:"flex",children:[u.jsx(Sk,{isOpen:t,onClose:()=>e(!1)}),t?u.jsx("button",{type:"button","aria-label":" ",className:"fixed inset-0 z-30 bg-black/30 md:hidden",onClick:()=>e(!1)}):null,u.jsxs("div",{className:"flex min-h-screen flex-1 flex-col",children:[u.jsxs("header",{className:"flex items-center justify-between gap-4 border-b border-[#efd9b4] bg-[#fffaf0] px-6 py-4 shadow-sm",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{type:"button",className:"flex h-11 w-11 items-center justify-center rounded-2xl bg-white text-xl shadow-md md:hidden",onClick:()=>e(!0),"aria-label":" ",children:""}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#c18f1f]",children:"Admin"}),u.jsx("h1",{className:"text-xl font-extrabold text-[#3f3a37]",children:a})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("button",{type:"button",onClick:()=>n("/"),className:"rounded-full bg-white px-4 py-2 text-sm font-semibold text-[#3f3a37] shadow-md transition-colors hover:bg-[#fff2c2]",children:""}),u.jsx("button",{type:"button",onClick:o,className:"rounded-full bg-[#ffd331] px-4 py-2 text-sm font-semibold text-[#3f3a37] shadow-md transition-colors hover:bg-[#e6bd2c]",children:""})]})]}),u.jsx("main",{className:"flex-1 overflow-y-auto bg-[#f7f3ea] p-6 md:p-8",children:u.jsx("div",{className:"mx-auto w-full max-w-6xl space-y-6",children:u.jsx(_d,{})})})]})]})})},Nk=[{title:" ",description:"    .",to:"/admin/lessons",action:"  "},{title:" ",description:"/  VOD  .",to:"/admin/students",action:"  "},{title:"",description:"    .",to:"/admin/assignments",action:" "}],kk=()=>u.jsxs("div",{className:"space-y-6",children:[u.jsxs("section",{className:"rounded-3xl bg-white px-6 py-5 shadow-xl shadow-black/5",children:[u.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-[#c18f1f]",children:"Welcome back"}),u.jsx("h2",{className:"mt-1 text-2xl font-black text-[#3f3a37]",children:"  "}),u.jsx("p",{className:"mt-2 text-sm text-[#6a5c50]",children:"       ."})]}),u.jsx("section",{className:"grid gap-4 md:grid-cols-3",children:Nk.map(t=>u.jsxs("div",{className:"flex flex-col rounded-3xl bg-white p-6 shadow-xl shadow-black/5",children:[u.jsx("p",{className:"text-sm font-bold text-[#3f3a37]",children:t.title}),u.jsx("p",{className:"mt-2 flex-1 text-sm text-[#6a5c50]",children:t.description}),u.jsx(De,{to:t.to,className:"mt-4 inline-flex items-center justify-center rounded-full bg-[#ffd331] px-4 py-2 text-sm font-semibold text-[#3f3a37] shadow-md transition hover:bg-[#f3c623]",children:t.action})]},t.to))}),u.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-black/5",children:[u.jsx("h3",{className:"text-lg font-extrabold text-[#3f3a37]",children:" "}),u.jsxs("ul",{className:"mt-3 grid gap-3 md:grid-cols-2",children:[u.jsxs("li",{className:"flex items-center gap-3 rounded-2xl bg-[#fff7d6] px-4 py-3 text-sm text-[#5c5246] shadow-inner shadow-[#ffeab2]",children:[u.jsx("span",{className:"text-lg",children:""}),u.jsx("span",{children:"       ."})]}),u.jsxs("li",{className:"flex items-center gap-3 rounded-2xl bg-[#fff7d6] px-4 py-3 text-sm text-[#5c5246] shadow-inner shadow-[#ffeab2]",children:[u.jsx("span",{className:"text-lg",children:""}),u.jsx("span",{children:"/ VOD   ."})]}),u.jsxs("li",{className:"flex items-center gap-3 rounded-2xl bg-[#fff7d6] px-4 py-3 text-sm text-[#5c5246] shadow-inner shadow-[#ffeab2]",children:[u.jsx("span",{className:"text-lg",children:""}),u.jsx("span",{children:"     ."})]}),u.jsxs("li",{className:"flex items-center gap-3 rounded-2xl bg-[#fff7d6] px-4 py-3 text-sm text-[#5c5246] shadow-inner shadow-[#ffeab2]",children:[u.jsx("span",{className:"text-lg",children:""}),u.jsx("span",{children:"        ."})]})]})]})]}),Ox=({title:t,description:e,children:n,onSubmit:r,actions:s})=>u.jsxs("form",{onSubmit:r,className:"space-y-4 rounded-3xl bg-white p-6 shadow-xl shadow-black/5",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-extrabold text-[#3f3a37]",children:t}),e?u.jsx("p",{className:"mt-1 text-sm text-[#6a5c50]",children:e}):null]}),u.jsx("div",{className:"space-y-4",children:n}),s?u.jsx("div",{className:"flex justify-end gap-3 pt-2",children:s}):null]}),Tk=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ck=({selectedDays:t,onChange:e})=>{const n=r=>{if(t.includes(r)){e(t.filter(s=>s!==r));return}e([...t,r])};return u.jsx("div",{className:"flex flex-wrap gap-2",children:Tk.map(r=>u.jsx("button",{type:"button",className:`rounded-full px-3 py-2 text-xs font-semibold shadow-inner transition ${t.includes(r)?"bg-[#ffd331] text-[#3f3a37] shadow-[#f3c623]":"bg-[#fff7d6] text-[#6a5c50] hover:bg-[#ffe8a3]"}`,onClick:()=>n(r),children:r},r))})},Pk=({startTime:t="",endTime:e="",onChange:n})=>u.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[u.jsxs("label",{className:"text-sm font-semibold text-[#3f3a37]",children:["",u.jsx("input",{type:"time",value:t,onChange:r=>n({start:r.target.value,end:e||""}),className:"ml-2 rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner"})]}),u.jsxs("label",{className:"text-sm font-semibold text-[#3f3a37]",children:["",u.jsx("input",{type:"time",value:e,onChange:r=>n({start:t||"",end:r.target.value}),className:"ml-2 rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner"})]})]}),Ix=({value:t,onChange:e})=>{const n=r=>{e({...t,assignment_rule_type:r})};return u.jsxs("div",{className:"space-y-3 rounded-2xl bg-[#fff7d6] p-4 shadow-inner shadow-[#ffeab2]",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("label",{className:"text-sm font-semibold text-[#3f3a37]",children:"  "}),u.jsxs("select",{value:t.assignment_rule_type,onChange:r=>n(r.target.value),className:"w-full rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner",children:[u.jsx("option",{value:"always_open",children:"  "}),u.jsx("option",{value:"time_range",children:"  "}),u.jsx("option",{value:"weekly_days",children:"  "}),u.jsx("option",{value:"weekly_days_with_time",children:" +  "})]})]}),(t.assignment_rule_type==="weekly_days"||t.assignment_rule_type==="weekly_days_with_time")&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#c18f1f]",children:"  "}),u.jsx(Ck,{selectedDays:t.assignment_days??[],onChange:r=>e({...t,assignment_days:r})})]}),(t.assignment_rule_type==="time_range"||t.assignment_rule_type==="weekly_days_with_time")&&u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#c18f1f]",children:"  "}),u.jsx(Pk,{startTime:t.assignment_start_time||"",endTime:t.assignment_end_time||"",onChange:({start:r,end:s})=>e({...t,assignment_start_time:r||null,assignment_end_time:s||null})})]})]})};async function Ak(t){return F.from("classes").insert(t).select()}async function Rk(t,e){return F.from("classes").update(e).eq("id",t)}async function Dx(t){return F.from("classes").select("*").eq("id",t).single()}const op=async()=>F.from("classes").select("*").order("created_at",{ascending:!1}),Ok=async t=>F.from("classes").delete().eq("id",t);async function Lx(){return F.from("class_category").select("*").order("order_num",{ascending:!0})}const Ik={assignment_rule_type:"always_open",assignment_days:[],assignment_start_time:"",assignment_end_time:""},Dk=()=>{const t=Ue(),[e,n]=y.useState(""),[r,s]=y.useState(""),[i,o]=y.useState(""),[a,l]=y.useState(""),[c,d]=y.useState(""),[h,f]=y.useState(""),[p,g]=y.useState([]),[v,b]=y.useState(Ik),[m,x]=y.useState(!1),[w,_]=y.useState(null);y.useEffect(()=>{(async()=>{const{data:E,error:C}=await Lx();C?_(C.message):g(E??[])})()},[]);const j=()=>{const N="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let E="";for(let C=0;C<6;C++)E+=N[Math.floor(Math.random()*N.length)];l(`CL-${E}`)},S=async N=>{if(N.preventDefault(),x(!0),_(null),!i){_(" ."),x(!1);return}const E=p.find(I=>String(I.id)===String(i)),C={name:e,description:r,category:(E==null?void 0:E.name)??"",category_id:i,code:a,assignment_rule_type:v.assignment_rule_type,assignment_days:v.assignment_days??[],assignment_start_time:v.assignment_start_time??null,assignment_end_time:v.assignment_end_time??null,start_date:c||null,end_date:h||null},{error:k}=await Ak(C);if(x(!1),k){_(k.message);return}alert(" ."),t("/admin/lessons")};return u.jsxs("div",{className:"space-y-4",children:[w?u.jsx("div",{className:"rounded-2xl bg-red-50 px-4 py-3 text-sm text-red-700 shadow-inner",children:w}):null,u.jsxs(Ox,{title:"  ",description:"    .",onSubmit:S,actions:u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:()=>t("/admin/lessons"),className:"rounded-full bg-[#fff7d6] px-4 py-2 text-sm font-semibold text-[#3f3a37] shadow-inner hover:bg-[#ffe8a3]",children:""}),u.jsx("button",{type:"submit",disabled:m,className:"rounded-full bg-[#ffd331] px-5 py-2 text-sm font-semibold text-[#3f3a37] shadow-md transition hover:bg-[#f3c623] disabled:opacity-60",children:m?" ...":" "})]}),children:[u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsxs("label",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:""}),u.jsx("input",{value:e,onChange:N=>n(N.target.value),required:!0,className:"w-full rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner",placeholder:")  "})]}),u.jsxs("label",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:""}),u.jsxs("select",{name:"categoryId",value:i,onChange:N=>o(N.target.value),required:!0,className:"w-full rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner",children:[u.jsx("option",{value:"",children:" "}),p.map(N=>u.jsx("option",{value:N.id,children:N.name},N.id))]})]})]}),u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsxs("label",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:""}),u.jsx("input",{type:"date",value:c,onChange:N=>d(N.target.value),className:"w-full rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner"})]}),u.jsxs("label",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:""}),u.jsx("input",{type:"date",value:h,onChange:N=>f(N.target.value),className:"w-full rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner"})]})]}),u.jsxs("label",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:""}),u.jsx("textarea",{value:r,onChange:N=>s(N.target.value),className:"w-full rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner",rows:3,placeholder:"    ."})]}),u.jsxs("label",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:" "}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("input",{value:a,onChange:N=>l(N.target.value),required:!0,className:"w-full rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner",placeholder:") CL-XXXXXX"}),u.jsx("button",{type:"button",onClick:j,className:"whitespace-nowrap rounded-full bg-[#fff7d6] px-3 py-2 text-xs font-semibold text-[#3f3a37] shadow-inner hover:bg-[#ffe8a3]",children:" "})]})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:"  "}),u.jsx(Ix,{value:v,onChange:b})]})]})]})},Lk={assignment_rule_type:"always_open",assignment_days:[],assignment_start_time:"",assignment_end_time:""},$k=()=>{const{lesson_id:t}=wn(),e=t,n=Ue(),[r,s]=y.useState(""),[i,o]=y.useState(""),[a,l]=y.useState(""),[c,d]=y.useState(""),[h,f]=y.useState(""),[p,g]=y.useState(""),[v,b]=y.useState([]),[m,x]=y.useState(Lk),[w,_]=y.useState(!0),[j,S]=y.useState(!1),[N,E]=y.useState(null);y.useEffect(()=>{(async()=>{if(!e)return;_(!0);const[{data:I,error:ee},{data:D,error:G}]=await Promise.all([Dx(e),Lx()]);if(D&&b(D),G&&E(G.message),ee){E(ee.message),_(!1);return}I&&(s(I.name??""),o(I.description??""),l(I.category_id?String(I.category_id):""),d(I.code??""),f(I.start_date??""),g(I.end_date??""),x({assignment_rule_type:I.assignment_rule_type??"always_open",assignment_days:I.assignment_days??[],assignment_start_time:I.assignment_start_time??"",assignment_end_time:I.assignment_end_time??""})),_(!1)})()},[e]);const C=async k=>{if(k.preventDefault(),!e)return;if(S(!0),E(null),!a){E(" ."),S(!1);return}const I=v.find(G=>String(G.id)===String(a)),ee={name:r,description:i,category:(I==null?void 0:I.name)??"",category_id:a,code:c,assignment_rule_type:m.assignment_rule_type,assignment_days:m.assignment_days??[],assignment_start_time:m.assignment_start_time??null,assignment_end_time:m.assignment_end_time??null,start_date:h||null,end_date:p||null},{error:D}=await Rk(e,ee);if(S(!1),D){E(D.message);return}alert("  ."),n("/admin/lessons")};return w?u.jsx("div",{className:"rounded-3xl bg-white p-6 text-sm text-[#6a5c50] shadow-xl shadow-black/5",children:" ..."}):u.jsxs("div",{className:"space-y-4",children:[N?u.jsx("div",{className:"rounded-2xl bg-red-50 px-4 py-3 text-sm text-red-700 shadow-inner",children:N}):null,u.jsxs(Ox,{title:" ",description:"    .",onSubmit:C,actions:u.jsxs(u.Fragment,{children:[u.jsx("button",{type:"button",onClick:()=>n("/admin/lessons"),className:"rounded-full bg-[#fff7d6] px-4 py-2 text-sm font-semibold text-[#3f3a37] shadow-inner hover:bg-[#ffe8a3]",children:""}),u.jsx("button",{type:"submit",disabled:j,className:"rounded-full bg-[#ffd331] px-5 py-2 text-sm font-semibold text-[#3f3a37] shadow-md transition hover:bg-[#f3c623] disabled:opacity-60",children:j?" ...":" "})]}),children:[u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsxs("label",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:""}),u.jsx("input",{value:r,onChange:k=>s(k.target.value),required:!0,className:"w-full rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner",placeholder:")  "})]}),u.jsxs("label",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:""}),u.jsxs("select",{name:"categoryId",value:a,onChange:k=>l(k.target.value),required:!0,className:"w-full rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner",children:[u.jsx("option",{value:"",children:" "}),v.map(k=>u.jsx("option",{value:k.id,children:k.name},k.id))]})]})]}),u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsxs("label",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:""}),u.jsx("input",{type:"date",value:h,onChange:k=>f(k.target.value),className:"w-full rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner"})]}),u.jsxs("label",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:""}),u.jsx("input",{type:"date",value:p,onChange:k=>g(k.target.value),className:"w-full rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner"})]})]}),u.jsxs("label",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:""}),u.jsx("textarea",{value:i,onChange:k=>o(k.target.value),className:"w-full rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner",rows:3,placeholder:"    ."})]}),u.jsxs("label",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:" "}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("input",{value:c,onChange:k=>d(k.target.value),required:!0,className:"w-full rounded-xl border border-[#f1e4c2] bg-white px-3 py-2 text-sm shadow-inner",placeholder:") CL-XXXXXX"})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("span",{className:"text-sm font-semibold text-[#3f3a37]",children:"  "}),u.jsx(Ix,{value:m,onChange:x})]})]})]})},Fa=({title:t,description:e,headers:n,children:r})=>u.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-black/5",children:[t?u.jsx("h3",{className:"text-lg font-extrabold text-[#3f3a37]",children:t}):null,e?u.jsx("p",{className:"mt-1 text-sm text-[#6a5c50]",children:e}):null,u.jsx("div",{className:"mt-4 overflow-hidden rounded-2xl border border-[#f1e4c2]",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-[#f1e4c2] text-sm text-[#3f3a37]",children:[u.jsx("thead",{className:"bg-[#fff7d6] text-left text-xs font-semibold uppercase tracking-wide text-[#5c5246]",children:u.jsx("tr",{children:n.map(s=>u.jsx("th",{className:"px-4 py-3",children:s},s))})}),u.jsx("tbody",{className:"divide-y divide-[#f1e4c2] bg-white",children:r})]})})})]}),Mk=()=>{var c;const{lesson_id:t}=wn(),e=t,[n,r]=y.useState(null),[s,i]=y.useState(!0),[o,a]=y.useState(null);y.useEffect(()=>{(async()=>{if(!e)return;i(!0);const{data:h,error:f}=await Dx(e);f?a(f.message):(r(h),a(null)),i(!1)})()},[e]);const l=y.useMemo(()=>{if(!n)return"-";switch(n.assignment_rule_type){case"always_open":return" ";case"time_range":return`${n.assignment_start_time??"-"} ~ ${n.assignment_end_time??"-"}`;case"weekly_days":return(n.assignment_days??[]).join(", ");case"weekly_days_with_time":return`${(n.assignment_days??[]).join(", ")} / ${n.assignment_start_time??"-"} ~ ${n.assignment_end_time??"-"}`;default:return""}},[n]);return s?u.jsx("div",{className:"rounded-3xl bg-white p-6 text-sm text-[#6a5c50] shadow-xl shadow-black/5",children:" ..."}):o||!n?u.jsxs("div",{className:"space-y-3 rounded-3xl bg-white p-6 shadow-xl shadow-black/5",children:[u.jsx("p",{className:"text-sm font-semibold text-red-700",children:"     ."}),o?u.jsx("p",{className:"text-sm text-[#6a5c50]",children:o}):null,u.jsx(De,{to:"/admin/lessons",className:"inline-flex w-max items-center rounded-full bg-[#ffd331] px-4 py-2 text-sm font-semibold text-[#3f3a37] shadow-md hover:bg-[#f3c623]",children:" "})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col gap-3 rounded-3xl bg-white p-6 shadow-xl shadow-black/5 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#c18f1f]",children:"Class Detail"}),u.jsx("h2",{className:"text-2xl font-black text-[#3f3a37]",children:n.name}),u.jsxs("p",{className:"text-sm text-[#6a5c50]",children:[" : ",n.code]})]}),u.jsx(De,{to:"/admin/lessons",className:"inline-flex items-center rounded-full bg-[#fff7d6] px-4 py-2 text-sm font-semibold text-[#3f3a37] shadow-inner hover:bg-[#ffe8a3]",children:""})]}),u.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[u.jsxs("div",{className:"space-y-2 rounded-3xl bg-white p-6 shadow-xl shadow-black/5",children:[u.jsx("h3",{className:"text-lg font-extrabold text-[#3f3a37]",children:" "}),u.jsxs("p",{className:"text-sm text-[#6a5c50]",children:[": ",n.category]}),u.jsxs("p",{className:"text-sm text-[#6a5c50]",children:[": ",(c=n.created_at)==null?void 0:c.slice(0,10)]}),u.jsx("p",{className:"text-sm text-[#6a5c50]",children:""}),u.jsx("p",{className:"rounded-2xl bg-[#fff7d6] px-4 py-3 text-sm text-[#3f3a37] shadow-inner shadow-[#ffeab2]",children:n.description||" ."})]}),u.jsxs("div",{className:"space-y-2 rounded-3xl bg-white p-6 shadow-xl shadow-black/5",children:[u.jsx("h3",{className:"text-lg font-extrabold text-[#3f3a37]",children:" "}),u.jsxs("p",{className:"text-sm text-[#6a5c50]",children:[": ",n.assignment_rule_type]}),u.jsx("p",{className:"text-sm text-[#6a5c50]",children:" "}),u.jsx("p",{className:"rounded-2xl bg-[#fff7d6] px-4 py-3 text-sm text-[#3f3a37] shadow-inner shadow-[#ffeab2]",children:l})]})]}),u.jsxs(Fa,{title:"  ",description:"    .",headers:["",""],children:[u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:"Rule Type"}),u.jsx("td",{className:"px-4 py-3 text-sm text-[#5c5246]",children:n.assignment_rule_type})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:"Days"}),u.jsx("td",{className:"px-4 py-3 text-sm text-[#5c5246]",children:(n.assignment_days??[]).join(", ")||"-"})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:"Start Time"}),u.jsx("td",{className:"px-4 py-3 text-sm text-[#5c5246]",children:n.assignment_start_time||"-"})]}),u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:"End Time"}),u.jsx("td",{className:"px-4 py-3 text-sm text-[#5c5246]",children:n.assignment_end_time||"-"})]})]})]})},Uk=t=>{switch(t.assignment_rule_type){case"always_open":return" ";case"time_range":return`${t.assignment_start_time??"-"} ~ ${t.assignment_end_time??"-"}`;case"weekly_days":return(t.assignment_days??[]).join(", ");case"weekly_days_with_time":return`${(t.assignment_days??[]).join(", ")} / ${t.assignment_start_time??"-"} ~ ${t.assignment_end_time??"-"}`;default:return""}},Vk=()=>{const[t,e]=y.useState([]),[n,r]=y.useState(!0),[s,i]=y.useState(null),[o,a]=y.useState(null);y.useEffect(()=>{(async()=>{r(!0);const{data:d,error:h}=await op();h?i(h.message):(e(d??[]),i(null)),r(!1)})()},[]);const l=async c=>{if(!window.confirm(" ?"))return;a(c);const{error:d}=await Ok(c);if(d){i(d.message),a(null);return}const{data:h,error:f}=await op();f?i(f.message):(e(h??[]),i(null)),a(null)};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col gap-3 rounded-3xl bg-white p-6 shadow-xl shadow-black/5 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-black text-[#3f3a37]",children:" "}),u.jsx("p",{className:"text-sm text-[#6a5c50]",children:" , ,    ."})]}),u.jsx(De,{to:"/admin/lessons/new",className:"inline-flex items-center justify-center rounded-full bg-[#ffd331] px-4 py-2 text-sm font-semibold text-[#3f3a37] shadow-md transition hover:bg-[#f3c623]",children:"+   "})]}),s?u.jsx("div",{className:"rounded-2xl bg-red-50 px-4 py-3 text-sm text-red-700 shadow-inner",children:s}):null,u.jsx(Fa,{title:" ",description:n?" ...":" "+t.length+" ",headers:[""," ",""," ","",""],children:n?u.jsx("tr",{children:u.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-sm text-[#6a5c50]",children:"  ."})}):t.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-sm text-[#6a5c50]",children:"  ."})}):t.map(c=>{var d;return u.jsxs("tr",{className:"hover:bg-[#fffaf0]",children:[u.jsx("td",{className:"px-4 py-3 font-semibold",children:c.name}),u.jsx("td",{className:"px-4 py-3 text-[#5c5246]",children:c.code}),u.jsx("td",{className:"px-4 py-3 text-[#5c5246]",children:c.category??"-"}),u.jsx("td",{className:"px-4 py-3 text-[#5c5246]",children:Uk(c)}),u.jsx("td",{className:"px-4 py-3 text-[#5c5246]",children:(d=c.created_at)==null?void 0:d.slice(0,10)}),u.jsxs("td",{className:"px-4 py-3 text-right space-x-2",children:[u.jsx(De,{to:`/admin/lessons/${c.id}/edit`,className:"inline-flex items-center rounded-full bg-[#fff7d6] px-3 py-1 text-xs font-semibold text-[#3f3a37] shadow-inner hover:bg-[#ffe8a3]",children:""}),u.jsx("button",{type:"button",onClick:()=>l(c.id),disabled:o===c.id,className:"inline-flex items-center rounded-full bg-red-100 px-3 py-1 text-xs font-semibold text-red-700 shadow-inner transition hover:bg-red-200 disabled:opacity-60",children:o===c.id?" ...":""})]})]},c.id)})})]})},ap=t=>{if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?"":new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(e)},Fk=t=>t==="success"?"":"",Bk=t=>t.image_url?" ":t.link_url?" ":"",Gk=({assignments:t,onSubmitFeedback:e,submittingFeedbackId:n})=>{const[r,s]=y.useState({}),i=y.useMemo(()=>typeof e=="function",[e]),o=async a=>{var c;if(!e)return;const l=(c=r[a])==null?void 0:c.trim();if(!l){alert("  .");return}await e(a,l),s(d=>({...d,[a]:""}))};return t.length?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-ivory/70",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-ellieGray",children:" "}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-ellieGray",children:""}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-ellieGray",children:" "}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-ellieGray",children:""}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-ellieGray",children:""}),u.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-ellieGray",children:""}),i?u.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-ellieGray",children:""}):null]})}),u.jsx("tbody",{className:"divide-y divide-gray-100 bg-white/80",children:t.map(a=>{var l,c;return u.jsxs("tr",{className:"align-top",children:[u.jsx("td",{className:"px-4 py-3 text-sm text-ellieGray/90",children:((l=a.profiles)==null?void 0:l.name)||a.student_id}),u.jsx("td",{className:"px-4 py-3 text-sm text-ellieGray/90",children:a.session_no}),u.jsx("td",{className:"px-4 py-3 text-sm text-ellieGray/90",children:Bk(a)}),u.jsx("td",{className:"px-4 py-3 text-sm text-ellieGray/90",children:a.image_url?u.jsx("img",{src:a.image_url,style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"8px"}}):a.link_url?u.jsx("span",{className:"text-[#d98200] font-semibold",children:" "}):u.jsx("span",{className:"text-ellieGray/60",children:""})}),u.jsx("td",{className:"px-4 py-3 text-sm text-ellieGray/90",children:ap(a.created_at)}),u.jsx("td",{className:"px-4 py-3 text-sm text-ellieGray/90",children:Fk(a.status)}),i?u.jsx("td",{className:"px-4 py-3 text-sm text-ellieGray/90",children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"space-y-1",children:[(a.assignment_feedbacks??[]).map(d=>u.jsxs("div",{className:"rounded-xl bg-ivory/70 px-3 py-2 text-xs text-ellieGray/90",children:[u.jsx("p",{className:"font-semibold",children:d.content||" "}),u.jsx("p",{className:"text-[11px] text-ellieGray/60",children:ap(d.created_at)})]},d.id)),(((c=a.assignment_feedbacks)==null?void 0:c.length)??0)===0?u.jsx("p",{className:"text-xs text-ellieGray/60",children:"  ."}):null]}),u.jsx("textarea",{className:"w-full rounded-xl border border-ivory px-3 py-2 text-xs",placeholder:" ",value:r[a.id]??"",onChange:d=>s(h=>({...h,[a.id]:d.target.value}))}),u.jsx("button",{type:"button",className:"rounded-xl bg-[#ffd331] px-3 py-2 text-xs font-semibold text-ellieGray shadow-soft disabled:opacity-50",onClick:()=>void o(a.id),disabled:n===a.id,children:n===a.id?" ...":" "})]})}):null]},a.id)})})]})}):u.jsx("p",{className:"text-sm text-ellieGray/70",children:"  ."})},zk=async(t,e={})=>{var i;const n=((i=Ma())==null?void 0:i.accessToken)??(typeof window<"u"?localStorage.getItem("token"):null),r=new Headers(e.headers);r.set("Accept","application/json"),e.body instanceof FormData||r.set("Content-Type","application/json"),n&&r.set("Authorization",`Bearer ${n}`);const s=await fetch(t,{...e,headers:r});if(!s.ok){const o=await s.text()||s.statusText||" .";throw new Error(o)}return s.status===204?null:await s.json()},Wk=async t=>(await zk("/api/assignment-feedback-create",{method:"POST",body:JSON.stringify(t)})).feedback,Kk=()=>{const[t,e]=y.useState(""),[n,r]=y.useState(""),[s,i]=y.useState([]),[o,a]=y.useState([]),[l,c]=y.useState(!1),[d,h]=y.useState(""),[f,p]=y.useState(null);y.useEffect(()=>{(async()=>{const{data:x}=await F.from("classes").select("id, name").order("id",{ascending:!0});a(x??[])})()},[]);const g=y.useCallback(async()=>{c(!0),h("");try{const m=await Ax({class_id:t?Number(t):void 0,session_no:n||void 0});i(m??[])}catch{h("   ."),i([])}finally{c(!1)}},[t,n]);y.useEffect(()=>{g()},[g]);const v=y.useCallback(async(m,x)=>{p(m);try{await Wk({assignment_id:m,content:x}),await g()}catch{alert("    .")}finally{p(null)}},[g]),b=y.useMemo(()=>[{id:0,name:""},...o],[o]);return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"rounded-2xl bg-white/80 p-4 shadow-soft",children:[u.jsx("h2",{className:"text-lg font-semibold text-ellieGray",children:" "}),u.jsx("p",{className:"text-sm text-ellieGray/70",children:"classroom /    ."}),u.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-3",children:[u.jsxs("label",{className:"text-sm text-ellieGray/80",children:["",u.jsx("select",{className:"mt-2 w-full rounded-xl border border-ivory px-3 py-2",value:t,onChange:m=>e(m.target.value),children:b.map(m=>u.jsx("option",{value:m.id===0?"":m.id,children:m.name?`${m.name} (${m.id})`:m.id===0?"":m.id},m.id))})]}),u.jsxs("label",{className:"text-sm text-ellieGray/80",children:[" ()",u.jsx("input",{className:"mt-2 w-full rounded-xl border border-ivory px-3 py-2",type:"number",min:"1",value:n,onChange:m=>r(m.target.value),placeholder:""})]}),u.jsx("div",{className:"flex items-end gap-2",children:u.jsx("button",{type:"button",className:"w-full rounded-xl bg-[#ffd331] px-3 py-2 font-semibold text-ellieGray shadow-soft",onClick:()=>void g(),children:" "})})]})]}),d&&u.jsx("p",{className:"text-sm text-red-500",children:d}),l?u.jsx("p",{className:"text-sm text-ellieGray/70",children:" ..."}):u.jsx(Gk,{assignments:s,onSubmitFeedback:v,submittingFeedbackId:f})]})},Hk=()=>{const[t,e]=y.useState([]),[n,r]=y.useState(!0),[s,i]=y.useState(null);return y.useEffect(()=>{(async()=>{r(!0);const{data:a,error:l}=await F.from("profiles").select("id, email, name, role, created_at").eq("role","student").order("created_at",{ascending:!1});l?(e([]),i(l.message)):(e(a??[]),i(null)),r(!1)})()},[]),u.jsxs(Fa,{title:"",description:n?" ...":` ${t.length}`,headers:["ID","","",""],children:[n?u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-sm text-[#6a5c50]",children:"  ."})}):t.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-sm text-[#6a5c50]",children:"  ."})}):t.map(o=>u.jsxs("tr",{className:"hover:bg-[#fffaf0]",children:[u.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:o.id}),u.jsx("td",{className:"px-4 py-3 text-sm text-[#5c5246]",children:o.name??"-"}),u.jsx("td",{className:"px-4 py-3 text-sm text-[#5c5246]",children:o.email??"-"}),u.jsx("td",{className:"px-4 py-3 text-sm text-[#5c5246]",children:o.created_at?o.created_at.slice(0,10):"-"})]},o.id)),s?u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-4 py-3 text-center text-sm text-red-700",children:s})}):null]})},qk=()=>{const[t,e]=y.useState([]),[n,r]=y.useState(!0),[s,i]=y.useState(null);return y.useEffect(()=>{(async()=>{r(!0);const{data:a,error:l}=await F.from("vod_purchases").select(`
          id,
          vod_id,
          user_id,
          created_at,
          profiles (
            name,
            email
          )
        `).order("created_at",{ascending:!1});l?(e([]),i(l.message)):(e(a??[]),i(null)),r(!1)})()},[]),u.jsxs(Fa,{title:"VOD",description:n?" ...":` ${t.length}`,headers:["ID","VOD ID","",""],children:[n?u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-sm text-[#6a5c50]",children:"  ."})}):t.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-sm text-[#6a5c50]",children:" ."})}):t.map(o=>{var a,l;return u.jsxs("tr",{className:"hover:bg-[#fffaf0]",children:[u.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:o.id}),u.jsx("td",{className:"px-4 py-3 text-sm text-[#5c5246]",children:o.vod_id??"-"}),u.jsx("td",{className:"px-4 py-3 text-sm text-[#5c5246]",children:((a=o.profiles)==null?void 0:a.email)??o.user_id}),u.jsx("td",{className:"px-4 py-3 text-sm text-[#5c5246]",children:(l=o.created_at)==null?void 0:l.slice(0,10)})]},o.id)}),s?u.jsx("tr",{children:u.jsx("td",{colSpan:4,className:"px-4 py-3 text-center text-sm text-red-700",children:s})}):null]})},Jk=()=>{const[t,e]=y.useState("student");return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"rounded-3xl bg-white p-6 shadow-xl shadow-black/5",children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#c18f1f]",children:"Students"}),u.jsx("h2",{className:"text-xl font-black text-[#3f3a37]",children:" "}),u.jsx("p",{className:"text-sm text-[#6a5c50]",children:"/  VOD   ."}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[u.jsx("button",{type:"button",onClick:()=>e("student"),className:`rounded-full px-4 py-2 text-sm font-semibold shadow-inner transition ${t==="student"?"bg-[#ffd331] text-[#3f3a37]":"bg-[#fff7d6] text-[#5c5246] hover:bg-[#ffe8a3]"}`,children:""}),u.jsx("button",{type:"button",onClick:()=>e("vod"),className:`rounded-full px-4 py-2 text-sm font-semibold shadow-inner transition ${t==="vod"?"bg-[#ffd331] text-[#3f3a37]":"bg-[#fff7d6] text-[#5c5246] hover:bg-[#ffe8a3]"}`,children:"VOD"})]})]}),t==="student"?u.jsx(Hk,{}):u.jsx(qk,{})]})},lp=t=>{if(t==null||t==="")return null;const e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e},Yk=({classId:t,type:e,categoryId:n,requiresCategory:r=!0,refreshToken:s,onEdit:i,onDeleted:o})=>{const[a,l]=y.useState([]),[c,d]=y.useState(!1),[h,f]=y.useState(null),[p,g]=y.useState(null),v=y.useMemo(()=>e==="classroomVideo"?"classroom-video":e==="classroomNotice"?"classroom-notice":"material",[e]);y.useEffect(()=>{let w=!0;return(async()=>{if(!t){l([]),f("class_id .");return}if(r&&!n){l([]);return}d(!0),f(null);try{const j=new URLSearchParams({class_id:t});n&&j.set("category_id",n);const S=await fetch(`/api/admin-content-${v}-list?${j.toString()}`);if(!S.ok)throw new Error("    .");const N=await S.json();if(!w)return;const E=Array.isArray(N)?N:Array.isArray(N==null?void 0:N.data)?N.data:[];l(E)}catch(j){if(!w)return;console.error(`[classroom-content] list load failed (${e})`,j),f("   ."),l([])}finally{if(!w)return;d(!1)}})(),()=>{w=!1}},[t,e,n,r,s,v]);const b=async w=>{const _=lp(w);if(_===null){alert("  .  ID.");return}if(window.confirm("?")){g(_);try{const j=new URLSearchParams({class_id:t});if(!(await fetch(`/api/admin-content-${v}-delete/${_}?${j.toString()}`,{method:"DELETE"})).ok)throw new Error(" ");o()}catch(j){console.error("[classroom-content] delete failed",j),alert(" .  .")}finally{g(null)}}},m=w=>e==="classroomVideo"?w.url??w.videoUrl??"":e==="material"?w.url??w.resourceUrl??"":e==="classroomNotice"?w.content??"":"",x=r&&!n;return u.jsx("div",{className:"rounded-2xl border border-ellieGray/10 p-4",children:t?x?u.jsx("p",{className:"text-sm text-ellieGray/70",children:"  ."}):c?u.jsx("p",{className:"text-sm text-ellieGray/70",children:"  ..."}):h?u.jsx("p",{className:"text-sm text-red-500",children:h}):a.length===0?u.jsx("p",{className:"text-sm text-ellieGray/70",children:" "}):u.jsx("ul",{className:"divide-y divide-ellieGray/10",children:a.map(w=>{const _=w.id??w.content_id,j=typeof _=="number"?_:lp(_),S=j!==null&&p===j;return u.jsxs("li",{className:"flex flex-col gap-3 py-3 sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-ellieGray",children:w.title??" "}),u.jsx("p",{className:"text-sm text-ellieGray/70",children:m(w)||" "})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:()=>i(w),className:"rounded-full border border-ellieGray/30 px-4 py-1 text-sm font-semibold text-ellieGray transition hover:border-ellieGray/60",children:""}),u.jsx("button",{type:"button",onClick:()=>b(_),disabled:S,className:"rounded-full bg-red-500 px-4 py-1 text-sm font-semibold text-white disabled:opacity-50",children:""})]})]},_)})}):u.jsx("p",{className:"text-sm text-red-500",children:"class_id ."})})},Qk=t=>{if(t==null||t==="")return null;const e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e},Pl={title:"",content:"",isImportant:!1},Xk=({classId:t,onSaved:e,editingItem:n,onCancelEdit:r,categoryId:s,categoryOptions:i,onCategoryChange:o,isCategoryLoading:a,categoryError:l})=>{const[c,d]=y.useState(Pl),[h,f]=y.useState(!1);y.useEffect(()=>{if(!n){d(Pl);return}d({title:n.title??"",content:n.content??"",isImportant:!!(n.is_important??n.isImportant??!1)})},[n]);const p=async g=>{if(g.preventDefault(),!h){if(!s){alert(" .");return}if(!t){alert(" class_id .");return}f(!0);try{const v=!!(n!=null&&n.id),b=v?`/api/admin-content-classroom-notice-update/${n==null?void 0:n.id}`:"/api/admin-content-classroom-notice-create",m=v?"PUT":"POST",x={class_id:t,title:c.title,content:c.content,is_important:c.isImportant,category_id:Qk(s)};if(!(await fetch(b,{method:m,headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).ok)throw new Error("failed to save classroom notice");await Promise.resolve(e()),d(Pl),r()}catch(v){console.error("[content] classroom notice save error",v),alert(" .  .")}finally{f(!1)}}};return u.jsxs("form",{onSubmit:p,className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:""}),u.jsx("select",{value:s??"",onChange:g=>o==null?void 0:o(g.target.value),disabled:a||((i==null?void 0:i.length)??0)===0,className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",required:!0,children:a?u.jsx("option",{value:"",children:" ..."}):l?u.jsx("option",{value:"",children:"  ."}):((i==null?void 0:i.length)??0)===0?u.jsx("option",{value:"",children:" ."}):i==null?void 0:i.map(g=>u.jsx("option",{value:g.id,children:g.name},g.id))})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:""}),u.jsx("input",{type:"text",value:c.title,onChange:g=>d(v=>({...v,title:g.target.value})),className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",placeholder:" ",required:!0})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:""}),u.jsx("textarea",{value:c.content,onChange:g=>d(v=>({...v,content:g.target.value})),className:"h-32 rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",placeholder:"  ",required:!0})]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-ellieGray",children:[u.jsx("input",{type:"checkbox",checked:c.isImportant,onChange:g=>d(v=>({...v,isImportant:g.target.checked})),className:"h-4 w-4"}),"  "]}),u.jsxs("div",{className:"flex gap-3",children:[n?u.jsx("button",{type:"button",onClick:r,className:"rounded-full border border-ellieGray/30 px-6 py-2 text-sm font-semibold text-ellieGray",children:""}):null,u.jsx("button",{type:"submit",disabled:h,className:"rounded-full bg-ellieYellow px-8 py-2 text-sm font-semibold text-ellieGray disabled:opacity-50",children:h?" ...":""})]})]})},up=t=>{if(t==null||t==="")return null;const e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e},Al={title:"",videoUrl:"",description:"",displayOrder:"0"},Zk=({classId:t,onSaved:e,editingItem:n,onCancelEdit:r,categoryId:s,categoryOptions:i,onCategoryChange:o,isCategoryLoading:a,categoryError:l})=>{const[c,d]=y.useState(Al),[h,f]=y.useState(!1);y.useEffect(()=>{if(!n){d(Al);return}d({title:n.title??"",videoUrl:n.url??n.videoUrl??"",description:n.description??"",displayOrder:String(n.order_num??n.displayOrder??"0")})},[n]);const p=async v=>{if(v.preventDefault(),!h){if(!s){alert(" .");return}if(!t){alert(" class_id .");return}f(!0);try{const b=!!(n!=null&&n.id),m=b?`/api/admin-content-classroom-video-update/${n==null?void 0:n.id}`:"/api/admin-content-classroom-video-create",x=b?"PUT":"POST",w={class_id:t,title:c.title,description:c.description,url:c.videoUrl,category_id:up(s),order_num:up(c.displayOrder)??0};if(!(await fetch(m,{method:x,headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).ok)throw new Error("failed to save classroom video");await Promise.resolve(e()),d(Al),r()}catch(b){console.error("[content] classroom video save error",b),alert(" .  .")}finally{f(!1)}}},g=()=>u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:""}),u.jsx("select",{value:s??"",onChange:v=>o==null?void 0:o(v.target.value),disabled:a||((i==null?void 0:i.length)??0)===0,className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",required:!0,children:a?u.jsx("option",{value:"",children:" ..."}):l?u.jsx("option",{value:"",children:"  ."}):((i==null?void 0:i.length)??0)===0?u.jsx("option",{value:"",children:" ."}):i==null?void 0:i.map(v=>u.jsx("option",{value:v.id,children:v.name},v.id))})]});return u.jsxs("form",{onSubmit:p,className:"space-y-4",children:[g(),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:""}),u.jsx("input",{type:"text",value:c.title,onChange:v=>d(b=>({...b,title:v.target.value})),className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",placeholder:" ",required:!0})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:" URL"}),u.jsx("input",{type:"url",value:c.videoUrl,onChange:v=>d(b=>({...b,videoUrl:v.target.value})),className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",placeholder:"https://example.com",required:!0})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:""}),u.jsx("textarea",{value:c.description,onChange:v=>d(b=>({...b,description:v.target.value})),className:"h-24 rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",placeholder:"  "})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:" "}),u.jsx("input",{type:"number",value:c.displayOrder,onChange:v=>d(b=>({...b,displayOrder:v.target.value})),className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",min:"0"})]}),u.jsxs("div",{className:"flex gap-3",children:[n?u.jsx("button",{type:"button",onClick:r,className:"rounded-full border border-ellieGray/30 px-6 py-2 text-sm font-semibold text-ellieGray",children:""}):null,u.jsx("button",{type:"submit",disabled:h,className:"rounded-full bg-ellieYellow px-8 py-2 text-sm font-semibold text-ellieGray disabled:opacity-50",children:h?" ...":""})]})]})},e1=t=>{if(t==null||t==="")return null;const e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e},Rl={title:"",resourceUrl:"",description:""},t1=({classId:t,onSaved:e,editingItem:n,onCancelEdit:r,categoryId:s,categoryOptions:i,onCategoryChange:o,isCategoryLoading:a,categoryError:l})=>{const[c,d]=y.useState(Rl),[h,f]=y.useState(!1);y.useEffect(()=>{if(!n){d(Rl);return}d({title:n.title??"",resourceUrl:n.url??n.resourceUrl??"",description:n.description??""})},[n]);const p=async g=>{if(g.preventDefault(),!h){if(!s){alert(" .");return}if(!t){alert(" class_id .");return}f(!0);try{const v=!!(n!=null&&n.id),b=v?`/api/admin-content-material-update/${n==null?void 0:n.id}`:"/api/admin-content-material-create",m=v?"PUT":"POST",x={class_id:t,title:c.title,description:c.description,url:c.resourceUrl,category_id:e1(s)};if(!(await fetch(b,{method:m,headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).ok)throw new Error("failed to save material");await Promise.resolve(e()),d(Rl),r()}catch(v){console.error("[content] material save error",v),alert(" .  .")}finally{f(!1)}}};return u.jsxs("form",{onSubmit:p,className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:""}),u.jsx("select",{value:s??"",onChange:g=>o==null?void 0:o(g.target.value),disabled:a||((i==null?void 0:i.length)??0)===0,className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",required:!0,children:a?u.jsx("option",{value:"",children:" ..."}):l?u.jsx("option",{value:"",children:"  ."}):((i==null?void 0:i.length)??0)===0?u.jsx("option",{value:"",children:" ."}):i==null?void 0:i.map(g=>u.jsx("option",{value:g.id,children:g.name},g.id))})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:" "}),u.jsx("input",{type:"text",value:c.title,onChange:g=>d(v=>({...v,title:g.target.value})),className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",placeholder:" ",required:!0})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:"URL"}),u.jsx("input",{type:"url",value:c.resourceUrl,onChange:g=>d(v=>({...v,resourceUrl:g.target.value})),className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",placeholder:"https://example.com",required:!0})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:""}),u.jsx("textarea",{value:c.description,onChange:g=>d(v=>({...v,description:g.target.value})),className:"h-24 rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",placeholder:"  "})]}),u.jsxs("div",{className:"flex gap-3",children:[n?u.jsx("button",{type:"button",onClick:r,className:"rounded-full border border-ellieGray/30 px-6 py-2 text-sm font-semibold text-ellieGray",children:""}):null,u.jsx("button",{type:"submit",disabled:h,className:"rounded-full bg-ellieYellow px-8 py-2 text-sm font-semibold text-ellieGray disabled:opacity-50",children:h?" ...":""})]})]})},n1=t=>{const[e,n]=y.useState([]),[r,s]=y.useState(!1),[i,o]=y.useState(null);return y.useEffect(()=>{let a=!0;return(async()=>{if(!t){n([]),o(null);return}s(!0),o(null);try{const c=await fetch(`/api/assignments-list?class_id=${t}`);if(!c.ok)throw new Error("    .");const d=await c.json();if(!a)return;const h=Array.isArray(d==null?void 0:d.assignments)?d.assignments:Array.isArray(d)?d:[];n(h)}catch(c){if(!a)return;console.error("[classroom-content] assignments load failed",c),n([]),o("   .")}finally{if(!a)return;s(!1)}})(),()=>{a=!1}},[t]),{assignments:e,isLoading:r,error:i}},r1=async()=>{const{data:t,error:e}=await F.from("class_category").select("*").order("order_num",{ascending:!0});if(e)throw new Error(e.message);return t??[]},Qi=[{key:"classroomVideo",label:" ",showCategory:!0,FormComponent:Zk},{key:"classroomNotice",label:" ",showCategory:!0,FormComponent:Xk},{key:"material",label:"",showCategory:!0,FormComponent:t1}],cp=({initialTab:t="classroomVideo"})=>{const{class_id:e}=wn(),n=e??"",[r,s]=y.useState(t),[i,o]=y.useState([]),[a,l]=y.useState(""),[c,d]=y.useState(!1),[h,f]=y.useState(null),[p,g]=y.useState(0),[v,b]=y.useState(null);n1(n),y.useEffect(()=>{let E=!0;return(async()=>{d(!0),f(null);try{const k=await r1();if(!E)return;o(k)}catch(k){if(!E)return;console.error("[classroom-content] failed to load categories",k),o([]),f("  .")}finally{if(!E)return;d(!1)}})(),()=>{E=!1}},[]);const m=y.useMemo(()=>i.filter(E=>E.parent_id!==null).sort((E,C)=>E.name.localeCompare(C.name,"ko",{sensitivity:"base"})).map(E=>({id:E.id.toString(),name:E.name})),[i]);y.useEffect(()=>{const E=Qi.find(C=>C.key===r);E!=null&&E.showCategory&&(a||m.length!==0&&l(m[0].id))},[r,m,a]),y.useEffect(()=>{b(null)},[r,a,n]);const x=Qi.find(E=>E.key===r)??Qi[0],w=x.FormComponent,_=()=>{g(E=>E+1),b(null)},j=E=>{b(E)},S=()=>b(null),N=()=>u.jsx("header",{className:"rounded-3xl bg-white px-6 py-4 shadow-soft",children:u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("h1",{className:"text-xl font-bold text-ellieGray",children:"  (Classrooms)"}),u.jsx("p",{className:"text-sm text-ellieGray/70",children:" , ,   ."}),n?u.jsxs("p",{className:"text-sm font-semibold text-ellieGray",children:["  ID: ",n]}):u.jsx("p",{className:"text-sm text-red-500",children:" ID . URL /:class_id   ."})]})});return u.jsxs("div",{className:"space-y-6",children:[N(),u.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-soft",children:[u.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:Qi.map(E=>u.jsx("button",{type:"button",onClick:()=>s(E.key),className:`rounded-2xl px-4 py-2 text-sm font-semibold transition ${r===E.key?"bg-[#ffd331] text-ellieGray":"bg-[#f5eee9] text-ellieGray/70"}`,children:E.label},E.key))}),u.jsx(w,{classId:n,onSaved:_,editingItem:v,onCancelEdit:S,categoryId:x.showCategory?a:void 0,categoryOptions:x.showCategory?m:void 0,onCategoryChange:x.showCategory?l:void 0,isCategoryLoading:x.showCategory?c:void 0,categoryError:x.showCategory?h:void 0},`${x.key}-${x.showCategory?a:"none"}-${n}`),u.jsx("div",{className:"mt-8",children:u.jsx(Yk,{classId:n,type:x.key,categoryId:x.showCategory?a:void 0,requiresCategory:x.showCategory,refreshToken:p,onEdit:j,onDeleted:_})})]})]})},s1=({student:t,completedCount:e,missingSessions:n,totalSessions:r,onOpen:s})=>{const i=e===r&&r>0;return u.jsxs("tr",{className:"hover:bg-[#fdf8f2]",children:[u.jsx("td",{className:"px-6 py-4 font-semibold",children:t.name}),u.jsx("td",{className:"px-6 py-4 text-[#7a6f68]",children:t.email}),u.jsxs("td",{className:"px-6 py-4 text-center",children:[e," / ",r]}),u.jsx("td",{className:"px-6 py-4",children:n.length>0?u.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(o=>u.jsxs("span",{className:"rounded-full bg-[#f5eee9] px-3 py-1 text-xs font-semibold text-[#7a6f68]",children:[" ",o]},o))}):u.jsx("span",{className:"text-[#46a758]",children:""})}),u.jsx("td",{className:"px-6 py-4 text-center",children:u.jsx("span",{className:`inline-flex items-center justify-center rounded-full px-4 py-1 text-xs font-bold ${i?"bg-[#46a758]/10 text-[#2f7a40]":"bg-[#ffd331]/30 text-[#8a6c00]"}`,children:i?"":" "})}),u.jsx("td",{className:"px-6 py-4 text-center",children:u.jsx("button",{type:"button",onClick:s,className:"rounded-full border border-[#e4d7c6] px-4 py-1 text-xs font-semibold text-[#404040] transition hover:border-[#d6c7b3] hover:bg-[#fdf8f2]",children:""})})]})},i1=({students:t,submissions:e,sessions:n,onOpenStudentModal:r})=>{const s=y.useMemo(()=>t.map(i=>{const o=e.filter(d=>d.student_id===i.id),a=new Set(o.map(d=>d.session_no)),l=a.size,c=n.filter(d=>!a.has(d));return{student:i,completedCount:l,missingSessions:c,isCompleted:l===n.length&&n.length>0}}),[n,t,e]);return u.jsx("div",{className:"overflow-hidden rounded-3xl bg-white shadow-soft",children:u.jsxs("table",{className:"min-w-full divide-y divide-[#f1e7dd] text-sm text-[#404040]",children:[u.jsx("thead",{className:"bg-[#fdf8f2]",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),u.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:""}),u.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:" "}),u.jsx("th",{className:"px-6 py-4 text-left font-semibold",children:" "}),u.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:""}),u.jsx("th",{className:"px-6 py-4 text-center font-semibold",children:""})]})}),u.jsx("tbody",{className:"divide-y divide-[#f1e7dd]",children:s.map(i=>u.jsx(s1,{student:i.student,completedCount:i.completedCount,missingSessions:i.missingSessions,totalSessions:n.length,onOpen:()=>r(i.student)},i.student.id))})]})})},o1=()=>{const{class_id:t}=wn(),[e,n]=y.useState([]),[r,s]=y.useState([]),[i,o]=y.useState([]),[a,l]=y.useState(!1),[c,d]=y.useState(null);y.useEffect(()=>{if(!t)return;let m=!0;return(async()=>{l(!0),d(null);try{const w=await fetch(`/api/admin-assignments-progress?class_id=${t}`);if(!w.ok)throw new Error("Failed to fetch progress data");const _=await w.json();if(!m)return;n(_.students??[]),s(_.sessions??[]),o(_.submissions??[])}catch(w){if(!m)return;console.error("[AssignmentFeedbackDashboard] failed to load progress",w),d("   .    ."),n([]),s([]),o([])}finally{if(!m)return;l(!1)}})(),()=>{m=!1}},[t]);const h=r.length,f=y.useMemo(()=>e.map(m=>{const x=i.filter(S=>S.student_id===m.id),w=new Set(x.map(S=>S.session_no)),_=w.size,j=r.filter(S=>!w.has(S));return{student:m,completedCount:_,missingSessions:j,isCompleted:_===r.length&&r.length>0}}),[r,e,i]),p=m=>{console.log("[AssignmentFeedbackDashboard] open student modal",m)},g=f.filter(m=>m.isCompleted).length,v=e.length,b=v===0?0:g/v*100;return u.jsxs("div",{className:"space-y-6",children:[u.jsx("header",{className:"rounded-3xl bg-white p-6 shadow-soft",children:u.jsxs("div",{className:"flex flex-col gap-3",children:[u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-semibold text-[#7a6f68]",children:" ID"}),u.jsx("h1",{className:"text-2xl font-bold text-[#404040]",children:t??""})]}),u.jsxs("div",{className:"rounded-2xl bg-[#fdf8f2] px-4 py-3 text-right",children:[u.jsx("p",{className:"text-xs font-semibold text-[#7a6f68]",children:" "}),u.jsxs("p",{className:"text-3xl font-bold text-[#404040]",children:[b.toFixed(1),"%"]}),u.jsxs("p",{className:"text-xs text-[#7a6f68]",children:["  ",g," /  ",v,"   ",h,""]})]})]}),c?u.jsx("p",{className:"text-sm text-red-500",children:c}):null]})}),a?u.jsx("div",{className:"flex justify-center py-12",children:u.jsx(Rx,{})}):u.jsx(i1,{students:e,submissions:i,sessions:r,onOpenStudentModal:p})]})},dp=t=>{if(t==null||t==="")return null;const e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e},a1=({refreshToken:t,onEdit:e,onDeleted:n})=>{const[r,s]=y.useState([]),[i,o]=y.useState(!1),[a,l]=y.useState(null),[c,d]=y.useState(null);y.useEffect(()=>{let f=!0;return(async()=>{o(!0),l(null);try{const g=await fetch("/api/admin-content-global-list");if(!g.ok)throw new Error("    .");const v=await g.json();if(!f)return;const b=Array.isArray(v)?v:Array.isArray(v==null?void 0:v.data)?v.data:[];s(b)}catch(g){if(!f)return;console.error("[content] list load failed (global)",g),l("   ."),s([])}finally{if(!f)return;o(!1)}})(),()=>{f=!1}},[t]);const h=async f=>{const p=dp(f);if(p===null){alert("  .  ID.");return}if(window.confirm("?")){d(p);try{if(!(await fetch(`/api/admin-content-global-delete/${p}`,{method:"DELETE"})).ok)throw new Error(" ");n()}catch(g){console.error("[content] delete failed",g),alert(" .  .")}finally{d(null)}}};return u.jsx("div",{className:"rounded-2xl border border-ellieGray/10 p-4",children:i?u.jsx("p",{className:"text-sm text-ellieGray/70",children:"  ..."}):a?u.jsx("p",{className:"text-sm text-red-500",children:a}):r.length===0?u.jsx("p",{className:"text-sm text-ellieGray/70",children:" "}):u.jsx("ul",{className:"divide-y divide-ellieGray/10",children:r.map(f=>{const p=f.id??f.content_id,g=typeof p=="number"?p:dp(p),v=g!==null&&c===g;return u.jsxs("li",{className:"flex flex-col gap-3 py-3 sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-ellieGray",children:f.title??" "}),u.jsx("p",{className:"text-sm text-ellieGray/70",children:f.content??""})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:()=>e(f),className:"rounded-full border border-ellieGray/30 px-4 py-1 text-sm font-semibold text-ellieGray transition hover:border-ellieGray/60",children:""}),u.jsx("button",{type:"button",onClick:()=>h(p),disabled:v,className:"rounded-full bg-red-500 px-4 py-1 text-sm font-semibold text-white disabled:opacity-50",children:""})]})]},p)})})})},Ol={title:"",content:"",isVisible:!0},l1=({onSaved:t,editingItem:e,onCancelEdit:n})=>{const[r,s]=y.useState(Ol),[i,o]=y.useState(!1);y.useEffect(()=>{if(!e){s(Ol);return}s({title:e.title??"",content:e.content??"",isVisible:!!(e.is_visible??e.isVisible??!0)})},[e]);const a=async l=>{if(l.preventDefault(),!i){o(!0);try{const c=!!(e!=null&&e.id),d=e==null?void 0:e.id;if(c&&(d==null||d===""))throw new Error("  ID  .");const h=c?`/api/admin-content-global-update/${d}`:"/api/admin-content-global-create",f=c?"PUT":"POST",p={title:r.title,content:r.content,is_visible:r.isVisible},g=await fetch(h,{method:f,headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(!g.ok){const v=await g.text().catch(()=>"");throw new Error(v||"failed to save global notice")}await Promise.resolve(t()),s(Ol),n()}catch(c){console.error("[content] global notice save error",c),alert(" .  .")}finally{o(!1)}}};return u.jsxs("form",{onSubmit:a,className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:""}),u.jsx("input",{type:"text",value:r.title,onChange:l=>s(c=>({...c,title:l.target.value})),className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",placeholder:" ",required:!0})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:""}),u.jsx("textarea",{value:r.content,onChange:l=>s(c=>({...c,content:l.target.value})),className:"h-32 rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",placeholder:" ",required:!0})]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-ellieGray",children:[u.jsx("input",{type:"checkbox",checked:r.isVisible,onChange:l=>s(c=>({...c,isVisible:l.target.checked})),className:"h-4 w-4"})," "]}),u.jsxs("div",{className:"flex gap-3",children:[e?u.jsx("button",{type:"button",onClick:n,className:"rounded-full border border-ellieGray/30 px-6 py-2 text-sm font-semibold text-ellieGray",children:""}):null,u.jsx("button",{type:"submit",disabled:i,className:"rounded-full bg-ellieYellow px-8 py-2 text-sm font-semibold text-ellieGray disabled:opacity-50",children:i?" ...":""})]})]})},u1=()=>{const[t,e]=y.useState(0),[n,r]=y.useState(null);y.useEffect(()=>{r(null)},[]);const s=()=>{e(i=>i+1),r(null)};return u.jsxs("div",{className:"space-y-6",children:[u.jsx("header",{className:"rounded-3xl bg-white px-6 py-4 shadow-soft",children:u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("h1",{className:"text-xl font-bold text-ellieGray",children:"  "}),u.jsx("p",{className:"text-sm text-ellieGray/70",children:"  , , ."})]})}),u.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-soft",children:[u.jsx(l1,{onSaved:s,editingItem:n,onCancelEdit:()=>r(null)}),u.jsx("div",{className:"mt-8",children:u.jsx(a1,{refreshToken:t,onEdit:r,onDeleted:s})})]})]})},c1=t=>{if(t==null)return null;const e=Number(t);return Number.isNaN(e)?null:e},hp=t=>{if(t==null||t==="")return null;const e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e},d1=({categoryId:t,refreshToken:e,onEdit:n,onDeleted:r})=>{const[s,i]=y.useState([]),[o,a]=y.useState(!1),[l,c]=y.useState(null),[d,h]=y.useState(null);y.useEffect(()=>{let p=!0;return(async()=>{a(!0),c(null);try{const v=c1(t);if(v===null){i([]);return}const{data:b,error:m}=await F.from("vod_videos").select("*").eq("category_id",v).order("order_index",{ascending:!0});if(m)throw m;if(!p)return;const x=Array.isArray(b)?b:[];i(x)}catch(v){if(!p)return;console.error("[vod-content] list load failed",v),c("   ."),i([])}finally{if(!p)return;a(!1)}})(),()=>{p=!1}},[e,t]);const f=async p=>{const g=hp(p);if(g===null){alert("  .  ID.");return}if(window.confirm("?")){h(g);try{if(!(await fetch(`/api/admin-content-vod-delete/${g}`,{method:"DELETE"})).ok)throw new Error(" ");r()}catch(v){console.error("[vod-content] delete failed",v),alert(" .  .")}finally{h(null)}}};return u.jsx("div",{className:"rounded-2xl border border-ellieGray/10 p-4",children:o?u.jsx("p",{className:"text-sm text-ellieGray/70",children:"  ..."}):l?u.jsx("p",{className:"text-sm text-red-500",children:l}):s.length===0?u.jsx("p",{className:"text-sm text-ellieGray/70",children:" "}):u.jsx("ul",{className:"divide-y divide-ellieGray/10",children:s.map(p=>{const g=p.id??p.content_id,v=typeof g=="number"?g:hp(g),b=v!==null&&d===v;return u.jsxs("li",{className:"flex flex-col gap-3 py-3 sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-ellieGray",children:p.title??" "}),u.jsx("p",{className:"text-sm text-ellieGray/70",children:p.url??p.videoUrl??""})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{type:"button",onClick:()=>n(p),className:"rounded-full border border-ellieGray/30 px-4 py-1 text-sm font-semibold text-ellieGray transition hover:border-ellieGray/60",children:""}),u.jsx("button",{type:"button",onClick:()=>f(g),disabled:b,className:"rounded-full bg-red-500 px-4 py-1 text-sm font-semibold text-white disabled:opacity-50",children:""})]})]},g)})})})},h1=t=>{if(t==null||t==="")return null;const e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e},f1=({categoryId:t,categoryOptions:e,onCategoryChange:n,onSaved:r,editingItem:s,onCancelEdit:i})=>{const o=y.useMemo(()=>{var f,p,g;return t||((g=(p=(f=e[0])==null?void 0:f.id)==null?void 0:p.toString)==null?void 0:g.call(p))||""},[t,e]),[a,l]=y.useState({title:"",description:"",videoUrl:"",displayOrder:"0",categoryId:o}),[c,d]=y.useState(!1);y.useEffect(()=>{var f,p,g,v;if(!s){l(b=>({...b,title:"",description:"",videoUrl:"",displayOrder:"0",categoryId:o}));return}l({title:s.title??"",description:s.description??"",videoUrl:s.url??s.videoUrl??"",displayOrder:String(s.order_index??s.order_num??s.displayOrder??"0"),categoryId:((p=(f=s.category_id)==null?void 0:f.toString)==null?void 0:p.call(f))||((v=(g=s.categoryId)==null?void 0:g.toString)==null?void 0:v.call(g))||o})},[s,o]),y.useEffect(()=>{l(f=>({...f,categoryId:o}))},[o]);const h=async f=>{if(f.preventDefault(),!c){d(!0);try{const p=!!(s!=null&&s.id),g=p?`/api/admin-content-vod-update/${s==null?void 0:s.id}`:"/api/admin-content-vod-create",v=p?"PUT":"POST",b={title:a.title,description:a.description,url:a.videoUrl,category_id:Number(a.categoryId),order_index:h1(a.displayOrder)??0};if(!(await fetch(g,{method:v,headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw new Error("failed to save vod video");await Promise.resolve(r()),l({title:"",description:"",videoUrl:"",displayOrder:"0",categoryId:o}),i()}catch(p){console.error("[content] vod video save error",p),alert(" .  .")}finally{d(!1)}}};return u.jsxs("form",{onSubmit:h,className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:""}),u.jsx("select",{value:a.categoryId,onChange:f=>{const p=f.target.value;l(g=>({...g,categoryId:p})),n(p)},className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",children:e.map(f=>u.jsx("option",{value:f.id,children:f.name},f.id))})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:""}),u.jsx("input",{type:"text",value:a.title,onChange:f=>l(p=>({...p,title:f.target.value})),className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",placeholder:" ",required:!0})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:""}),u.jsx("textarea",{value:a.description,onChange:f=>l(p=>({...p,description:f.target.value})),className:"h-24 rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",placeholder:" "})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:" URL"}),u.jsx("input",{type:"url",value:a.videoUrl,onChange:f=>l(p=>({...p,videoUrl:f.target.value})),className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",placeholder:"https://example.com",required:!0})]}),u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("label",{className:"text-sm font-semibold text-ellieGray",children:" "}),u.jsx("input",{type:"number",value:a.displayOrder,onChange:f=>l(p=>({...p,displayOrder:f.target.value})),className:"rounded-2xl border border-ellieGray/20 px-4 py-2 text-sm focus:border-ellieOrange focus:outline-none",min:"0"})]}),u.jsxs("div",{className:"flex gap-3",children:[s?u.jsx("button",{type:"button",onClick:i,className:"rounded-full border border-ellieGray/30 px-6 py-2 text-sm font-semibold text-ellieGray",children:""}):null,u.jsx("button",{type:"submit",disabled:c,className:"rounded-full bg-ellieYellow px-8 py-2 text-sm font-semibold text-ellieGray disabled:opacity-50",children:c?" ...":""})]})]})},p1=()=>{var h,f,p;const[t,e]=y.useState(0),[n,r]=y.useState(null),[s,i]=y.useState([]),[o,a]=y.useState("");y.useEffect(()=>{let g=!0;return(async()=>{try{const b=await kx();if(!g)return;const m=(b??[]).map(x=>({id:String(x.id),name:x.name}));i(m),a(x=>{var w;return x||(((w=m==null?void 0:m[0])==null?void 0:w.id)??"")})}catch(b){if(!g)return;console.error("[vod-content] failed to load categories",b),i([]),a("")}})(),()=>{g=!1}},[]);const l=()=>{e(g=>g+1),r(null)},c=g=>{a(g),r(null)},d=o||((p=(f=(h=s[0])==null?void 0:h.id)==null?void 0:f.toString)==null?void 0:p.call(f))||"";return u.jsxs("div",{className:"space-y-6",children:[u.jsx("header",{className:"rounded-3xl bg-white px-6 py-4 shadow-soft",children:u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("h1",{className:"text-xl font-bold text-ellieGray",children:"VOD  "}),u.jsx("p",{className:"text-sm text-ellieGray/70",children:"VOD   ."})]})}),u.jsxs("section",{className:"rounded-3xl bg-white p-6 shadow-soft",children:[u.jsx(f1,{categoryId:d,categoryOptions:s,onCategoryChange:c,onSaved:l,editingItem:n,onCancelEdit:()=>r(null)}),u.jsx("div",{className:"mt-8",children:u.jsx(d1,{categoryId:d,refreshToken:t,onEdit:r,onDeleted:l})})]})]})},m1=t=>{if(!t)return!1;const e=`${t.name??""} ${t.code??""}`.toLowerCase();return e.includes("")||e.includes("michina")},g1=()=>{const{user:t}=_n(),e=Ue(),[n,r]=y.useState([]),[s,i]=y.useState(""),[o,a]=y.useState([]),[l,c]=y.useState([]),[d,h]=y.useState([]),[f,p]=y.useState(!0),[g,v]=y.useState(null);y.useEffect(()=>{if(!t){e("/login");return}t.role!=="admin"&&e("/my")},[t,e]);const b=y.useMemo(()=>n.find(S=>String(S.id)===s)??null,[n,s]),m=y.useMemo(()=>b!=null&&b.total_sessions&&b.total_sessions>0?b.total_sessions:m1(b)?21:void 0,[b]);if(y.useEffect(()=>{(async()=>{p(!0),v(null);const{data:N,error:E}=await F.from("classes").select("id, name, code, total_sessions");if(E){v(E.message),r([]),p(!1);return}const C=N??[];r(C),i(k=>{var I;return k||((I=C[0])!=null&&I.id?String(C[0].id):"")}),p(!1)})()},[]),y.useEffect(()=>{(async()=>{if(!s){a([]),c([]),h([]);return}p(!0),v(null);const{data:N,error:E}=await F.from("assignments").select("id, title, classroom_id").eq("classroom_id",s);if(E){v(E.message),a([]),c([]),h([]),p(!1);return}const C=(N??[]).map(z=>z.id),{data:k,error:I}=C.length?await F.from("assignment_submissions").select("id, assignment_id, student_id, created_at").in("assignment_id",C):{data:[],error:null};if(I){v(I.message),a(N??[]),c([]),h([]),p(!1);return}const ee=new Set;(k??[]).forEach(z=>{z.student_id&&ee.add(z.student_id)});let D=[];const{data:G,error:L}=await F.from("class_students").select("student_id, profiles ( id, name, email )").eq("classroom_id",s);if(!L&&G)D=G.map(z=>z.profiles).filter(Boolean);else if(ee.size>0){const{data:z}=await F.from("profiles").select("id, name, email").in("id",Array.from(ee));D=z??[]}else{const{data:z}=await F.from("profiles").select("id, name, email").eq("role","student");D=z??[]}a(N??[]),c(k??[]),h(D),p(!1)})()},[s]),!t||t.role!=="admin")return null;const x=new Map;l.forEach(S=>{const N=S.student_id?String(S.student_id):"";if(!N)return;const E=x.get(N)??[];E.push(S),x.set(N,E)});const w=d.filter(S=>x.has(S.id)),_=d.filter(S=>!x.has(S.id)),j=m?d.filter(S=>{var N;return(((N=x.get(S.id))==null?void 0:N.length)??0)>=m}):[];return u.jsxs("div",{className:"space-y-5 p-6",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsx("h1",{className:"text-xl font-bold",children:"  "}),u.jsx("p",{className:"text-sm text-[#6b625c]",children:" , ,  ."})]}),g?u.jsx("div",{className:"rounded-2xl bg-red-50 px-4 py-3 text-sm text-red-700 shadow-inner",children:g}):null,u.jsxs("div",{className:"rounded-2xl bg-white px-4 py-3 shadow-soft",children:[u.jsx("label",{className:"text-sm font-semibold text-[#404040]",htmlFor:"class-select",children:" "}),u.jsx("select",{id:"class-select",className:"mt-2 w-full rounded-xl border border-[#e5d4a2] px-3 py-2 text-sm",value:s,onChange:S=>i(S.target.value),children:n.map(S=>u.jsx("option",{value:S.id,children:S.name},S.id))})]}),f?u.jsx("div",{className:"rounded-2xl bg-white px-4 py-5 text-sm text-[#6b625c] shadow-soft",children:" ..."}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("section",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-lg font-semibold text-[#1f5139]",children:" "}),u.jsxs("span",{className:"rounded-full bg-[#e9f7ef] px-3 py-1 text-xs font-semibold text-[#1f5139]",children:[w.length,""]})]}),w.length===0?u.jsx("p",{className:"rounded-2xl bg-white px-4 py-3 text-sm text-[#6b625c] shadow-soft",children:"  ."}):u.jsx("div",{className:"space-y-2",children:w.map(S=>{var N,E,C,k;return u.jsx("div",{className:"rounded-2xl bg-[#e9f7ef] px-4 py-3 text-sm text-[#1f5139] shadow-soft",children:u.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold",children:S.name||" "}),u.jsx("p",{className:"text-xs text-[#3c6e58]",children:S.email||S.id}),u.jsxs("p",{className:"text-xs text-[#3c6e58]",children:[" ",((N=x.get(S.id))==null?void 0:N.length)??0,"",m?` /  ${m}`:""]})]}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsx(De,{to:`/classroom/${s}/feedback`,className:"rounded-full bg-white px-4 py-2 text-xs font-semibold text-[#1f5139] shadow",children:" "}),u.jsxs("span",{className:"rounded-full bg-white/80 px-3 py-1 text-[11px] font-semibold text-[#1f5139]",children:[" : ",((k=(C=(E=x.get(S.id))==null?void 0:E.sort((I,ee)=>(I.created_at||"").localeCompare(ee.created_at||"")).slice(-1)[0])==null?void 0:C.created_at)==null?void 0:k.slice(0,10))??" "]})]})]})},S.id)})})]}),u.jsxs("section",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-lg font-semibold text-[#5c5246]",children:""}),u.jsxs("span",{className:"rounded-full bg-[#f3f1ef] px-3 py-1 text-xs font-semibold text-[#5c5246]",children:[_.length,""]})]}),_.length===0?u.jsx("p",{className:"rounded-2xl bg-white px-4 py-3 text-sm text-[#6b625c] shadow-soft",children:" ."}):u.jsx("div",{className:"space-y-2",children:_.map(S=>u.jsx("div",{className:"rounded-2xl bg-[#f3f1ef] px-4 py-3 text-sm text-[#5c5246] shadow-soft",children:u.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold",children:S.name||" "}),u.jsx("p",{className:"text-xs text-[#6b625c]",children:S.email||S.id})]}),u.jsx(De,{to:`/classroom/${s}/feedback`,className:"rounded-full bg-white px-4 py-2 text-xs font-semibold text-[#5c5246] shadow",children:" "})]})},S.id))})]}),u.jsxs("section",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-lg font-semibold text-[#2c3e50]",children:" "}),u.jsxs("span",{className:"rounded-full bg-[#dceafe] px-3 py-1 text-xs font-semibold text-[#2c3e50]",children:[j.length,""]})]}),m?u.jsxs("p",{className:"text-xs text-[#2c3e50]",children:[" ",m,"    ."]}):u.jsx("p",{className:"text-xs text-[#2c3e50]",children:"       ."}),j.length===0?u.jsx("p",{className:"rounded-2xl bg-white px-4 py-3 text-sm text-[#6b625c] shadow-soft",children:" ."}):u.jsx("div",{className:"space-y-2",children:j.map(S=>{var N;return u.jsx("div",{className:"rounded-2xl bg-[#dceafe] px-4 py-3 text-sm text-[#1f2f3d] shadow-soft",children:u.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold",children:S.name||" "}),u.jsx("p",{className:"text-xs text-[#1f2f3d]",children:S.email||S.id}),u.jsxs("p",{className:"text-xs text-[#1f2f3d]",children:[" ",((N=x.get(S.id))==null?void 0:N.length)??0,""]})]}),u.jsx(De,{to:`/classroom/${s}/feedback`,className:"rounded-full bg-white px-4 py-2 text-xs font-semibold text-[#1f2f3d] shadow",children:" "})]})},S.id)})})]})]})]})},y1=`
create table if not exists notification_settings (
  id uuid primary key default uuid_generate_v4(),
  admin_id uuid references profiles(id),
  classroom_id uuid references classes(id),
  notifications_enabled boolean default true,
  created_at timestamptz default now()
);
`,v1=()=>{const{user:t}=_n(),e=Ue(),[n,r]=y.useState([]),[s,i]=y.useState({}),[o,a]=y.useState(!0),[l,c]=y.useState(!1),[d,h]=y.useState(null),[f,p]=y.useState("");y.useEffect(()=>{if(!t){e("/login");return}t.role!=="admin"&&e("/my")},[t,e]);const g=y.useMemo(()=>(t==null?void 0:t.id)??null,[t==null?void 0:t.id]);y.useEffect(()=>{const b=async()=>{const{error:_}=await F.from("notification_settings").select("id",{head:!0,count:"exact"});_&&_.code==="42P01"&&await F.rpc("execute_sql",{sql:y1})},m=async()=>{const{data:_,error:j}=await F.from("classes").select("id, name, code");if(j)throw j;r(_??[])},x=async()=>{if(!g)return;const{data:_,error:j}=await F.from("notification_settings").select("classroom_id, notifications_enabled").eq("admin_id",g);if(j)throw j;const S={};_==null||_.forEach(N=>{S[N.classroom_id]=N.notifications_enabled??!0}),i(S)};(async()=>{if(g){a(!0),h(null),p("");try{await b(),await m(),await x()}catch(_){console.error("[NotificationSettings] failed to load data",_),h((_==null?void 0:_.message)??"      .")}finally{a(!1)}}})()},[g]);const v=async b=>{if(!g)return;const m=!(s[b]??!0);i(w=>({...w,[b]:m})),c(!0),p("");const{error:x}=await F.from("notification_settings").upsert({admin_id:g,classroom_id:b,notifications_enabled:m});if(x){console.error("[NotificationSettings] failed to save",x),p(" .  ."),c(!1);return}c(!1),p(".")};return!t||t.role!=="admin"?null:u.jsxs("div",{className:"space-y-4 p-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold",children:" "}),u.jsx("p",{className:"text-sm text-[#6b625c]",children:"    ."})]}),d?u.jsx("div",{className:"rounded-2xl bg-red-50 px-4 py-3 text-sm text-red-700 shadow-inner",children:d}):null,u.jsx("div",{className:"space-y-3",children:o?u.jsx("div",{className:"rounded-2xl bg-white px-4 py-5 text-sm text-[#6b625c] shadow-soft",children:" ..."}):n.length===0?u.jsx("div",{className:"rounded-2xl bg-white px-4 py-5 text-sm text-[#6b625c] shadow-soft",children:"  ."}):n.map(b=>u.jsx("div",{className:"rounded-2xl bg-white px-5 py-4 shadow-soft",children:u.jsxs("div",{className:"flex items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-[#c18f1f]",children:b.code}),u.jsx("h3",{className:"text-base font-bold text-[#404040]",children:b.name})]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-[#404040]",children:[u.jsx("input",{type:"checkbox",checked:s[b.id]??!0,onChange:()=>v(b.id),className:"h-5 w-5 rounded border-[#e5d4a2] text-[#fbd743] focus:ring-[#fbd743]"})," "]})]})},b.id))}),f?u.jsx("p",{className:"text-sm text-[#6b625c]",children:f}):null,l?u.jsx("p",{className:"text-xs text-[#6b625c]",children:" ..."}):null]})},x1=()=>u.jsxs(u.Fragment,{children:[u.jsx(W,{path:"/admin/my",element:u.jsx(Tx,{})}),u.jsx(W,{path:"/admin/my/notifications",element:u.jsx(v1,{})}),u.jsx(W,{path:"/admin/my/assignments",element:u.jsx(g1,{})})]}),Id=y.createContext({});function Dd(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ba=y.createContext(null),Ld=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class w1 extends y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function b1({children:t,isPresent:e}){const n=y.useId(),r=y.useRef(null),s=y.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=y.useContext(Ld);return y.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return i&&(d.nonce=i),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),u.jsx(w1,{isPresent:e,childRef:r,sizeRef:s,children:y.cloneElement(t,{ref:r})})}const _1=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=Dd(S1),l=y.useId(),c=y.useCallback(h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},[a,r]),d=y.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:c,register:h=>(a.set(h,!1),()=>a.delete(h))}),i?[Math.random(),c]:[n,c]);return y.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),y.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=u.jsx(b1,{isPresent:n,children:t})),u.jsx(Ba.Provider,{value:d,children:t})};function S1(){return new Map}function $x(t=!0){const e=y.useContext(Ba);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=y.useId();y.useEffect(()=>{t&&s(i)},[t]);const o=y.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const Xi=t=>t.key||"";function fp(t){const e=[];return y.Children.forEach(t,n=>{y.isValidElement(n)&&e.push(n)}),e}const $d=typeof window<"u",Mx=$d?y.useLayoutEffect:y.useEffect,j1=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1})=>{const[a,l]=$x(o),c=y.useMemo(()=>fp(t),[t]),d=o&&!a?[]:c.map(Xi),h=y.useRef(!0),f=y.useRef(c),p=Dd(()=>new Map),[g,v]=y.useState(c),[b,m]=y.useState(c);Mx(()=>{h.current=!1,f.current=c;for(let _=0;_<b.length;_++){const j=Xi(b[_]);d.includes(j)?p.delete(j):p.get(j)!==!0&&p.set(j,!1)}},[b,d.length,d.join("-")]);const x=[];if(c!==g){let _=[...c];for(let j=0;j<b.length;j++){const S=b[j],N=Xi(S);d.includes(N)||(_.splice(j,0,S),x.push(S))}i==="wait"&&x.length&&(_=x),m(fp(_)),v(c);return}const{forceRender:w}=y.useContext(Id);return u.jsx(u.Fragment,{children:b.map(_=>{const j=Xi(_),S=o&&!a?!1:c===b||d.includes(j),N=()=>{if(p.has(j))p.set(j,!0);else return;let E=!0;p.forEach(C=>{C||(E=!1)}),E&&(w==null||w(),m(f.current),o&&(l==null||l()),r&&r())};return u.jsx(_1,{isPresent:S,initial:!h.current||n?void 0:!1,custom:S?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:S?void 0:N,children:_},j)})})},Qe=t=>t;let Ux=Qe;function Md(t){let e;return()=>(e===void 0&&(e=t()),e)}const Kr=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Dt=t=>t*1e3,Lt=t=>t/1e3,E1={useManualTiming:!1};function N1(t){let e=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){i.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,d=!1,h=!1)=>{const p=h&&r?e:n;return d&&i.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),i.delete(c)},process:c=>{if(o=c,r){s=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,s&&(s=!1,l.process(c))}};return l}const Zi=["read","resolveKeyframes","update","preRender","render","postRender"],k1=40;function Vx(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=Zi.reduce((m,x)=>(m[x]=N1(i),m),{}),{read:a,resolveKeyframes:l,update:c,preRender:d,render:h,postRender:f}=o,p=()=>{const m=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(m-s.timestamp,k1),1),s.timestamp=m,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),d.process(s),h.process(s),f.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(p))},g=()=>{n=!0,r=!0,s.isProcessing||t(p)};return{schedule:Zi.reduce((m,x)=>{const w=o[x];return m[x]=(_,j=!1,S=!1)=>(n||g(),w.schedule(_,j,S)),m},{}),cancel:m=>{for(let x=0;x<Zi.length;x++)o[Zi[x]].cancel(m)},state:s,steps:o}}const{schedule:Z,cancel:mn,state:je,steps:Il}=Vx(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qe,!0),Fx=y.createContext({strict:!1}),pp={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hr={};for(const t in pp)Hr[t]={isEnabled:e=>pp[t].some(n=>!!e[n])};function T1(t){for(const e in t)Hr[e]={...Hr[e],...t[e]}}const C1=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function oa(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||C1.has(t)}let Bx=t=>!oa(t);function P1(t){t&&(Bx=e=>e.startsWith("on")?!oa(e):t(e))}try{P1(require("@emotion/is-prop-valid").default)}catch{}function A1(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(Bx(s)||n===!0&&oa(s)||!e&&!oa(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function R1(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Ga=y.createContext({});function si(t){return typeof t=="string"||Array.isArray(t)}function za(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Ud=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Vd=["initial",...Ud];function Wa(t){return za(t.animate)||Vd.some(e=>si(t[e]))}function Gx(t){return!!(Wa(t)||t.variants)}function O1(t,e){if(Wa(t)){const{initial:n,animate:r}=t;return{initial:n===!1||si(n)?n:void 0,animate:si(r)?r:void 0}}return t.inherit!==!1?e:{}}function I1(t){const{initial:e,animate:n}=O1(t,y.useContext(Ga));return y.useMemo(()=>({initial:e,animate:n}),[mp(e),mp(n)])}function mp(t){return Array.isArray(t)?t.join(" "):t}const D1=Symbol.for("motionComponentSymbol");function _r(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function L1(t,e,n){return y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):_r(n)&&(n.current=r))},[e])}const Fd=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$1="framerAppearId",zx="data-"+Fd($1),{schedule:Bd}=Vx(queueMicrotask,!1),Wx=y.createContext({});function M1(t,e,n,r,s){var i,o;const{visualElement:a}=y.useContext(Ga),l=y.useContext(Fx),c=y.useContext(Ba),d=y.useContext(Ld).reducedMotion,h=y.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const f=h.current,p=y.useContext(Wx);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&U1(h.current,n,s,p);const g=y.useRef(!1);y.useInsertionEffect(()=>{f&&g.current&&f.update(n,c)});const v=n[zx],b=y.useRef(!!v&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,v))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,v)));return Mx(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Bd.render(f.render),b.current&&f.animationState&&f.animationState.animateChanges())}),y.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)===null||m===void 0||m.call(window,v)}),b.current=!1))}),f}function U1(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Kx(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&_r(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function Kx(t){if(t)return t.options.allowProjection!==!1?t.projection:Kx(t.parent)}function V1({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){var i,o;t&&T1(t);function a(c,d){let h;const f={...y.useContext(Ld),...c,layoutId:F1(c)},{isStatic:p}=f,g=I1(c),v=r(c,p);if(!p&&$d){B1();const b=G1(f);h=b.MeasureLayout,g.visualElement=M1(s,v,f,e,b.ProjectionNode)}return u.jsxs(Ga.Provider,{value:g,children:[h&&g.visualElement?u.jsx(h,{visualElement:g.visualElement,...f}):null,n(s,c,L1(v,g.visualElement,d),v,p,g.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const l=y.forwardRef(a);return l[D1]=s,l}function F1({layoutId:t}){const e=y.useContext(Id).id;return e&&t!==void 0?e+"-"+t:t}function B1(t,e){y.useContext(Fx).strict}function G1(t){const{drag:e,layout:n}=Hr;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const z1=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gd(t){return typeof t!="string"||t.includes("-")?!1:!!(z1.indexOf(t)>-1||/[A-Z]/u.test(t))}function gp(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function zd(t,e,n,r){if(typeof e=="function"){const[s,i]=gp(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=gp(r);e=e(n!==void 0?n:t.custom,s,i)}return e}const uc=t=>Array.isArray(t),W1=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),K1=t=>uc(t)?t[t.length-1]||0:t,Re=t=>!!(t&&t.getVelocity);function wo(t){const e=Re(t)?t.get():t;return W1(e)?e.toValue():e}function H1({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,i){const o={latestValues:q1(r,s,i,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const Hx=t=>(e,n)=>{const r=y.useContext(Ga),s=y.useContext(Ba),i=()=>H1(t,e,r,s);return n?i():Dd(i)};function q1(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=wo(i[f]);let{initial:o,animate:a}=t;const l=Wa(t),c=Gx(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!za(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const g=zd(t,f[p]);if(g){const{transitionEnd:v,transition:b,...m}=g;for(const x in m){let w=m[x];if(Array.isArray(w)){const _=d?w.length-1:0;w=w[_]}w!==null&&(s[x]=w)}for(const x in v)s[x]=v[x]}}}return s}const rs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],er=new Set(rs),qx=t=>e=>typeof e=="string"&&e.startsWith(t),Jx=qx("--"),J1=qx("var(--"),Wd=t=>J1(t)?Y1.test(t.split("/*")[0].trim()):!1,Y1=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Yx=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ft=(t,e,n)=>n>e?e:n<t?t:n,ss={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ii={...ss,transform:t=>Ft(0,1,t)},eo={...ss,default:1},yi=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ht=yi("deg"),kt=yi("%"),M=yi("px"),Q1=yi("vh"),X1=yi("vw"),yp={...kt,parse:t=>kt.parse(t)/100,transform:t=>kt.transform(t*100)},Z1={borderWidth:M,borderTopWidth:M,borderRightWidth:M,borderBottomWidth:M,borderLeftWidth:M,borderRadius:M,radius:M,borderTopLeftRadius:M,borderTopRightRadius:M,borderBottomRightRadius:M,borderBottomLeftRadius:M,width:M,maxWidth:M,height:M,maxHeight:M,top:M,right:M,bottom:M,left:M,padding:M,paddingTop:M,paddingRight:M,paddingBottom:M,paddingLeft:M,margin:M,marginTop:M,marginRight:M,marginBottom:M,marginLeft:M,backgroundPositionX:M,backgroundPositionY:M},eT={rotate:Ht,rotateX:Ht,rotateY:Ht,rotateZ:Ht,scale:eo,scaleX:eo,scaleY:eo,scaleZ:eo,skew:Ht,skewX:Ht,skewY:Ht,distance:M,translateX:M,translateY:M,translateZ:M,x:M,y:M,z:M,perspective:M,transformPerspective:M,opacity:ii,originX:yp,originY:yp,originZ:M},vp={...ss,transform:Math.round},Kd={...Z1,...eT,zIndex:vp,size:M,fillOpacity:ii,strokeOpacity:ii,numOctaves:vp},tT={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},nT=rs.length;function rT(t,e,n){let r="",s=!0;for(let i=0;i<nT;i++){const o=rs[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=Yx(a,Kd[o]);if(!l){s=!1;const d=tT[o]||o;r+=`${d}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Hd(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(er.has(l)){o=!0;continue}else if(Jx(l)){s[l]=c;continue}else{const d=Yx(c,Kd[l]);l.startsWith("origin")?(a=!0,i[l]=d):r[l]=d}}if(e.transform||(o||n?r.transform=rT(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${c} ${d}`}}const sT={offset:"stroke-dashoffset",array:"stroke-dasharray"},iT={offset:"strokeDashoffset",array:"strokeDasharray"};function oT(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?sT:iT;t[i.offset]=M.transform(-r);const o=M.transform(e),a=M.transform(n);t[i.array]=`${o} ${a}`}function xp(t,e,n){return typeof t=="string"?t:M.transform(e+n*t)}function aT(t,e,n){const r=xp(e,t.x,t.width),s=xp(n,t.y,t.height);return`${r} ${s}`}function qd(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,h){if(Hd(t,c,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:g}=t;f.transform&&(g&&(p.transform=f.transform),delete f.transform),g&&(s!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=aT(g,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&oT(f,o,a,l,!1)}const Jd=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Qx=()=>({...Jd(),attrs:{}}),Yd=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Xx(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const Zx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function e0(t,e,n,r){Xx(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Zx.has(s)?s:Fd(s),e.attrs[s])}const aa={};function lT(t){Object.assign(aa,t)}function t0(t,{layout:e,layoutId:n}){return er.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!aa[t]||t==="opacity")}function Qd(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(Re(s[o])||e.style&&Re(e.style[o])||t0(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function n0(t,e,n){const r=Qd(t,e,n);for(const s in t)if(Re(t[s])||Re(e[s])){const i=rs.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}function uT(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const wp=["x","y","width","height","cx","cy","r"],cT={useVisualState:Hx({scrapeMotionValuesFromProps:n0,createRenderState:Qx,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!t.drag;if(!i){for(const a in s)if(er.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<wp.length;a++){const l=wp[a];t[l]!==e[l]&&(o=!0)}o&&Z.read(()=>{uT(n,r),Z.render(()=>{qd(r,s,Yd(n.tagName),t.transformTemplate),e0(n,r)})})}})},dT={useVisualState:Hx({scrapeMotionValuesFromProps:Qd,createRenderState:Jd})};function r0(t,e,n){for(const r in e)!Re(e[r])&&!t0(r,n)&&(t[r]=e[r])}function hT({transformTemplate:t},e){return y.useMemo(()=>{const n=Jd();return Hd(n,e,t),Object.assign({},n.vars,n.style)},[e])}function fT(t,e){const n=t.style||{},r={};return r0(r,n,t),Object.assign(r,hT(t,e)),r}function pT(t,e){const n={},r=fT(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function mT(t,e,n,r){const s=y.useMemo(()=>{const i=Qx();return qd(i,e,Yd(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};r0(i,t.style,t),s.style={...i,...s.style}}return s}function gT(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(Gd(n)?mT:pT)(r,i,o,n),c=A1(r,typeof n=="string",t),d=n!==y.Fragment?{...c,...l,ref:s}:{},{children:h}=r,f=y.useMemo(()=>Re(h)?h.get():h,[h]);return y.createElement(n,{...d,children:f})}}function yT(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...Gd(r)?cT:dT,preloadedFeatures:t,useRender:gT(s),createVisualElement:e,Component:r};return V1(o)}}function s0(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Ka(t,e,n){const r=t.getProps();return zd(r,e,n!==void 0?n:r.custom,t)}const vT=Md(()=>window.ScrollTimeline!==void 0);class xT{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(vT()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class wT extends xT{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Xd(t,e){return t?t[e]||t.default||t:void 0}const cc=2e4;function i0(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<cc;)e+=n,r=t.next(e);return e>=cc?1/0:e}function Zd(t){return typeof t=="function"}function bp(t,e){t.timeline=e,t.onfinish=null}const eh=t=>Array.isArray(t)&&typeof t[0]=="number",bT={linearEasing:void 0};function _T(t,e){const n=Md(t);return()=>{var r;return(r=bT[e])!==null&&r!==void 0?r:n()}}const la=_T(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),o0=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=t(Kr(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function a0(t){return!!(typeof t=="function"&&la()||!t||typeof t=="string"&&(t in dc||la())||eh(t)||Array.isArray(t)&&t.every(a0))}const ws=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,dc={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ws([0,.65,.55,1]),circOut:ws([.55,0,1,.45]),backIn:ws([.31,.01,.66,-.59]),backOut:ws([.33,1.53,.69,.99])};function l0(t,e){if(t)return typeof t=="function"&&la()?o0(t,e):eh(t)?ws(t):Array.isArray(t)?t.map(n=>l0(n,e)||dc.easeOut):dc[t]}const ht={x:!1,y:!1};function u0(){return ht.x||ht.y}function ST(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function c0(t,e){const n=ST(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function _p(t){return e=>{e.pointerType==="touch"||u0()||t(e)}}function jT(t,e,n={}){const[r,s,i]=c0(t,n),o=_p(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const d=_p(h=>{c(h),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,s)});return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const d0=(t,e)=>e?t===e?!0:d0(t,e.parentElement):!1,th=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ET=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function NT(t){return ET.has(t.tagName)||t.tabIndex!==-1}const bs=new WeakSet;function Sp(t){return e=>{e.key==="Enter"&&t(e)}}function Dl(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const kT=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Sp(()=>{if(bs.has(n))return;Dl(n,"down");const s=Sp(()=>{Dl(n,"up")}),i=()=>Dl(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function jp(t){return th(t)&&!u0()}function TT(t,e,n={}){const[r,s,i]=c0(t,n),o=a=>{const l=a.currentTarget;if(!jp(a)||bs.has(l))return;bs.add(l);const c=e(a),d=(p,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!jp(p)||!bs.has(l))&&(bs.delete(l),typeof c=="function"&&c(p,{success:g}))},h=p=>{d(p,n.useGlobalTarget||d0(l,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(a=>{!NT(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",c=>kT(c,s),s)}),i}function CT(t){return t==="x"||t==="y"?ht[t]?null:(ht[t]=!0,()=>{ht[t]=!1}):ht.x||ht.y?null:(ht.x=ht.y=!0,()=>{ht.x=ht.y=!1})}const h0=new Set(["width","height","top","left","right","bottom",...rs]);let bo;function PT(){bo=void 0}const Tt={now:()=>(bo===void 0&&Tt.set(je.isProcessing||E1.useManualTiming?je.timestamp:performance.now()),bo),set:t=>{bo=t,queueMicrotask(PT)}};function nh(t,e){t.indexOf(e)===-1&&t.push(e)}function rh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class sh{constructor(){this.subscriptions=[]}add(e){return nh(this.subscriptions,e),()=>rh(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function f0(t,e){return e?t*(1e3/e):0}const Ep=30,AT=t=>!isNaN(parseFloat(t));class RT{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=Tt.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Tt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=AT(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new sh);const r=this.events[e].add(n);return e==="change"?()=>{r(),Z.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Tt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ep)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ep);return f0(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function oi(t,e){return new RT(t,e)}function OT(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,oi(n))}function IT(t,e){const n=Ka(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=K1(i[o]);OT(t,o,a)}}function DT(t){return!!(Re(t)&&t.add)}function hc(t,e){const n=t.getValue("willChange");if(DT(n))return n.add(e)}function p0(t){return t.props[zx]}const m0=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,LT=1e-7,$T=12;function MT(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=m0(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>LT&&++a<$T);return o}function vi(t,e,n,r){if(t===e&&n===r)return Qe;const s=i=>MT(i,0,1,t,n);return i=>i===0||i===1?i:m0(s(i),e,r)}const g0=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,y0=t=>e=>1-t(1-e),v0=vi(.33,1.53,.69,.99),ih=y0(v0),x0=g0(ih),w0=t=>(t*=2)<1?.5*ih(t):.5*(2-Math.pow(2,-10*(t-1))),oh=t=>1-Math.sin(Math.acos(t)),b0=y0(oh),_0=g0(oh),S0=t=>/^0[^.\s]+$/u.test(t);function UT(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||S0(t):!0}const Os=t=>Math.round(t*1e5)/1e5,ah=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function VT(t){return t==null}const FT=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lh=(t,e)=>n=>!!(typeof n=="string"&&FT.test(n)&&n.startsWith(t)||e&&!VT(n)&&Object.prototype.hasOwnProperty.call(n,e)),j0=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(ah);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},BT=t=>Ft(0,255,t),Ll={...ss,transform:t=>Math.round(BT(t))},Bn={test:lh("rgb","red"),parse:j0("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ll.transform(t)+", "+Ll.transform(e)+", "+Ll.transform(n)+", "+Os(ii.transform(r))+")"};function GT(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const fc={test:lh("#"),parse:GT,transform:Bn.transform},Sr={test:lh("hsl","hue"),parse:j0("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+kt.transform(Os(e))+", "+kt.transform(Os(n))+", "+Os(ii.transform(r))+")"},Ce={test:t=>Bn.test(t)||fc.test(t)||Sr.test(t),parse:t=>Bn.test(t)?Bn.parse(t):Sr.test(t)?Sr.parse(t):fc.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Bn.transform(t):Sr.transform(t)},zT=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function WT(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ah))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(zT))===null||n===void 0?void 0:n.length)||0)>0}const E0="number",N0="color",KT="var",HT="var(",Np="${}",qT=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ai(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(qT,l=>(Ce.test(l)?(r.color.push(i),s.push(N0),n.push(Ce.parse(l))):l.startsWith(HT)?(r.var.push(i),s.push(KT),n.push(l)):(r.number.push(i),s.push(E0),n.push(parseFloat(l))),++i,Np)).split(Np);return{values:n,split:a,indexes:r,types:s}}function k0(t){return ai(t).values}function T0(t){const{split:e,types:n}=ai(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===E0?i+=Os(s[o]):a===N0?i+=Ce.transform(s[o]):i+=s[o]}return i}}const JT=t=>typeof t=="number"?0:t;function YT(t){const e=k0(t);return T0(t)(e.map(JT))}const gn={test:WT,parse:k0,createTransformer:T0,getAnimatableNone:YT},QT=new Set(["brightness","contrast","saturate","opacity"]);function XT(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ah)||[];if(!r)return t;const s=n.replace(r,"");let i=QT.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const ZT=/\b([a-z-]*)\(.*?\)/gu,pc={...gn,getAnimatableNone:t=>{const e=t.match(ZT);return e?e.map(XT).join(" "):t}},eC={...Kd,color:Ce,backgroundColor:Ce,outlineColor:Ce,fill:Ce,stroke:Ce,borderColor:Ce,borderTopColor:Ce,borderRightColor:Ce,borderBottomColor:Ce,borderLeftColor:Ce,filter:pc,WebkitFilter:pc},uh=t=>eC[t];function C0(t,e){let n=uh(t);return n!==pc&&(n=gn),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const tC=new Set(["auto","none","0"]);function nC(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!tC.has(i)&&ai(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=C0(n,s)}const kp=t=>t===ss||t===M,Tp=(t,e)=>parseFloat(t.split(", ")[e]),Cp=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return Tp(s[1],e);{const i=r.match(/^matrix\((.+)\)$/u);return i?Tp(i[1],t):0}},rC=new Set(["x","y","z"]),sC=rs.filter(t=>!rC.has(t));function iC(t){const e=[];return sC.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const qr={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Cp(4,13),y:Cp(5,14)};qr.translateX=qr.x;qr.translateY=qr.y;const Wn=new Set;let mc=!1,gc=!1;function P0(){if(gc){const t=Array.from(Wn).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=iC(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}gc=!1,mc=!1,Wn.forEach(t=>t.complete()),Wn.clear()}function A0(){Wn.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(gc=!0)})}function oC(){A0(),P0()}class ch{constructor(e,n,r,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Wn.add(this),mc||(mc=!0,Z.read(A0),Z.resolveKeyframes(P0))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Wn.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Wn.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const R0=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),aC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lC(t){const e=aC.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function O0(t,e,n=1){const[r,s]=lC(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return R0(o)?parseFloat(o):o}return Wd(s)?O0(s,e,n+1):s}const I0=t=>e=>e.test(t),uC={test:t=>t==="auto",parse:t=>t},D0=[ss,M,kt,Ht,X1,Q1,uC],Pp=t=>D0.find(I0(t));class L0 extends ch{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Wd(c))){const d=O0(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!h0.has(r)||e.length!==2)return;const[s,i]=e,o=Pp(s),a=Pp(i);if(o!==a)if(kp(o)&&kp(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)UT(e[s])&&r.push(s);r.length&&nC(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qr[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=qr[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const Ap=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(gn.test(t)||t==="0")&&!t.startsWith("url("));function cC(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function dC(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=Ap(s,e),a=Ap(i,e);return!o||!a?!1:cC(t)||(n==="spring"||Zd(n))&&r}const hC=t=>t!==null;function Ha(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(hC),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const fC=40;class $0{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Tt.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>fC?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&oC(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Tt.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!dC(e,r,s,i))if(o)this.options.duration=0;else{l&&l(Ha(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ie=(t,e,n)=>t+(e-t)*n;function $l(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function pC({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=$l(l,a,t+1/3),i=$l(l,a,t),o=$l(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function ua(t,e){return n=>n>0?e:t}const Ml=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},mC=[fc,Bn,Sr],gC=t=>mC.find(e=>e.test(t));function Rp(t){const e=gC(t);if(!e)return!1;let n=e.parse(t);return e===Sr&&(n=pC(n)),n}const Op=(t,e)=>{const n=Rp(t),r=Rp(e);if(!n||!r)return ua(t,e);const s={...n};return i=>(s.red=Ml(n.red,r.red,i),s.green=Ml(n.green,r.green,i),s.blue=Ml(n.blue,r.blue,i),s.alpha=ie(n.alpha,r.alpha,i),Bn.transform(s))},yC=(t,e)=>n=>e(t(n)),xi=(...t)=>t.reduce(yC),yc=new Set(["none","hidden"]);function vC(t,e){return yc.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function xC(t,e){return n=>ie(t,e,n)}function dh(t){return typeof t=="number"?xC:typeof t=="string"?Wd(t)?ua:Ce.test(t)?Op:_C:Array.isArray(t)?M0:typeof t=="object"?Ce.test(t)?Op:wC:ua}function M0(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>dh(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function wC(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=dh(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function bC(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[i]=l,s[o]++}return r}const _C=(t,e)=>{const n=gn.createTransformer(e),r=ai(t),s=ai(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?yc.has(t)&&!s.values.length||yc.has(e)&&!r.values.length?vC(t,e):xi(M0(bC(r,s),s.values),n):ua(t,e)};function U0(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ie(t,e,n):dh(t)(t,e)}const SC=5;function V0(t,e,n){const r=Math.max(e-SC,0);return f0(n-t(r),e-r)}const ue={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ul=.001;function jC({duration:t=ue.duration,bounce:e=ue.bounce,velocity:n=ue.velocity,mass:r=ue.mass}){let s,i,o=1-e;o=Ft(ue.minDamping,ue.maxDamping,o),t=Ft(ue.minDuration,ue.maxDuration,Lt(t)),o<1?(s=c=>{const d=c*o,h=d*t,f=d-n,p=vc(c,o),g=Math.exp(-h);return Ul-f/p*g},i=c=>{const h=c*o*t,f=h*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,g=Math.exp(-h),v=vc(Math.pow(c,2),o);return(-s(c)+Ul>0?-1:1)*((f-p)*g)/v}):(s=c=>{const d=Math.exp(-c*t),h=(c-n)*t+1;return-Ul+d*h},i=c=>{const d=Math.exp(-c*t),h=(n-c)*(t*t);return d*h});const a=5/t,l=NC(s,i,a);if(t=Dt(t),isNaN(l))return{stiffness:ue.stiffness,damping:ue.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const EC=12;function NC(t,e,n){let r=n;for(let s=1;s<EC;s++)r=r-t(r)/e(r);return r}function vc(t,e){return t*Math.sqrt(1-e*e)}const kC=["duration","bounce"],TC=["stiffness","damping","mass"];function Ip(t,e){return e.some(n=>t[n]!==void 0)}function CC(t){let e={velocity:ue.velocity,stiffness:ue.stiffness,damping:ue.damping,mass:ue.mass,isResolvedFromDuration:!1,...t};if(!Ip(t,TC)&&Ip(t,kC))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Ft(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:ue.mass,stiffness:s,damping:i}}else{const n=jC(t);e={...e,...n,mass:ue.mass},e.isResolvedFromDuration=!0}return e}function F0(t=ue.visualDuration,e=ue.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=CC({...n,velocity:-Lt(n.velocity||0)}),g=f||0,v=c/(2*Math.sqrt(l*d)),b=o-i,m=Lt(Math.sqrt(l/d)),x=Math.abs(b)<5;r||(r=x?ue.restSpeed.granular:ue.restSpeed.default),s||(s=x?ue.restDelta.granular:ue.restDelta.default);let w;if(v<1){const j=vc(m,v);w=S=>{const N=Math.exp(-v*m*S);return o-N*((g+v*m*b)/j*Math.sin(j*S)+b*Math.cos(j*S))}}else if(v===1)w=j=>o-Math.exp(-m*j)*(b+(g+m*b)*j);else{const j=m*Math.sqrt(v*v-1);w=S=>{const N=Math.exp(-v*m*S),E=Math.min(j*S,300);return o-N*((g+v*m*b)*Math.sinh(E)+j*b*Math.cosh(E))/j}}const _={calculatedDuration:p&&h||null,next:j=>{const S=w(j);if(p)a.done=j>=h;else{let N=0;v<1&&(N=j===0?Dt(g):V0(w,j,S));const E=Math.abs(N)<=r,C=Math.abs(o-S)<=s;a.done=E&&C}return a.value=a.done?o:S,a},toString:()=>{const j=Math.min(i0(_),cc),S=o0(N=>_.next(j*N).value,j,30);return j+"ms "+S}};return _}function Dp({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},p=E=>a!==void 0&&E<a||l!==void 0&&E>l,g=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let v=n*e;const b=h+v,m=o===void 0?b:o(b);m!==b&&(v=m-h);const x=E=>-v*Math.exp(-E/r),w=E=>m+x(E),_=E=>{const C=x(E),k=w(E);f.done=Math.abs(C)<=c,f.value=f.done?m:k};let j,S;const N=E=>{p(f.value)&&(j=E,S=F0({keyframes:[f.value,g(f.value)],velocity:V0(w,E,f.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return N(0),{calculatedDuration:null,next:E=>{let C=!1;return!S&&j===void 0&&(C=!0,_(E),N(E)),j!==void 0&&E>=j?S.next(E-j):(!C&&_(E),f)}}}const PC=vi(.42,0,1,1),AC=vi(0,0,.58,1),B0=vi(.42,0,.58,1),RC=t=>Array.isArray(t)&&typeof t[0]!="number",OC={linear:Qe,easeIn:PC,easeInOut:B0,easeOut:AC,circIn:oh,circInOut:_0,circOut:b0,backIn:ih,backInOut:x0,backOut:v0,anticipate:w0},Lp=t=>{if(eh(t)){Ux(t.length===4);const[e,n,r,s]=t;return vi(e,n,r,s)}else if(typeof t=="string")return OC[t];return t};function IC(t,e,n){const r=[],s=n||U0,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Qe:e;a=xi(l,a)}r.push(a)}return r}function DC(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Ux(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=IC(e,r,s),l=a.length,c=d=>{if(o&&d<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=Kr(t[h],t[h+1],d);return a[h](f)};return n?d=>c(Ft(t[0],t[i-1],d)):c}function LC(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Kr(0,e,r);t.push(ie(n,1,s))}}function $C(t){const e=[0];return LC(e,t.length-1),e}function MC(t,e){return t.map(n=>n*e)}function UC(t,e){return t.map(()=>e||B0).splice(0,t.length-1)}function ca({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=RC(r)?r.map(Lp):Lp(r),i={done:!1,value:e[0]},o=MC(n&&n.length===e.length?n:$C(e),t),a=DC(o,e,{ease:Array.isArray(s)?s:UC(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const VC=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Z.update(e,!0),stop:()=>mn(e),now:()=>je.isProcessing?je.timestamp:Tt.now()}},FC={decay:Dp,inertia:Dp,tween:ca,keyframes:ca,spring:F0},BC=t=>t/100;class hh extends $0{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||ch,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=Zd(n)?n:FC[n]||ca;let l,c;a!==ca&&typeof e[0]!="number"&&(l=xi(BC,U0(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=i0(d));const{calculatedDuration:h}=d,f=h+s,p=f*(r+1)-s;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:h}=r;if(this.startTime===null)return i.next(0);const{delay:f,repeat:p,repeatType:g,repeatDelay:v,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const m=this.currentTime-f*(this.speed>=0?1:-1),x=this.speed>=0?m<0:m>d;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let w=this.currentTime,_=i;if(p){const E=Math.min(this.currentTime,d)/h;let C=Math.floor(E),k=E%1;!k&&E>=1&&(k=1),k===1&&C--,C=Math.min(C,p+1),!!(C%2)&&(g==="reverse"?(k=1-k,v&&(k-=v/h)):g==="mirror"&&(_=o)),w=Ft(0,1,k)*h}const j=x?{done:!1,value:l[0]}:_.next(w);a&&(j.value=a(j.value));let{done:S}=j;!x&&c!==null&&(S=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return N&&s!==void 0&&(j.value=Ha(l,this.options,s)),b&&b(j.value),N&&this.finish(),j}get duration(){const{resolved:e}=this;return e?Lt(e.calculatedDuration):0}get time(){return Lt(this.currentTime)}set time(e){e=Dt(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Lt(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=VC,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const GC=new Set(["opacity","clipPath","filter","transform"]);function zC(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const d=l0(a,s);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const WC=Md(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),da=10,KC=2e4;function HC(t){return Zd(t.type)||t.type==="spring"||!a0(t.ease)}function qC(t,e){const n=new hh({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let i=0;for(;!r.done&&i<KC;)r=n.sample(i),s.push(r.value),i+=da;return{times:void 0,keyframes:s,duration:i-da,ease:"linear"}}const G0={anticipate:w0,backInOut:x0,circInOut:_0};function JC(t){return t in G0}class $p extends $0{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new L0(i,(o,a)=>this.onKeyframesResolved(o,a),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&la()&&JC(i)&&(i=G0[i]),HC(this.options)){const{onComplete:h,onUpdate:f,motionValue:p,element:g,...v}=this.options,b=qC(e,v);e=b.keyframes,e.length===1&&(e[1]=e[0]),r=b.duration,s=b.times,i=b.ease,o="keyframes"}const d=zC(a.owner.current,l,e,{...this.options,duration:r,times:s,ease:i});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(bp(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;a.set(Ha(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Lt(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Lt(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Dt(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Qe;const{animation:r}=n;bp(r,e)}return Qe}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:i,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:h,element:f,...p}=this.options,g=new hh({...p,keyframes:r,duration:s,type:i,ease:o,times:a,isGenerator:!0}),v=Dt(this.time);c.setWithVelocity(g.sample(v-da).value,g.sample(v).value,da)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return WC()&&r&&GC.has(r)&&!l&&!c&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const YC={type:"spring",stiffness:500,damping:25,restSpeed:10},QC=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),XC={type:"keyframes",duration:.8},ZC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eP=(t,{keyframes:e})=>e.length>2?XC:er.has(t)?t.startsWith("scale")?QC(e[1]):YC:ZC;function tP({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const fh=(t,e,n,r={},s,i)=>o=>{const a=Xd(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Dt(l);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};tP(a)||(d={...d,...eP(t,d)}),d.duration&&(d.duration=Dt(d.duration)),d.repeatDelay&&(d.repeatDelay=Dt(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!i&&e.get()!==void 0){const f=Ha(d.keyframes,a);if(f!==void 0)return Z.update(()=>{d.onUpdate(f),d.onComplete()}),new wT([])}return!i&&$p.supports(d)?new $p(d):new hh(d)};function nP({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function z0(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const h in l){const f=t.getValue(h,(i=t.latestValues[h])!==null&&i!==void 0?i:null),p=l[h];if(p===void 0||d&&nP(d,h))continue;const g={delay:n,...Xd(o||{},h)};let v=!1;if(window.MotionHandoffAnimation){const m=p0(t);if(m){const x=window.MotionHandoffAnimation(m,h,Z);x!==null&&(g.startTime=x,v=!0)}}hc(t,h),f.start(fh(h,f,p,t.shouldReduceMotion&&h0.has(h)?{type:!1}:g,t,v));const b=f.animation;b&&c.push(b)}return a&&Promise.all(c).then(()=>{Z.update(()=>{a&&IT(t,a)})}),c}function xc(t,e,n={}){var r;const s=Ka(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const o=s?()=>Promise.all(z0(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=i;return rP(t,e,d+c,h,f,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,d]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(n.delay)])}function rP(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(sP).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(xc(c,e,{...i,delay:n+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function sP(t,e){return t.sortNodePosition(e)}function iP(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>xc(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=xc(t,e,n);else{const s=typeof e=="function"?Ka(t,e,n.custom):e;r=Promise.all(z0(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const oP=Vd.length;function W0(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?W0(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<oP;n++){const r=Vd[n],s=t.props[r];(si(s)||s===!1)&&(e[r]=s)}return e}const aP=[...Ud].reverse(),lP=Ud.length;function uP(t){return e=>Promise.all(e.map(({animation:n,options:r})=>iP(t,n,r)))}function cP(t){let e=uP(t),n=Mp(),r=!0;const s=l=>(c,d)=>{var h;const f=Ka(t,d,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:g,...v}=f;c={...c,...v,...g}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,d=W0(t.parent)||{},h=[],f=new Set;let p={},g=1/0;for(let b=0;b<lP;b++){const m=aP[b],x=n[m],w=c[m]!==void 0?c[m]:d[m],_=si(w),j=m===l?x.isActive:null;j===!1&&(g=b);let S=w===d[m]&&w!==c[m]&&_;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),x.protectedKeys={...p},!x.isActive&&j===null||!w&&!x.prevProp||za(w)||typeof w=="boolean")continue;const N=dP(x.prevProp,w);let E=N||m===l&&x.isActive&&!S&&_||b>g&&_,C=!1;const k=Array.isArray(w)?w:[w];let I=k.reduce(s(m),{});j===!1&&(I={});const{prevResolvedValues:ee={}}=x,D={...ee,...I},G=K=>{E=!0,f.has(K)&&(C=!0,f.delete(K)),x.needsAnimating[K]=!0;const P=t.getValue(K);P&&(P.liveStyle=!1)};for(const K in D){const P=I[K],U=ee[K];if(p.hasOwnProperty(K))continue;let V=!1;uc(P)&&uc(U)?V=!s0(P,U):V=P!==U,V?P!=null?G(K):f.add(K):P!==void 0&&f.has(K)?G(K):x.protectedKeys[K]=!0}x.prevProp=w,x.prevResolvedValues=I,x.isActive&&(p={...p,...I}),r&&t.blockInitialAnimation&&(E=!1),E&&(!(S&&N)||C)&&h.push(...k.map(K=>({animation:K,options:{type:m}})))}if(f.size){const b={};f.forEach(m=>{const x=t.getBaseTarget(m),w=t.getValue(m);w&&(w.liveStyle=!0),b[m]=x??null}),h.push({animation:b})}let v=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(h):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=Mp(),r=!0}}}function dP(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!s0(e,t):!1}function Tn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Mp(){return{animate:Tn(!0),whileInView:Tn(),whileHover:Tn(),whileTap:Tn(),whileDrag:Tn(),whileFocus:Tn(),exit:Tn()}}class Sn{constructor(e){this.isMounted=!1,this.node=e}update(){}}class hP extends Sn{constructor(e){super(e),e.animationState||(e.animationState=cP(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();za(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let fP=0;class pP extends Sn{constructor(){super(...arguments),this.id=fP++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const mP={animation:{Feature:hP},exit:{Feature:pP}};function li(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function wi(t){return{point:{x:t.pageX,y:t.pageY}}}const gP=t=>e=>th(e)&&t(e,wi(e));function Is(t,e,n,r){return li(t,e,gP(n),r)}const Up=(t,e)=>Math.abs(t-e);function yP(t,e){const n=Up(t.x,e.x),r=Up(t.y,e.y);return Math.sqrt(n**2+r**2)}class K0{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Fl(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=yP(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:g}=h,{timestamp:v}=je;this.history.push({...g,timestamp:v});const{onStart:b,onMove:m}=this.handlers;f||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Vl(f,this.transformPagePoint),Z.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Fl(h.type==="pointercancel"?this.lastMoveEventInfo:Vl(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,b),g&&g(h,b)},!th(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=wi(e),a=Vl(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=je;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,Fl(a,this.history)),this.removeListeners=xi(Is(this.contextWindow,"pointermove",this.handlePointerMove),Is(this.contextWindow,"pointerup",this.handlePointerUp),Is(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),mn(this.updatePoint)}}function Vl(t,e){return e?{point:e(t.point)}:t}function Vp(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Fl({point:t},e){return{point:t,delta:Vp(t,H0(e)),offset:Vp(t,vP(e)),velocity:xP(e,.1)}}function vP(t){return t[0]}function H0(t){return t[t.length-1]}function xP(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=H0(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Dt(e)));)n--;if(!r)return{x:0,y:0};const i=Lt(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const q0=1e-4,wP=1-q0,bP=1+q0,J0=.01,_P=0-J0,SP=0+J0;function Ze(t){return t.max-t.min}function jP(t,e,n){return Math.abs(t-e)<=n}function Fp(t,e,n,r=.5){t.origin=r,t.originPoint=ie(e.min,e.max,t.origin),t.scale=Ze(n)/Ze(e),t.translate=ie(n.min,n.max,t.origin)-t.originPoint,(t.scale>=wP&&t.scale<=bP||isNaN(t.scale))&&(t.scale=1),(t.translate>=_P&&t.translate<=SP||isNaN(t.translate))&&(t.translate=0)}function Ds(t,e,n,r){Fp(t.x,e.x,n.x,r?r.originX:void 0),Fp(t.y,e.y,n.y,r?r.originY:void 0)}function Bp(t,e,n){t.min=n.min+e.min,t.max=t.min+Ze(e)}function EP(t,e,n){Bp(t.x,e.x,n.x),Bp(t.y,e.y,n.y)}function Gp(t,e,n){t.min=e.min-n.min,t.max=t.min+Ze(e)}function Ls(t,e,n){Gp(t.x,e.x,n.x),Gp(t.y,e.y,n.y)}function NP(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ie(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ie(n,t,r.max):Math.min(t,n)),t}function zp(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function kP(t,{top:e,left:n,bottom:r,right:s}){return{x:zp(t.x,n,s),y:zp(t.y,e,r)}}function Wp(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function TP(t,e){return{x:Wp(t.x,e.x),y:Wp(t.y,e.y)}}function CP(t,e){let n=.5;const r=Ze(t),s=Ze(e);return s>r?n=Kr(e.min,e.max-r,t.min):r>s&&(n=Kr(t.min,t.max-s,e.min)),Ft(0,1,n)}function PP(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const wc=.35;function AP(t=wc){return t===!1?t=0:t===!0&&(t=wc),{x:Kp(t,"left","right"),y:Kp(t,"top","bottom")}}function Kp(t,e,n){return{min:Hp(t,e),max:Hp(t,n)}}function Hp(t,e){return typeof t=="number"?t:t[e]||0}const qp=()=>({translate:0,scale:1,origin:0,originPoint:0}),jr=()=>({x:qp(),y:qp()}),Jp=()=>({min:0,max:0}),de=()=>({x:Jp(),y:Jp()});function rt(t){return[t("x"),t("y")]}function Y0({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function RP({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function OP(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Bl(t){return t===void 0||t===1}function bc({scale:t,scaleX:e,scaleY:n}){return!Bl(t)||!Bl(e)||!Bl(n)}function In(t){return bc(t)||Q0(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Q0(t){return Yp(t.x)||Yp(t.y)}function Yp(t){return t&&t!=="0%"}function ha(t,e,n){const r=t-n,s=e*r;return n+s}function Qp(t,e,n,r,s){return s!==void 0&&(t=ha(t,s,r)),ha(t,n,r)+e}function _c(t,e=0,n=1,r,s){t.min=Qp(t.min,e,n,r,s),t.max=Qp(t.max,e,n,r,s)}function X0(t,{x:e,y:n}){_c(t.x,e.translate,e.scale,e.originPoint),_c(t.y,n.translate,n.scale,n.originPoint)}const Xp=.999999999999,Zp=1.0000000000001;function IP(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Nr(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,X0(t,o)),r&&In(i.latestValues)&&Nr(t,i.latestValues))}e.x<Zp&&e.x>Xp&&(e.x=1),e.y<Zp&&e.y>Xp&&(e.y=1)}function Er(t,e){t.min=t.min+e,t.max=t.max+e}function em(t,e,n,r,s=.5){const i=ie(t.min,t.max,s);_c(t,e,n,i,r)}function Nr(t,e){em(t.x,e.x,e.scaleX,e.scale,e.originX),em(t.y,e.y,e.scaleY,e.scale,e.originY)}function Z0(t,e){return Y0(OP(t.getBoundingClientRect(),e))}function DP(t,e,n){const r=Z0(t,n),{scroll:s}=e;return s&&(Er(r.x,s.offset.x),Er(r.y,s.offset.y)),r}const ew=({current:t})=>t?t.ownerDocument.defaultView:null,LP=new WeakMap;class $P{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=de(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(wi(d).point)},i=(d,h)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=CT(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rt(b=>{let m=this.getAxisMotionValue(b).get()||0;if(kt.test(m)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[b];w&&(m=Ze(w)*(parseFloat(m)/100))}}this.originPoint[b]=m}),g&&Z.postRender(()=>g(d,h)),hc(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:v}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:b}=h;if(p&&this.currentDirection===null){this.currentDirection=MP(b),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),v&&v(d,h)},a=(d,h)=>this.stop(d,h),l=()=>rt(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new K0(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:ew(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Z.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!to(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=NP(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&_r(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=kP(s.layoutBox,n):this.constraints=!1,this.elastic=AP(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&rt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=PP(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!_r(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=DP(r,s.root,this.visualElement.getTransformPagePoint());let o=TP(s.layout.layoutBox,i);if(n){const a=n(RP(o));this.hasMutatedConstraints=!!a,a&&(o=Y0(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=rt(d=>{if(!to(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return hc(this.visualElement,e),r.start(fh(e,r,0,n,this.visualElement,!1))}stopAnimation(){rt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){rt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){rt(n=>{const{drag:r}=this.getProps();if(!to(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-ie(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!_r(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};rt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=CP({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),rt(o=>{if(!to(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ie(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;LP.set(this.visualElement,this);const e=this.visualElement.current,n=Is(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();_r(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Z.read(r);const o=li(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(rt(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=wc,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function to(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function MP(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class UP extends Sn{constructor(e){super(e),this.removeGroupControls=Qe,this.removeListeners=Qe,this.controls=new $P(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qe}unmount(){this.removeGroupControls(),this.removeListeners()}}const tm=t=>(e,n)=>{t&&Z.postRender(()=>t(e,n))};class VP extends Sn{constructor(){super(...arguments),this.removePointerDownListener=Qe}onPointerDown(e){this.session=new K0(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ew(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:tm(e),onStart:tm(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Z.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Is(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _o={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nm(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const fs={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(M.test(t))t=parseFloat(t);else return t;const n=nm(t,e.target.x),r=nm(t,e.target.y);return`${n}% ${r}%`}},FP={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=gn.parse(t);if(s.length>5)return r;const i=gn.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=ie(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class BP extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;lT(GP),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),_o.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Z.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Bd.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function tw(t){const[e,n]=$x(),r=y.useContext(Id);return u.jsx(BP,{...t,layoutGroup:r,switchLayoutGroup:y.useContext(Wx),isPresent:e,safeToRemove:n})}const GP={borderRadius:{...fs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:fs,borderTopRightRadius:fs,borderBottomLeftRadius:fs,borderBottomRightRadius:fs,boxShadow:FP};function zP(t,e,n){const r=Re(t)?t:oi(t);return r.start(fh("",r,e,n)),r.animation}function WP(t){return t instanceof SVGElement&&t.tagName!=="svg"}const KP=(t,e)=>t.depth-e.depth;class HP{constructor(){this.children=[],this.isDirty=!1}add(e){nh(this.children,e),this.isDirty=!0}remove(e){rh(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(KP),this.isDirty=!1,this.children.forEach(e)}}function qP(t,e){const n=Tt.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(mn(r),t(i-e))};return Z.read(r,!0),()=>mn(r)}const nw=["TopLeft","TopRight","BottomLeft","BottomRight"],JP=nw.length,rm=t=>typeof t=="string"?parseFloat(t):t,sm=t=>typeof t=="number"||M.test(t);function YP(t,e,n,r,s,i){s?(t.opacity=ie(0,n.opacity!==void 0?n.opacity:1,QP(r)),t.opacityExit=ie(e.opacity!==void 0?e.opacity:1,0,XP(r))):i&&(t.opacity=ie(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<JP;o++){const a=`border${nw[o]}Radius`;let l=im(e,a),c=im(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||sm(l)===sm(c)?(t[a]=Math.max(ie(rm(l),rm(c),r),0),(kt.test(c)||kt.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=ie(e.rotate||0,n.rotate||0,r))}function im(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const QP=rw(0,.5,b0),XP=rw(.5,.95,Qe);function rw(t,e,n){return r=>r<t?0:r>e?1:n(Kr(t,e,r))}function om(t,e){t.min=e.min,t.max=e.max}function nt(t,e){om(t.x,e.x),om(t.y,e.y)}function am(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function lm(t,e,n,r,s){return t-=e,t=ha(t,1/n,r),s!==void 0&&(t=ha(t,1/s,r)),t}function ZP(t,e=0,n=1,r=.5,s,i=t,o=t){if(kt.test(e)&&(e=parseFloat(e),e=ie(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ie(i.min,i.max,r);t===i&&(a-=e),t.min=lm(t.min,e,n,a,s),t.max=lm(t.max,e,n,a,s)}function um(t,e,[n,r,s],i,o){ZP(t,e[n],e[r],e[s],e.scale,i,o)}const eA=["x","scaleX","originX"],tA=["y","scaleY","originY"];function cm(t,e,n,r){um(t.x,e,eA,n?n.x:void 0,r?r.x:void 0),um(t.y,e,tA,n?n.y:void 0,r?r.y:void 0)}function dm(t){return t.translate===0&&t.scale===1}function sw(t){return dm(t.x)&&dm(t.y)}function hm(t,e){return t.min===e.min&&t.max===e.max}function nA(t,e){return hm(t.x,e.x)&&hm(t.y,e.y)}function fm(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function iw(t,e){return fm(t.x,e.x)&&fm(t.y,e.y)}function pm(t){return Ze(t.x)/Ze(t.y)}function mm(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class rA{constructor(){this.members=[]}add(e){nh(this.members,e),e.scheduleRender()}remove(e){if(rh(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sA(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:g}=n;c&&(r=`perspective(${c}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Dn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},_s=typeof window<"u"&&window.MotionDebug!==void 0,Gl=["","X","Y","Z"],iA={visibility:"hidden"},gm=1e3;let oA=0;function zl(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function ow(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=p0(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Z,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&ow(r)}function aw({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=oA++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,_s&&(Dn.totalNodes=Dn.resolvedTargetDeltas=Dn.recalculatedProjection=0),this.nodes.forEach(uA),this.nodes.forEach(pA),this.nodes.forEach(mA),this.nodes.forEach(cA),_s&&window.MotionDebug.record(Dn)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new HP)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new sh),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=WP(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=qP(f,250),_o.hasAnimatedSinceResize&&(_o.hasAnimatedSinceResize=!1,this.nodes.forEach(vm))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||wA,{onLayoutAnimationStart:b,onLayoutAnimationComplete:m}=d.getProps(),x=!this.targetLayout||!iw(this.targetLayout,g)||p,w=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const _={...Xd(v,"layout"),onPlay:b,onComplete:m};(d.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else f||vm(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,mn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(gA),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ow(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ym);return}this.isUpdating||this.nodes.forEach(hA),this.isUpdating=!1,this.nodes.forEach(fA),this.nodes.forEach(aA),this.nodes.forEach(lA),this.clearAllSnapshots();const a=Tt.now();je.delta=Ft(0,1e3/60,a-je.timestamp),je.timestamp=a,je.isProcessing=!0,Il.update.process(je),Il.preRender.process(je),Il.render.process(je),je.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Bd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dA),this.sharedNodes.forEach(yA)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Z.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Z.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=de(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!sw(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||In(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),bA(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return de();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(_A))){const{scroll:d}=this.root;d&&(Er(l.x,d.offset.x),Er(l.y,d.offset.y))}return l}removeElementScroll(o){var a;const l=de();if(nt(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&nt(l,o),Er(l.x,h.offset.x),Er(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=de();nt(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Nr(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),In(d.latestValues)&&Nr(l,d.latestValues)}return In(this.latestValues)&&Nr(l,this.latestValues),l}removeTransform(o){const a=de();nt(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!In(c.latestValues))continue;bc(c.latestValues)&&c.updateSnapshot();const d=de(),h=c.measurePageBox();nt(d,h),cm(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return In(this.latestValues)&&cm(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==je.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=je.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=de(),this.relativeTargetOrigin=de(),Ls(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=de(),this.targetWithTransforms=de()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),EP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):nt(this.target,this.layout.layoutBox),X0(this.target,this.targetDelta)):nt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=de(),this.relativeTargetOrigin=de(),Ls(this.relativeTargetOrigin,this.target,p.target),nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_s&&Dn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||bc(this.parent.latestValues)||Q0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===je.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;nt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;IP(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=de());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(am(this.prevProjectionDelta.x,this.projectionDelta.x),am(this.prevProjectionDelta.y,this.projectionDelta.y)),Ds(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!mm(this.projectionDelta.x,this.prevProjectionDelta.x)||!mm(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),_s&&Dn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=jr(),this.projectionDelta=jr(),this.projectionDeltaWithTransform=jr()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=jr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=de(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,v=p!==g,b=this.getStack(),m=!b||b.members.length<=1,x=!!(v&&!m&&this.options.crossfade===!0&&!this.path.some(xA));this.animationProgress=0;let w;this.mixTargetDelta=_=>{const j=_/1e3;xm(h.x,o.x,j),xm(h.y,o.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ls(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),vA(this.relativeTarget,this.relativeTargetOrigin,f,j),w&&nA(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=de()),nt(w,this.relativeTarget)),v&&(this.animationValues=d,YP(d,c,this.latestValues,j,x,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(mn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Z.update(()=>{_o.hasAnimatedSinceResize=!0,this.currentAnimation=zP(0,gm,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gm),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&lw(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||de();const h=Ze(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=Ze(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}nt(a,l),Nr(a,d),Ds(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new rA),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&zl("z",o,c,this.animationValues);for(let d=0;d<Gl.length;d++)zl(`rotate${Gl[d]}`,o,c,this.animationValues),zl(`skew${Gl[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return iA;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=wo(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=wo(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!In(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=sA(this.projectionDeltaWithTransform,this.treeScale,f),d&&(c.transform=d(f,c.transform));const{x:p,y:g}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in aa){if(f[v]===void 0)continue;const{correct:b,applyTo:m}=aa[v],x=c.transform==="none"?f[v]:b(f[v],h);if(m){const w=m.length;for(let _=0;_<w;_++)c[m[_]]=x}else c[v]=x}return this.options.layoutId&&(c.pointerEvents=h===this?wo(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(ym),this.root.sharedNodes.clear()}}}function aA(t){t.updateLayout()}function lA(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?rt(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=Ze(f);f.min=r[h].min,f.max=f.min+p}):lw(i,n.layoutBox,r)&&rt(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=Ze(r[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=jr();Ds(a,r,n.layoutBox);const l=jr();o?Ds(l,t.applyTransform(s,!0),n.measuredBox):Ds(l,r,n.layoutBox);const c=!sw(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const g=de();Ls(g,n.layoutBox,f.layoutBox);const v=de();Ls(v,r,p.layoutBox),iw(g,v)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function uA(t){_s&&Dn.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cA(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function dA(t){t.clearSnapshot()}function ym(t){t.clearMeasurements()}function hA(t){t.isLayoutDirty=!1}function fA(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function vm(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function pA(t){t.resolveTargetDelta()}function mA(t){t.calcProjection()}function gA(t){t.resetSkewAndRotation()}function yA(t){t.removeLeadSnapshot()}function xm(t,e,n){t.translate=ie(e.translate,0,n),t.scale=ie(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function wm(t,e,n,r){t.min=ie(e.min,n.min,r),t.max=ie(e.max,n.max,r)}function vA(t,e,n,r){wm(t.x,e.x,n.x,r),wm(t.y,e.y,n.y,r)}function xA(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const wA={duration:.45,ease:[.4,0,.1,1]},bm=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_m=bm("applewebkit/")&&!bm("chrome/")?Math.round:Qe;function Sm(t){t.min=_m(t.min),t.max=_m(t.max)}function bA(t){Sm(t.x),Sm(t.y)}function lw(t,e,n){return t==="position"||t==="preserve-aspect"&&!jP(pm(e),pm(n),.2)}function _A(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const SA=aw({attachResizeListener:(t,e)=>li(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wl={current:void 0},uw=aw({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Wl.current){const t=new SA({});t.mount(window),t.setOptions({layoutScroll:!0}),Wl.current=t}return Wl.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),jA={pan:{Feature:VP},drag:{Feature:UP,ProjectionNode:uw,MeasureLayout:tw}};function jm(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Z.postRender(()=>i(e,wi(e)))}class EA extends Sn{mount(){const{current:e}=this.node;e&&(this.unmount=jT(e,n=>(jm(this.node,n,"Start"),r=>jm(this.node,r,"End"))))}unmount(){}}class NA extends Sn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xi(li(this.node.current,"focus",()=>this.onFocus()),li(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Em(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Z.postRender(()=>i(e,wi(e)))}class kA extends Sn{mount(){const{current:e}=this.node;e&&(this.unmount=TT(e,n=>(Em(this.node,n,"Start"),(r,{success:s})=>Em(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Sc=new WeakMap,Kl=new WeakMap,TA=t=>{const e=Sc.get(t.target);e&&e(t)},CA=t=>{t.forEach(TA)};function PA({root:t,...e}){const n=t||document;Kl.has(n)||Kl.set(n,{});const r=Kl.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(CA,{root:t,...e})),r[s]}function AA(t,e,n){const r=PA(e);return Sc.set(t,n),r.observe(t),()=>{Sc.delete(t),r.unobserve(t)}}const RA={some:0,all:1};class OA extends Sn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:RA[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=c?d:h;f&&f(l)};return AA(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(IA(e,n))&&this.startObserver()}unmount(){}}function IA({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const DA={inView:{Feature:OA},tap:{Feature:kA},focus:{Feature:NA},hover:{Feature:EA}},LA={layout:{ProjectionNode:uw,MeasureLayout:tw}},jc={current:null},cw={current:!1};function $A(){if(cw.current=!0,!!$d)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>jc.current=t.matches;t.addListener(e),e()}else jc.current=!1}const MA=[...D0,Ce,gn],UA=t=>MA.find(I0(t)),Nm=new WeakMap;function VA(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Re(s))t.addValue(r,s);else if(Re(i))t.addValue(r,oi(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,oi(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const km=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class FA{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ch,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Tt.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Z.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=o;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Wa(n),this.isVariantNode=Gx(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const g=f[p];l[p]!==void 0&&Re(g)&&g.set(l[p],!1)}}mount(e){this.current=e,Nm.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),cw.current||$A(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:jc.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Nm.delete(this.current),this.projection&&this.projection.unmount(),mn(this.notifyUpdate),mn(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=er.has(e),s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Z.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Hr){const n=Hr[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):de()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<km.length;r++){const s=km[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=VA(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=oi(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(R0(s)||S0(s))?s=parseFloat(s):!UA(s)&&gn.test(n)&&(s=C0(e,n)),this.setBaseTarget(e,Re(s)?s.get():s)),Re(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=zd(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[e])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Re(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new sh),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class dw extends FA{constructor(){super(...arguments),this.KeyframeResolver=L0}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Re(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function BA(t){return window.getComputedStyle(t)}class GA extends dw{constructor(){super(...arguments),this.type="html",this.renderInstance=Xx}readValueFromInstance(e,n){if(er.has(n)){const r=uh(n);return r&&r.default||0}else{const r=BA(e),s=(Jx(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Z0(e,n)}build(e,n,r){Hd(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Qd(e,n,r)}}class zA extends dw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=de}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(er.has(n)){const r=uh(n);return r&&r.default||0}return n=Zx.has(n)?n:Fd(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return n0(e,n,r)}build(e,n,r){qd(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){e0(e,n,r,s)}mount(e){this.isSVGTag=Yd(e.tagName),super.mount(e)}}const WA=(t,e)=>Gd(t)?new zA(e):new GA(e,{allowProjection:t!==y.Fragment}),KA=yT({...mP,...DA,...jA,...LA},WA),no=R1(KA),HA={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:260,damping:20}},exit:{opacity:0,scale:.95,transition:{duration:.15}}},Tm={hidden:{opacity:0,y:-20},visible:{opacity:1,y:0,transition:{duration:.25,ease:"easeOut"}},exit:{opacity:0,y:20,transition:{duration:.2,ease:"easeIn"}}},qA=({onClose:t})=>{const[e,n]=y.useState("main"),[r,s]=y.useState("student"),[i,o]=y.useState(""),[a,l]=y.useState(""),[c,d]=y.useState(""),[h,f]=y.useState(!1),[p,g]=y.useState(""),[v,b]=y.useState(""),[m,x]=y.useState(!1),w=Ue(),{refresh:_,setUser:j}=_n(),S=y.useCallback((D=!1)=>{!D&&(h||m)||(t(),n("main"),o(""),l(""),d(""),f(!1),s("student"),g(""),b(""),x(!1))},[m,h,t]),N=y.useCallback(async(D,G,L)=>{var U,V,te;const z=D==null?void 0:D.access_token,K=(D==null?void 0:D.user_role)??G;if(!z)throw new Error("  .");const P={id:((U=D==null?void 0:D.user)==null?void 0:U.id)??"",email:((V=D==null?void 0:D.user)==null?void 0:V.email)??L,name:((te=D==null?void 0:D.user)==null?void 0:te.name)??"",role:K,accessToken:z};if(j(P),await _(),S(!0),K==="admin"){w("/admin");return}w(K==="vod"?"/vod":"/my")},[S,w,_,j]),E=y.useCallback(async D=>{if(D.preventDefault(),!m){d("");try{x(!0);const G=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:p.trim(),password:v})}),L=await G.json();if(!G.ok)throw new Error((L==null?void 0:L.message)??"  ");if(L!=null&&L.user_role&&L.user_role!=="admin")throw new Error("  .");await N(L,"admin",p.trim())}catch(G){console.error("[LoginModal] admin login failed",G);const L=(G==null?void 0:G.message)??"     ";d(L)}finally{x(!1)}}},[p,v,m,N]),C=y.useCallback(async D=>{if(D.preventDefault(),!h){d(""),f(!0);try{const G=await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.trim(),password:a.trim()})}),L=await G.json();if(!G.ok)throw new Error((L==null?void 0:L.message)??" .");const z=(L==null?void 0:L.user_role)??r;if(z!==r)throw new Error("ROLE_MISMATCH");await N(L,z??r,i.trim())}catch(G){console.error("[LoginModal] login failed",G);const L=(G==null?void 0:G.message)??" .";d(L==="ROLE_MISMATCH"?"   .":L)}finally{f(!1)}}},[i,N,h,a,r]),k=y.useCallback(async()=>{localStorage.setItem("oauth_role",r),await F.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/google/callback`}})},[r]);y.useEffect(()=>{const D=G=>{G.key==="Escape"&&S()};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[S]);const I=()=>u.jsx(no.div,{variants:Tm,initial:"hidden",animate:"visible",exit:"exit",className:"relative",children:u.jsxs("div",{className:"mt-4",children:[u.jsx("label",{className:"block text-sm font-medium mb-2",children:" "}),u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[u.jsx("input",{type:"radio",name:"role",value:"student",checked:r==="student",onChange:()=>s("student")}),""]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[u.jsx("input",{type:"radio",name:"role",value:"vod",checked:r==="vod",onChange:()=>s("vod")}),"VOD"]})]}),u.jsxs("form",{onSubmit:C,children:[u.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),u.jsx("input",{type:"email",className:"border rounded-md w-full p-2 mb-3",value:i,onChange:D=>o(D.target.value),required:!0}),u.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),u.jsx("input",{type:"password",className:"border rounded-md w-full p-2 mb-3",value:a,onChange:D=>l(D.target.value),required:!0}),c&&u.jsx("p",{className:"text-sm text-red-500 mb-3",children:c}),u.jsx("button",{type:"submit",className:"bg-yellow-400 hover:bg-yellow-500 rounded-lg text-white py-2 w-full",disabled:h,children:h?" ...":""})]}),u.jsx("button",{type:"button",onClick:k,className:"mt-4 w-full bg-red-500 text-white py-2 rounded-lg hover:bg-red-600",children:"Google /"}),u.jsx("button",{type:"button",onClick:()=>{S(),w("/signup")},className:"mt-4 w-full bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:""})]})},"main-form"),ee=()=>u.jsxs(no.div,{variants:Tm,initial:"hidden",animate:"visible",exit:"exit",className:"relative",children:[u.jsx("button",{type:"button",className:"absolute right-0 top-0 text-sm text-gray-500 hover:text-gray-700",onClick:()=>{d(""),n("main")},children:" "}),u.jsxs("form",{className:"mt-6",onSubmit:E,children:[u.jsx("label",{className:"block font-medium mb-1",children:""}),u.jsx("input",{type:"email",className:"border rounded-md w-full p-2 mb-3",value:p,onChange:D=>g(D.target.value),required:!0}),u.jsx("label",{className:"block font-medium mb-1",children:""}),u.jsx("input",{type:"password",className:"border rounded-md w-full p-2 mb-3",value:v,onChange:D=>b(D.target.value),required:!0}),c&&u.jsx("p",{className:"text-sm text-red-500 mb-3",children:c}),u.jsx("button",{type:"submit",className:"bg-yellow-400 hover:bg-yellow-500 rounded-lg text-white py-2 w-full",disabled:m,children:m?" ...":""})]})]},"admin-form");return u.jsx(no.div,{className:"fixed inset-0 bg-black/30 z-50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs(no.div,{className:"bg-white rounded-2xl shadow-xl p-6 w-[400px] relative",variants:HA,initial:"hidden",animate:"visible",exit:"exit",children:[u.jsx("button",{onClick:S,className:"absolute top-3 right-3 text-gray-400 hover:text-gray-600 text-xl leading-none","aria-label":"Close",children:""}),u.jsxs("div",{className:"flex items-center justify-between pr-8",children:[u.jsx("h2",{className:"text-xl font-semibold",children:""}),u.jsx("button",{className:"bg-yellow-400 hover:bg-yellow-500 rounded-lg text-white py-2 px-3 text-sm",onClick:()=>{d(""),n("admin")},children:" "})]}),u.jsx("div",{className:"mt-4 min-h-[220px]",children:u.jsxs(j1,{mode:"wait",children:[e==="main"&&I(),e==="admin"&&ee()]})})]})})};function JA(){return u.jsxs(PS,{children:[u.jsx(W,{path:"/auth/google/callback",element:u.jsx(cN,{})}),u.jsxs(W,{element:u.jsx(IN,{}),children:[u.jsx(W,{index:!0,element:u.jsx(np,{})}),u.jsx(W,{path:"/home",element:u.jsx(np,{})}),u.jsx(W,{path:"/classroom",element:u.jsx(BN,{})}),u.jsxs(W,{path:"/classroom/:classId",element:u.jsx(YN,{}),children:[u.jsx(W,{index:!0,element:u.jsx(Rs,{to:"video",replace:!0})}),u.jsx(W,{path:"video",element:u.jsx(yk,{})}),u.jsx(W,{path:"material",element:u.jsx(vk,{})}),u.jsx(W,{path:"notice",element:u.jsx(xk,{})}),u.jsx(W,{path:"assignment",element:u.jsx(bk,{})}),u.jsx(W,{path:"feedback",element:u.jsx(wk,{})})]}),u.jsx(W,{path:"/notices",element:u.jsx(qN,{})}),u.jsx(W,{path:"/my",element:u.jsx(KN,{})}),x1(),u.jsx(W,{path:"/signup",element:u.jsx(dN,{})}),u.jsx(W,{path:"/vod",element:u.jsx($N,{})})]}),u.jsxs(W,{path:"/admin",element:u.jsx(Ek,{}),children:[u.jsx(W,{index:!0,element:u.jsx(Rs,{to:"/admin/dashboard",replace:!0})}),u.jsx(W,{path:"dashboard",element:u.jsx(kk,{})}),u.jsx(W,{path:"lessons",element:u.jsx(Vk,{})}),u.jsx(W,{path:"lessons/new",element:u.jsx(Dk,{})}),u.jsx(W,{path:"lessons/:lesson_id/edit",element:u.jsx($k,{})}),u.jsx(W,{path:"lessons/:lesson_id",element:u.jsx(Mk,{})}),u.jsx(W,{path:"students",element:u.jsx(Jk,{})}),u.jsx(W,{path:"assignments",element:u.jsx(Kk,{})}),u.jsx(W,{path:"global",element:u.jsx(u1,{})}),u.jsx(W,{path:"vod",element:u.jsx(p1,{})}),u.jsx(W,{path:"classrooms",element:u.jsx(cp,{})}),u.jsx(W,{path:"classrooms/:class_id",element:u.jsx(Rs,{to:"content",replace:!0})}),u.jsx(W,{path:"classrooms/:class_id/content",element:u.jsx(cp,{})}),u.jsx(W,{path:"classrooms/:class_id/assignments",element:u.jsx(o1,{})})]})]})}function YA(){return u.jsx(bN,{children:u.jsx(QA,{})})}function QA(){const{isOpen:t,close:e}=y.useContext(Va);return u.jsxs(u.Fragment,{children:[u.jsx(JA,{}),t&&u.jsx(qA,{onClose:e})]})}const XA=t=>{try{const e=new URL(t,window.location.origin);return e.origin!==window.location.origin?!1:e.pathname.startsWith("/.netlify/functions")}catch(e){return console.warn("[authFetch] Failed to parse request URL",t,e),!1}},ZA=()=>{if(typeof window>"u"||window.__authFetchConfigured)return;const t=window.fetch.bind(window);window.__authFetchConfigured=!0,window.fetch=async(e,n)=>{try{const r=typeof e=="string"?e:e instanceof Request?e.url:e.toString(),s=Ma();if(!s||!s.accessToken||!XA(r))return t(e,n);const i=new Headers((n==null?void 0:n.headers)??(e instanceof Request?e.headers:void 0));i.set("Authorization",`Bearer ${s.accessToken}`),i.set("X-User-Role",s.role);const o={...n,headers:i},a=e instanceof Request?new Request(e,o):e;return t(a,o)}catch(r){return console.error("[authFetch] Failed to decorate request",r),t(e,n)}}};ZA();Hl.createRoot(document.getElementById("root")).render(u.jsx(So.StrictMode,{children:u.jsx(wN,{children:u.jsx(MS,{children:u.jsx(YA,{})})})}));
